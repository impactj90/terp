swagger: '2.0'
info:
  title: Terp API
  description: |
    RESTful API for the Terp application - Time & Resource Planning.

    ## Authentication
    All endpoints except `/health` and `/auth/*` require a valid JWT token in the Authorization header:
    ```
    Authorization: Bearer <token>
    ```

    ## Pagination
    List endpoints support cursor-based pagination:
    - `limit`: Number of items to return (default: 20, max: 100)
    - `cursor`: Cursor for next page (returned in response)

    ## Error Responses
    All errors follow RFC 7807 Problem Details format.

    ## File Structure
    This spec is organized into:
    - `paths/` - API endpoint definitions by domain
    - `schemas/` - Data models by domain
    - `responses/` - Reusable response definitions
  version: 1.0.0
  contact:
    name: API Support
  license:
    name: Proprietary
host: 'localhost:8080'
basePath: /api/v1
schemes:
  - http
  - https
consumes:
  - application/json
produces:
  - application/json
tags:
  - name: Health
    description: Health check endpoints
  - name: Auth
    description: Authentication endpoints
  - name: Users
    description: User management
  - name: Notifications
    description: Notification preferences and history
  - name: Tenants
    description: Tenant management
  - name: Employees
    description: Employee management
  - name: Departments
    description: Department management
  - name: Locations
    description: Location management
  - name: Cost Centers
    description: Cost center management
  - name: Employment Types
    description: Employment type management
  - name: User Groups
    description: User group and permission management
  - name: Day Plans
    description: Day plan configuration
  - name: Week Plans
    description: Week plan configuration
  - name: Tariffs
    description: Tariff configuration
  - name: Booking Types
    description: Booking type management
  - name: Bookings
    description: Time bookings (clock in/out)
  - name: Daily Values
    description: Daily calculated values
  - name: Holidays
    description: Holiday management
  - name: Absence Types
    description: Absence type management
  - name: Absences
    description: Absence management
  - name: Vacation
    description: Vacation balance management
  - name: Monthly Values
    description: Monthly aggregated values
  - name: Corrections
    description: Time corrections
  - name: Accounts
    description: Time account management
  - name: Audit Logs
    description: Audit log viewing
  - name: Reports
    description: Report generation
  - name: Payroll
    description: Payroll export
  - name: Teams
    description: Team management
  - name: Employee Day Plans
    description: Employee day plan assignments
  - name: Monthly Evaluations
    description: Monthly evaluation configuration
  - name: Absence Type Groups
    description: Absence type group management
  - name: Account Groups
    description: Account group management
  - name: Booking Reasons
    description: Booking reason management
  - name: Booking Type Groups
    description: Booking type group management
  - name: Groups
    description: 'Employee, workflow, and activity group management'
  - name: Calculation Rules
    description: Absence calculation rule management
  - name: Correction Assistant
    description: Error/hint catalog and correction assistant queries
  - name: Vacation Special Calculations
    description: 'Vacation special calculation rules (age, tenure, disability bonuses)'
  - name: Vacation Calculation Groups
    description: Vacation calculation groups combining basis and special calculations
  - name: Vacation Capping Rules
    description: Vacation capping rules (Kappungsregeln) for year-end and mid-year carryover limits
  - name: Vacation Capping Rule Groups
    description: Groups of vacation capping rules for assignment to tariffs
  - name: Employee Capping Exceptions
    description: Individual employee exceptions from vacation capping rules
  - name: Export Interfaces
    description: Data exchange interface configuration
  - name: Employee Tariff Assignments
    description: Date-ranged tariff assignments for employees
  - name: Activities
    description: Activity/work type management for orders
  - name: Orders
    description: Order/project management for time tracking
  - name: Order Assignments
    description: Employee-to-order assignments
  - name: Order Bookings
    description: Order-based time bookings
  - name: Evaluations
    description: Read-only evaluation queries (Auswertungen)
  - name: Scheduler
    description: Schedule management and automated task execution
  - name: System Settings
    description: System-wide settings and cleanup tools
  - name: Employee Messages
    description: Employee message creation and delivery
  - name: Contact Types
    description: Contact type and kind management (Kontaktmanagement)
  - name: Contact Kinds
    description: Contact kind management linked to contact types
  - name: Terminal Bookings
    description: Raw terminal booking data and import batch management
  - name: Access Zones
    description: Access control zone management (placeholder - requires separate ZMI Zutritt documentation)
  - name: Access Profiles
    description: Access control profile management (placeholder - requires separate ZMI Zutritt documentation)
  - name: Employee Access Assignments
    description: Employee-to-access-profile assignment management (placeholder)
  - name: Vehicles
    description: Vehicle data management (placeholder - requires separate vehicle documentation)
  - name: Vehicle Routes
    description: Vehicle route management (placeholder - requires separate vehicle documentation)
  - name: Trip Records
    description: Trip record management (placeholder - requires separate vehicle documentation)
  - name: Travel Allowance Rule Sets
    description: Travel allowance (Ausloese) rule set configuration
  - name: Local Travel Rules
    description: Local travel (Nahmontage) rule management for same-day trips
  - name: Extended Travel Rules
    description: Extended travel (Fernmontage) rule management for multi-day trips
  - name: Travel Allowance
    description: Travel allowance preview calculations
  - name: Shifts
    description: Shift definition management for the planning board / Plantafel (placeholder - requires separate Plantafel documentation)
  - name: Shift Assignments
    description: Employee-to-shift assignment management for the planning board (placeholder)
  - name: Macros
    description: 'Weekly and monthly macro definitions, assignments, and execution'
securityDefinitions:
  BearerAuth:
    type: apiKey
    name: Authorization
    in: header
    description: JWT token. Format "Bearer <token>"
security:
  - BearerAuth: []
paths:
  /health:
    get:
      tags:
        - Health
      summary: Health check
      description: |
        Returns service health status and version. Use for load balancer health
        checks and monitoring. No authentication required.
      operationId: getHealth
      security: []
      responses:
        '200':
          description: Service healthy
          schema:
            type: object
            properties:
              status:
                type: string
                example: healthy
              version:
                type: string
                example: 1.0.0
  /auth/login:
    post:
      tags:
        - Auth
      summary: Login with credentials
      description: |
        Authenticate with email/password and receive a JWT token.
        In development mode, use dev/login instead for easier testing.
      operationId: authLogin
      security: []
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - email
              - password
            properties:
              email:
                type: string
                format: email
              password:
                type: string
                format: password
      responses:
        '200':
          description: Login successful
          schema:
            type: object
            properties:
              token:
                type: string
                description: JWT token
              user:
                $ref: '#/definitions/User'
        '401':
          $ref: '#/responses/Unauthorized'
        '500':
          $ref: '#/responses/InternalError'
  /auth/refresh:
    post:
      tags:
        - Auth
      summary: Refresh token
      description: Exchange a valid JWT for a new one
      operationId: authRefresh
      responses:
        '200':
          description: Token refreshed
          schema:
            type: object
            properties:
              token:
                type: string
                description: New JWT token
        '401':
          $ref: '#/responses/Unauthorized'
  /auth/logout:
    post:
      tags:
        - Auth
      summary: Logout
      description: Clears session/JWT cookie
      operationId: authLogout
      responses:
        '204':
          description: Logged out successfully
        '401':
          $ref: '#/responses/Unauthorized'
  /auth/me:
    get:
      tags:
        - Auth
      summary: Get current user
      description: Returns the authenticated user's profile
      operationId: getCurrentUser
      responses:
        '200':
          description: Current user profile
          schema:
            $ref: '#/definitions/User'
        '401':
          $ref: '#/responses/Unauthorized'
  /auth/permissions:
    get:
      tags:
        - Auth
      summary: Get current user permissions
      description: Returns permission IDs for the authenticated user
      operationId: getCurrentUserPermissions
      responses:
        '200':
          description: Current user permissions
          schema:
            $ref: '#/definitions/CurrentUserPermissionsResponse'
        '401':
          $ref: '#/responses/Unauthorized'
  /auth/dev/login:
    get:
      tags:
        - Auth
      summary: Dev mode login
      description: |
        Development-only endpoint for testing authentication.
        Returns a JWT token for a test user with the specified role.
        Only available when ENV=development.
      operationId: devLogin
      security: []
      parameters:
        - name: role
          in: query
          required: false
          type: string
          enum:
            - admin
            - user
          default: user
          description: Role of the test user to authenticate as
      responses:
        '200':
          description: Login successful
          schema:
            type: object
            properties:
              token:
                type: string
                description: JWT token
              user:
                $ref: '#/definitions/User'
        '400':
          $ref: '#/responses/BadRequest'
        '403':
          $ref: '#/responses/Forbidden'
  /auth/dev/users:
    get:
      tags:
        - Auth
      summary: List dev users
      description: |
        Development-only endpoint that lists available test users.
        Only available when ENV=development.
      operationId: devUsers
      security: []
      responses:
        '200':
          description: List of dev users
          schema:
            type: object
            properties:
              dev_mode:
                type: boolean
              users:
                type: array
                items:
                  $ref: '#/definitions/User'
        '403':
          $ref: '#/responses/Forbidden'
  /users:
    get:
      tags:
        - Users
      summary: List users
      description: |
        Returns a paginated list of users in the system. Users are people who
        can log in to the application. Supports search by name or email and
        cursor-based pagination for large datasets.
      operationId: listUsers
      parameters:
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
        - name: search
          in: query
          type: string
          description: Search by name or email
      responses:
        '200':
          description: List of users
          schema:
            $ref: '#/definitions/UserList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Users
      summary: Create user
      description: |
        Creates a new user account and optionally assigns a user group and data scope.
        Requires users.manage permission.
      operationId: createUser
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateUserRequest'
      responses:
        '201':
          description: Created user
          schema:
            $ref: '#/definitions/User'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  '/users/{id}':
    get:
      tags:
        - Users
      summary: Get user by ID
      description: |
        Retrieves a single user's profile including email, display name, avatar,
        and role. Use this to display user details or populate an edit form.
      operationId: getUser
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: User details
          schema:
            $ref: '#/definitions/User'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Users
      summary: Update user
      description: |
        Updates a user's profile information. Users can update their own profile;
        admins can update any user. Supports partial updates - only include
        fields that should change.
      operationId: updateUser
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateUserRequest'
      responses:
        '200':
          description: Updated user
          schema:
            $ref: '#/definitions/User'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Users
      summary: Delete user
      description: |
        Deletes a user account. Admin only.
      operationId: deleteUser
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: User deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
  /notifications:
    get:
      tags:
        - Notifications
      summary: List notifications for the current user
      operationId: listNotifications
      parameters:
        - name: type
          in: query
          type: string
          enum:
            - approvals
            - errors
            - reminders
            - system
          description: Filter by notification type
        - name: unread
          in: query
          type: boolean
          description: Filter by unread status
        - name: from
          in: query
          type: string
          format: date-time
          description: Start datetime filter
        - name: to
          in: query
          type: string
          format: date-time
          description: End datetime filter
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: offset
          in: query
          type: integer
          minimum: 0
          default: 0
      responses:
        '200':
          description: List of notifications
          schema:
            $ref: '#/definitions/NotificationList'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  '/notifications/{id}/read':
    post:
      tags:
        - Notifications
      summary: Mark notification as read
      operationId: markNotificationRead
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Updated notification
          schema:
            $ref: '#/definitions/Notification'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
  /notifications/read-all:
    post:
      tags:
        - Notifications
      summary: Mark all notifications as read
      operationId: markAllNotificationsRead
      responses:
        '200':
          description: Count of notifications marked as read
          schema:
            $ref: '#/definitions/MarkNotificationsReadResponse'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  /notifications/stream:
    get:
      tags:
        - Notifications
      summary: Stream notifications for the current user
      operationId: streamNotifications
      produces:
        - text/event-stream
      responses:
        '200':
          description: Server-sent events stream
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  /notification-preferences:
    get:
      tags:
        - Notifications
      summary: Get notification preferences for the current user
      operationId: getNotificationPreferences
      responses:
        '200':
          description: Notification preferences
          schema:
            $ref: '#/definitions/NotificationPreferences'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
    put:
      tags:
        - Notifications
      summary: Update notification preferences for the current user
      operationId: updateNotificationPreferences
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateNotificationPreferencesRequest'
      responses:
        '200':
          description: Updated notification preferences
          schema:
            $ref: '#/definitions/NotificationPreferences'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  /tenants:
    get:
      tags:
        - Tenants
      summary: List tenants
      description: |
        Returns all tenants (organizations/companies) in the system. Each tenant
        has isolated data. Use for tenant selection screens or admin dashboards.
        Filter by active status to show only enabled tenants. By default, inactive
        tenants are excluded unless include_inactive is true or an explicit
        active filter is provided.
      operationId: listTenants
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status (true/false)
        - name: include_inactive
          in: query
          type: boolean
          description: Include inactive tenants when no active filter is specified
        - name: name
          in: query
          type: string
          description: Case-insensitive name search filter
      responses:
        '200':
          description: List of tenants
          schema:
            type: array
            items:
              $ref: '#/definitions/Tenant'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Tenants
      summary: Create tenant
      description: |
        Creates a new tenant (organization). Each tenant gets isolated data storage.
        The slug must be unique and URL-friendly (used in URLs and API headers).
        Requires admin privileges.
      operationId: createTenant
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateTenantRequest'
      responses:
        '201':
          description: Created tenant
          schema:
            $ref: '#/definitions/Tenant'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/tenants/{id}':
    get:
      tags:
        - Tenants
      summary: Get tenant by ID
      description: |
        Retrieves tenant details including name, slug, settings, and status.
        Use to display tenant info or populate settings forms.
      operationId: getTenant
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Tenant details
          schema:
            $ref: '#/definitions/Tenant'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Tenants
      summary: Update tenant
      description: |
        Updates tenant properties like name, settings, or active status.
        Deactivating a tenant prevents users from accessing it. Supports
        partial updates - only include fields to change.
      operationId: updateTenant
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateTenantRequest'
      responses:
        '200':
          description: Updated tenant
          schema:
            $ref: '#/definitions/Tenant'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Tenants
      summary: Deactivate tenant
      description: |
        Deactivates a tenant by setting is_active=false. Deactivated tenants
        cannot be used in tenant-scoped APIs. Requires admin privileges.
      operationId: deleteTenant
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Tenant deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /employees:
    get:
      tags:
        - Employees
      summary: List employees
      description: |
        Returns a paginated list of employees. Employees are the core entity -
        they clock in/out and have time records. Filter by department, active
        status, or search by name/personnel number/email.
      operationId: listEmployees
      parameters:
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: page
          in: query
          type: integer
          default: 1
          minimum: 1
        - name: q
          in: query
          type: string
          description: 'Search by name, personnel number, or email'
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of employees
          schema:
            $ref: '#/definitions/EmployeeList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Employees
      summary: Create employee
      description: |
        Creates a new employee record. Personnel number and PIN must be unique
        within the tenant. Optionally link to a user account for self-service.
      operationId: createEmployee
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmployeeRequest'
      responses:
        '201':
          description: Created employee
          schema:
            $ref: '#/definitions/Employee'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Personnel number or PIN already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  /employees/search:
    get:
      tags:
        - Employees
      summary: Quick search employees
      description: |
        Fast typeahead search for employee selection. Returns minimal data
        (ID, name, personnel number) for autocomplete dropdowns.
      operationId: searchEmployees
      parameters:
        - name: q
          in: query
          required: true
          type: string
          description: Search query
      responses:
        '200':
          description: Search results
          schema:
            type: array
            items:
              $ref: '#/definitions/EmployeeSummary'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /employees/bulk-tariff:
    patch:
      tags:
        - Employees
      summary: Bulk assign tariff
      description: |
        Assigns or clears a tariff for multiple employees. Provide either a list
        of employee IDs or a filter that targets all matching employees.
      operationId: bulkAssignTariff
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/BulkTariffAssignmentRequest'
      responses:
        '200':
          description: Bulk tariff assignment result
          schema:
            $ref: '#/definitions/BulkTariffAssignmentResponse'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/employees/{id}':
    get:
      tags:
        - Employees
      summary: Get employee by ID
      description: |
        Returns full employee details including personal info, employment data,
        department, cost center, and work schedule assignments.
      operationId: getEmployee
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Employee details
          schema:
            $ref: '#/definitions/Employee'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Employees
      summary: Update employee
      description: |
        Updates employee information. Some changes (like department or schedule)
        may trigger recalculation of time records.
      operationId: updateEmployee
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateEmployeeRequest'
      responses:
        '200':
          description: Updated employee
          schema:
            $ref: '#/definitions/Employee'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Employees
      summary: Deactivate employee
      description: Soft deletes (deactivates) the employee
      operationId: deleteEmployee
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Employee deactivated
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/contacts':
    get:
      tags:
        - Employees
      summary: List employee contacts
      description: Returns emergency contacts and other contact persons for an employee.
      operationId: listEmployeeContacts
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: List of contacts
          schema:
            type: array
            items:
              $ref: '#/definitions/Employee/properties/contacts/items'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    post:
      tags:
        - Employees
      summary: Add employee contact
      description: Adds an emergency or other contact person for the employee.
      operationId: createEmployeeContact
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmployeeContactRequest'
      responses:
        '201':
          description: Created contact
          schema:
            $ref: '#/definitions/Employee/properties/contacts/items'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/contacts/{contactId}':
    delete:
      tags:
        - Employees
      summary: Delete employee contact
      operationId: deleteEmployeeContact
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: contactId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Contact deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/cards':
    get:
      tags:
        - Employees
      summary: List employee cards
      description: |
        Returns access/time cards assigned to the employee. Cards are used
        for terminal clock-in/out.
      operationId: listEmployeeCards
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: List of cards
          schema:
            type: array
            items:
              $ref: '#/definitions/Employee/properties/cards/items'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    post:
      tags:
        - Employees
      summary: Add employee card
      operationId: createEmployeeCard
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmployeeCardRequest'
      responses:
        '201':
          description: Created card
          schema:
            $ref: '#/definitions/Employee/properties/cards/items'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/cards/{cardId}':
    delete:
      tags:
        - Employees
      summary: Deactivate employee card
      operationId: deactivateEmployeeCard
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: cardId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Card deactivated
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/day/{date}':
    get:
      tags:
        - Employees
        - Bookings
      summary: Get employee day view
      description: 'Returns complete day information including bookings, daily value, and errors'
      operationId: getEmployeeDayView
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: date
          in: path
          required: true
          type: string
          format: date
          description: Date in YYYY-MM-DD format
      responses:
        '200':
          description: Day view
          schema:
            $ref: '#/definitions/DayView'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/day/{date}/calculate':
    post:
      tags:
        - Employees
        - Bookings
      summary: Recalculate day
      description: Manually trigger recalculation of daily values for the specified day
      operationId: calculateEmployeeDay
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: date
          in: path
          required: true
          type: string
          format: date
      responses:
        '200':
          description: Calculated daily value
          schema:
            $ref: '#/definitions/DailyValue'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/absences':
    get:
      tags:
        - Employees
        - Absences
      summary: List employee absences
      operationId: listEmployeeAbsences
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: from
          in: query
          type: string
          format: date
          description: Start date filter
        - name: to
          in: query
          type: string
          format: date
          description: End date filter
      responses:
        '200':
          description: List of absences
          schema:
            $ref: '#/definitions/AbsenceList'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    post:
      tags:
        - Employees
        - Absences
      summary: Create absence range
      description: Create absences for a date range
      operationId: createEmployeeAbsenceRange
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateAbsenceRangeRequest'
      responses:
        '201':
          description: Created absences
          schema:
            $ref: '#/definitions/AbsenceList'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/vacation-balance':
    get:
      tags:
        - Employees
        - Vacation
      summary: Get employee vacation balance
      operationId: getEmployeeVacationBalance
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: year
          in: query
          type: integer
          description: Year (defaults to current year)
      responses:
        '200':
          description: Vacation balance
          schema:
            $ref: '#/definitions/VacationBalance'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/tariff-assignments':
    get:
      tags:
        - Employees
      summary: List tariff assignments for employee
      description: |
        Returns all tariff assignments for an employee, ordered by effective_from date.
        Each assignment represents a period where a specific tariff applies.
      operationId: listEmployeeTariffAssignments
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of tariff assignments
          schema:
            $ref: '#/definitions/EmployeeTariffAssignmentList'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    post:
      tags:
        - Employees
      summary: Assign tariff to employee with date range
      description: |
        Creates a new tariff assignment for the employee with an effective date range.
        The date range must not overlap with existing active assignments.
      operationId: createEmployeeTariffAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmployeeTariffAssignmentRequest'
      responses:
        '201':
          description: Created tariff assignment
          schema:
            $ref: '#/definitions/EmployeeTariffAssignment'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Overlapping assignment exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/employees/{id}/tariff-assignments/{assignmentId}':
    get:
      tags:
        - Employees
      summary: Get tariff assignment by ID
      operationId: getEmployeeTariffAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: assignmentId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Tariff assignment details
          schema:
            $ref: '#/definitions/EmployeeTariffAssignment'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Employees
      summary: Update tariff assignment
      operationId: updateEmployeeTariffAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: assignmentId
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateEmployeeTariffAssignmentRequest'
      responses:
        '200':
          description: Updated tariff assignment
          schema:
            $ref: '#/definitions/EmployeeTariffAssignment'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Overlapping assignment exists
          schema:
            $ref: '#/definitions/ProblemDetails'
    delete:
      tags:
        - Employees
      summary: Delete tariff assignment
      operationId: deleteEmployeeTariffAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: assignmentId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Assignment deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/effective-tariff':
    get:
      tags:
        - Employees
      summary: Preview effective tariff for employee at a date
      description: |
        Resolves which tariff applies to the employee at the given date.
        Resolution order: (1) active assignment covering the date, (2) employee default tariff_id, (3) none.
      operationId: getEffectiveTariff
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: date
          in: query
          required: true
          type: string
          format: date
          description: Date to resolve effective tariff for
      responses:
        '200':
          description: Effective tariff for the given date
          schema:
            $ref: '#/definitions/EffectiveTariffResponse'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /departments:
    get:
      tags:
        - Departments
      summary: List departments
      description: |
        Returns organizational departments. Departments can be hierarchical
        (parent/child). Use for org charts, filtering employees, or assigning
        department-specific holidays.
      operationId: listDepartments
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
        - name: parent_id
          in: query
          type: string
          format: uuid
          description: Filter by parent department
      responses:
        '200':
          description: List of departments
          schema:
            $ref: '#/definitions/DepartmentList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Departments
      summary: Create department
      operationId: createDepartment
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateDepartmentRequest'
      responses:
        '201':
          description: Created department
          schema:
            $ref: '#/definitions/Department'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  /departments/tree:
    get:
      tags:
        - Departments
      summary: Get department tree
      description: |
        Returns all departments as a hierarchical tree structure.
        Each node contains the department and its children recursively.
      operationId: getDepartmentTree
      responses:
        '200':
          description: Department tree structure
          schema:
            type: array
            items:
              $ref: '#/definitions/DepartmentNode'
        '401':
          $ref: '#/responses/Unauthorized'
  '/departments/{id}':
    get:
      tags:
        - Departments
      summary: Get department by ID
      operationId: getDepartment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Department details
          schema:
            $ref: '#/definitions/Department'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Departments
      summary: Update department
      operationId: updateDepartment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateDepartmentRequest'
      responses:
        '200':
          description: Updated department
          schema:
            $ref: '#/definitions/Department'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Departments
      summary: Delete department
      operationId: deleteDepartment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Department deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /locations:
    get:
      tags:
        - Locations
      summary: List locations
      description: |
        Returns work locations (offices, sites, remote). Locations can have
        time zones and are used for employee assignments and terminal placement.
      operationId: listLocations
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of locations
          schema:
            $ref: '#/definitions/LocationList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Locations
      summary: Create location
      operationId: createLocation
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateLocationRequest'
      responses:
        '201':
          description: Created location
          schema:
            $ref: '#/definitions/Location'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/locations/{id}':
    get:
      tags:
        - Locations
      summary: Get location by ID
      operationId: getLocation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Location details
          schema:
            $ref: '#/definitions/Location'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Locations
      summary: Update location
      operationId: updateLocation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateLocationRequest'
      responses:
        '200':
          description: Updated location
          schema:
            $ref: '#/definitions/Location'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Locations
      summary: Delete location
      operationId: deleteLocation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Location deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /cost-centers:
    get:
      tags:
        - Cost Centers
      summary: List cost centers
      description: |
        Returns all cost centers for the tenant. Cost centers are used to
        allocate employee time and costs to different budgets or projects.
        Use for dropdown selections in employee forms or time booking.
      operationId: listCostCenters
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of cost centers
          schema:
            $ref: '#/definitions/CostCenterList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Cost Centers
      summary: Create cost center
      description: |
        Creates a new cost center with a unique code. The code is used for
        integration with accounting/ERP systems.
      operationId: createCostCenter
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateCostCenterRequest'
      responses:
        '201':
          description: Created cost center
          schema:
            $ref: '#/definitions/CostCenter'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/cost-centers/{id}':
    get:
      tags:
        - Cost Centers
      summary: Get cost center by ID
      description: Retrieves cost center details for viewing or editing.
      operationId: getCostCenter
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Cost center details
          schema:
            $ref: '#/definitions/CostCenter'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Cost Centers
      summary: Update cost center
      description: |
        Updates cost center properties. Deactivate instead of deleting to
        preserve historical data while hiding from new assignments.
      operationId: updateCostCenter
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateCostCenterRequest'
      responses:
        '200':
          description: Updated cost center
          schema:
            $ref: '#/definitions/CostCenter'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Cost Centers
      summary: Delete cost center
      description: |
        Permanently removes a cost center. May fail if employees are still
        assigned. Consider deactivating instead.
      operationId: deleteCostCenter
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Cost center deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /employment-types:
    get:
      tags:
        - Employment Types
      summary: List employment types
      description: |
        Returns employment types (e.g., full-time, part-time, contractor).
        Each type defines default weekly hours and affects time calculations.
        Use for employee setup dropdowns.
      operationId: listEmploymentTypes
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of employment types
          schema:
            $ref: '#/definitions/EmploymentTypeList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Employment Types
      summary: Create employment type
      description: |
        Creates a new employment type with default weekly hours. The code
        must be unique within the tenant.
      operationId: createEmploymentType
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmploymentTypeRequest'
      responses:
        '201':
          description: Created employment type
          schema:
            $ref: '#/definitions/EmploymentType'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/employment-types/{id}':
    get:
      tags:
        - Employment Types
      summary: Get employment type by ID
      description: Retrieves employment type details for viewing or editing.
      operationId: getEmploymentType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Employment type details
          schema:
            $ref: '#/definitions/EmploymentType'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Employment Types
      summary: Update employment type
      description: |
        Updates employment type properties like name, weekly hours, or active
        status. Changes don't retroactively affect existing employees.
      operationId: updateEmploymentType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateEmploymentTypeRequest'
      responses:
        '200':
          description: Updated employment type
          schema:
            $ref: '#/definitions/EmploymentType'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Employment Types
      summary: Delete employment type
      description: |
        Permanently removes an employment type. May fail if employees are
        assigned. Consider deactivating instead.
      operationId: deleteEmploymentType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Employment type deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /user-groups:
    get:
      tags:
        - User Groups
      summary: List user groups
      description: |
        Returns all user groups for the current tenant. User groups define roles
        and permissions for access control. Use this to populate role selection
        dropdowns or display available roles in admin interfaces.
      operationId: listUserGroups
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of user groups
          schema:
            $ref: '#/definitions/UserGroupList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - User Groups
      summary: Create user group
      description: |
        Creates a new user group (role) for the tenant. Groups are used for
        role-based access control - assign users to groups instead of managing
        permissions individually. Group names must be unique within a tenant.
      operationId: createUserGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateUserGroupRequest'
      responses:
        '201':
          description: Created user group
          schema:
            $ref: '#/definitions/UserGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/user-groups/{id}':
    get:
      tags:
        - User Groups
      summary: Get user group by ID
      description: |
        Retrieves a single user group with its full details including permissions.
        Use this to display group details in an edit form or to check a group's
        permissions before assignment.
      operationId: getUserGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: User group details
          schema:
            $ref: '#/definitions/UserGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - User Groups
      summary: Update user group
      description: |
        Updates an existing user group's name, description, or permissions.
        Changes apply immediately to all users in the group. System groups
        (is_system=true) cannot be modified and will return 403 Forbidden.
      operationId: updateUserGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateUserGroupRequest'
      responses:
        '200':
          description: Updated user group
          schema:
            $ref: '#/definitions/UserGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot modify system groups
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - User Groups
      summary: Delete user group
      description: |
        Permanently deletes a user group. Users in this group will lose the
        associated permissions. System groups (is_system=true) cannot be deleted
        and will return 403 Forbidden. Consider deactivating instead of deleting
        if you need to preserve audit history.
      operationId: deleteUserGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: User group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot delete system groups
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
  /permissions:
    get:
      tags:
        - User Groups
      summary: List all permissions
      description: |
        Returns all available permissions in the system. Use this to populate
        a permission picker when creating or editing user groups. Permissions
        are defined by resource (e.g., "employees") and action (e.g., "read",
        "write", "delete", "manage").
      operationId: listPermissions
      responses:
        '200':
          description: List of permissions
          schema:
            type: object
            required:
              - data
            properties:
              data:
                type: array
                items:
                  $ref: '#/definitions/Permission'
        '401':
          $ref: '#/responses/Unauthorized'
  /day-plans:
    get:
      tags:
        - Day Plans
      summary: List day plans
      description: |
        Returns day plans defining work hours for a single day. Day plans specify
        start/end times, breaks, and bonuses. They're combined into week plans for
        employee assignment. Filter by fixed vs flextime type.
      operationId: listDayPlans
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
        - name: plan_type
          in: query
          type: string
          enum:
            - fixed
            - flextime
          description: Filter by plan type
      responses:
        '200':
          description: List of day plans
          schema:
            $ref: '#/definitions/DayPlanList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Day Plans
      summary: Create day plan
      operationId: createDayPlan
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateDayPlanRequest'
      responses:
        '201':
          description: Created day plan
          schema:
            $ref: '#/definitions/DayPlan'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/day-plans/{id}':
    get:
      tags:
        - Day Plans
      summary: Get day plan by ID
      description: Returns day plan with breaks and bonuses
      operationId: getDayPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Day plan details
          schema:
            $ref: '#/definitions/DayPlan'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Day Plans
      summary: Update day plan
      operationId: updateDayPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateDayPlanRequest'
      responses:
        '200':
          description: Updated day plan
          schema:
            $ref: '#/definitions/DayPlan'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Day Plans
      summary: Delete day plan
      operationId: deleteDayPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Day plan deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/day-plans/{id}/copy':
    post:
      tags:
        - Day Plans
      summary: Copy day plan
      description: Creates a copy of the day plan with new code and name
      operationId: copyDayPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CopyDayPlanRequest'
      responses:
        '201':
          description: Copied day plan
          schema:
            $ref: '#/definitions/DayPlan'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: New code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/day-plans/{id}/breaks':
    post:
      tags:
        - Day Plans
      summary: Add break to day plan
      operationId: createDayPlanBreak
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateDayPlanBreakRequest'
      responses:
        '201':
          description: Created break
          schema:
            $ref: '#/definitions/DayPlanBreak'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/day-plans/{id}/breaks/{breakId}':
    delete:
      tags:
        - Day Plans
      summary: Delete break from day plan
      operationId: deleteDayPlanBreak
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: breakId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Break deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/day-plans/{id}/bonuses':
    post:
      tags:
        - Day Plans
      summary: Add bonus to day plan
      operationId: createDayPlanBonus
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateDayPlanBonusRequest'
      responses:
        '201':
          description: Created bonus
          schema:
            $ref: '#/definitions/DayPlanBonus'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/day-plans/{id}/bonuses/{bonusId}':
    delete:
      tags:
        - Day Plans
      summary: Delete bonus from day plan
      operationId: deleteDayPlanBonus
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: bonusId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Bonus deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /week-plans:
    get:
      tags:
        - Week Plans
      summary: List week plans
      description: |
        Returns week plans that combine day plans for a full week. Week plans are
        assigned to employees to define their regular schedule. Each day can have
        a different day plan or be marked as off.
      operationId: listWeekPlans
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of week plans
          schema:
            $ref: '#/definitions/WeekPlanList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Week Plans
      summary: Create week plan
      operationId: createWeekPlan
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateWeekPlanRequest'
      responses:
        '201':
          description: Created week plan
          schema:
            $ref: '#/definitions/WeekPlan'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/week-plans/{id}':
    get:
      tags:
        - Week Plans
      summary: Get week plan by ID
      operationId: getWeekPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Week plan details
          schema:
            $ref: '#/definitions/WeekPlan'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Week Plans
      summary: Update week plan
      operationId: updateWeekPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateWeekPlanRequest'
      responses:
        '200':
          description: Updated week plan
          schema:
            $ref: '#/definitions/WeekPlan'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Week Plans
      summary: Delete week plan
      operationId: deleteWeekPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Week plan deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /tariffs:
    get:
      tags:
        - Tariffs
      summary: List tariffs
      description: |
        Returns tariffs (pay rates) for time calculations. Tariffs define hourly
        rates, overtime multipliers, and break deduction rules. Assign tariffs
        to employees or employment types.
      operationId: listTariffs
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of tariffs
          schema:
            $ref: '#/definitions/TariffList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Tariffs
      summary: Create tariff
      operationId: createTariff
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateTariffRequest'
      responses:
        '201':
          description: Created tariff
          schema:
            $ref: '#/definitions/Tariff'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/tariffs/{id}':
    get:
      tags:
        - Tariffs
      summary: Get tariff by ID
      description: Returns tariff with breaks
      operationId: getTariff
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Tariff details
          schema:
            $ref: '#/definitions/Tariff'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Tariffs
      summary: Update tariff
      operationId: updateTariff
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateTariffRequest'
      responses:
        '200':
          description: Updated tariff
          schema:
            $ref: '#/definitions/Tariff'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Tariffs
      summary: Delete tariff
      operationId: deleteTariff
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Tariff deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/tariffs/{id}/breaks':
    post:
      tags:
        - Tariffs
      summary: Add break to tariff
      operationId: createTariffBreak
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - break_type
              - duration
            properties:
              break_type:
                type: string
                enum:
                  - fixed
                  - variable
                  - minimum
              after_work_minutes:
                type: integer
              duration:
                type: integer
              is_paid:
                type: boolean
                default: false
      responses:
        '201':
          description: Created break
          schema:
            $ref: '#/definitions/TariffBreak'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/tariffs/{id}/breaks/{breakId}':
    delete:
      tags:
        - Tariffs
      summary: Delete break from tariff
      operationId: deleteTariffBreak
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: breakId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Break deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /booking-types:
    get:
      tags:
        - Booking Types
      summary: List booking types
      description: |
        Returns booking types defining clock-in/out behavior. Types specify
        direction (in/out), terminal display, and time calculation rules.
        System types include standard clock-in/out and break.
      operationId: listBookingTypes
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
        - name: direction
          in: query
          type: string
          enum:
            - in
            - out
          description: Filter by direction
      responses:
        '200':
          description: List of booking types
          schema:
            $ref: '#/definitions/BookingTypeList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Booking Types
      summary: Create booking type
      operationId: createBookingType
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateBookingTypeRequest'
      responses:
        '201':
          description: Created booking type
          schema:
            $ref: '#/definitions/BookingType'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/booking-types/{id}':
    get:
      tags:
        - Booking Types
      summary: Get booking type by ID
      operationId: getBookingType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Booking type details
          schema:
            $ref: '#/definitions/BookingType'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Booking Types
      summary: Update booking type
      operationId: updateBookingType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateBookingTypeRequest'
      responses:
        '200':
          description: Updated booking type
          schema:
            $ref: '#/definitions/BookingType'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot modify system booking types
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Booking Types
      summary: Delete booking type
      operationId: deleteBookingType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Booking type deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot delete system booking types
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
  /bookings:
    get:
      tags:
        - Bookings
      summary: List bookings
      description: |
        Returns time bookings (clock-in/out events). Bookings are paired to
        calculate worked hours. Filter by employee and date range for
        timesheet views or payroll processing.
      operationId: listBookings
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: from
          in: query
          type: string
          format: date
          description: Start date filter (YYYY-MM-DD)
        - name: to
          in: query
          type: string
          format: date
          description: End date filter (YYYY-MM-DD)
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 100
        - name: page
          in: query
          type: integer
          default: 1
          minimum: 1
      responses:
        '200':
          description: List of bookings
          schema:
            $ref: '#/definitions/BookingList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Bookings
      summary: Create booking
      operationId: createBooking
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateBookingRequest'
      responses:
        '201':
          description: Created booking
          schema:
            $ref: '#/definitions/Booking'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Month is closed
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/bookings/{id}':
    get:
      tags:
        - Bookings
      summary: Get booking by ID
      operationId: getBooking
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Booking details
          schema:
            $ref: '#/definitions/Booking'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Bookings
      summary: Update booking
      operationId: updateBooking
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateBookingRequest'
      responses:
        '200':
          description: Updated booking
          schema:
            $ref: '#/definitions/Booking'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Month is closed
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Bookings
      summary: Delete booking
      operationId: deleteBooking
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Booking deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Month is closed
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
  '/bookings/{id}/logs':
    get:
      tags:
        - Bookings
      summary: Get booking audit logs
      description: |
        Returns audit trail for a specific booking. Shows all create, update,
        and delete operations with before/after values, user identity, and timestamps.
      operationId: getBookingLogs
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Booking ID
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
      responses:
        '200':
          description: Audit logs for this booking
          schema:
            $ref: '#/definitions/AuditLogList'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /daily-values:
    get:
      tags:
        - Daily Values
      summary: List daily values
      description: |
        Returns calculated daily values (worked hours, overtime, etc.) per employee
        per day. Daily values are computed from bookings and absences. Filter by
        employee, date range, or error status for timesheet review.
      operationId: listDailyValues
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: from
          in: query
          type: string
          format: date
          description: Start date filter (YYYY-MM-DD)
        - name: to
          in: query
          type: string
          format: date
          description: End date filter (YYYY-MM-DD)
        - name: status
          in: query
          type: string
          enum:
            - pending
            - calculated
            - error
            - approved
          description: Filter by status
        - name: has_errors
          in: query
          type: boolean
          description: Filter by error status
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
      responses:
        '200':
          description: List of daily values
          schema:
            $ref: '#/definitions/DailyValueList'
        '401':
          $ref: '#/responses/Unauthorized'
  '/daily-values/{id}':
    get:
      tags:
        - Daily Values
      summary: Get daily value by ID
      operationId: getDailyValue
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Daily value details
          schema:
            $ref: '#/definitions/DailyValue'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/daily-values/{id}/approve':
    post:
      tags:
        - Daily Values
      summary: Approve daily value
      description: Marks the daily value as approved
      operationId: approveDailyValue
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Approved daily value
          schema:
            $ref: '#/definitions/DailyValue'
        '400':
          description: Cannot approve (has errors)
          schema:
            $ref: '#/definitions/ProblemDetails'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /daily-values/recalculate:
    post:
      tags:
        - Daily Values
      summary: Recalculate daily values
      description: Trigger recalculation for a date range
      operationId: recalculateDailyValues
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - from
              - to
            properties:
              employee_id:
                type: string
                format: uuid
                description: Optional employee ID (all employees if not specified)
              from:
                type: string
                format: date
              to:
                type: string
                format: date
      responses:
        '202':
          description: Recalculation started
          schema:
            type: object
            properties:
              message:
                type: string
                example: Recalculation started
              affected_days:
                type: integer
                example: 31
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /holidays:
    get:
      tags:
        - Holidays
      summary: List holidays
      description: |
        Returns public holidays for the tenant. Holidays affect time calculations -
        employees may have reduced hours or days off. Filter by year or date range
        for calendar views or payroll processing.
      operationId: listHolidays
      parameters:
        - name: year
          in: query
          type: integer
          description: 'Filter by year (e.g., 2024)'
        - name: from
          in: query
          type: string
          format: date
          description: Start date for range filter (inclusive)
        - name: to
          in: query
          type: string
          format: date
          description: End date for range filter (inclusive)
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Optional department filter (includes tenant-wide holidays)
      responses:
        '200':
          description: List of holidays
          schema:
            type: array
            items:
              $ref: '#/definitions/Holiday'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Holidays
      summary: Create holiday
      description: |
        Creates a new holiday with category 1/2/3 (full, half, custom).
        Optionally restrict to specific departments. Duplicate dates for
        the same tenant are not allowed.
      operationId: createHoliday
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateHolidayRequest'
      responses:
        '201':
          description: Created holiday
          schema:
            $ref: '#/definitions/Holiday'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/holidays/{id}':
    get:
      tags:
        - Holidays
      summary: Get holiday by ID
      description: Retrieves a single holiday's details for viewing or editing.
      operationId: getHoliday
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Holiday details
          schema:
            $ref: '#/definitions/Holiday'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Holidays
      summary: Update holiday
      description: |
        Updates a holiday's name, date, or category. Changes may trigger
        recalculation of affected employees' time records.
      operationId: updateHoliday
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateHolidayRequest'
      responses:
        '200':
          description: Updated holiday
          schema:
            $ref: '#/definitions/Holiday'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Holidays
      summary: Delete holiday
      description: |
        Removes a holiday from the calendar. Time records for affected dates
        may need recalculation.
      operationId: deleteHoliday
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Holiday deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /absence-types:
    get:
      tags:
        - Absence Types
      summary: List absence types
      description: |
        Returns absence types (vacation, sick, personal, etc.). Each type defines
        how time is deducted, whether approval is required, and which account
        is affected. System types are built-in.
      operationId: listAbsenceTypes
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
        - name: category
          in: query
          type: string
          enum:
            - vacation
            - sick
            - personal
            - unpaid
            - holiday
            - other
          description: Filter by category
      responses:
        '200':
          description: List of absence types
          schema:
            $ref: '#/definitions/AbsenceTypeList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Absence Types
      summary: Create absence type
      operationId: createAbsenceType
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateAbsenceTypeRequest'
      responses:
        '201':
          description: Created absence type
          schema:
            $ref: '#/definitions/AbsenceType'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/absence-types/{id}':
    get:
      tags:
        - Absence Types
      summary: Get absence type by ID
      operationId: getAbsenceType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Absence type details
          schema:
            $ref: '#/definitions/AbsenceType'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Absence Types
      summary: Update absence type
      operationId: updateAbsenceType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateAbsenceTypeRequest'
      responses:
        '200':
          description: Updated absence type
          schema:
            $ref: '#/definitions/AbsenceType'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot modify system absence types
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Absence Types
      summary: Delete absence type
      operationId: deleteAbsenceType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Absence type deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot delete system absence types
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
  /absences:
    get:
      tags:
        - Absences
      summary: List absences
      description: |
        Returns employee absences (vacation, sick leave, etc.). Absences go
        through an approval workflow. Filter by employee, type, date range,
        or status for leave management.
      operationId: listAbsences
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: absence_type_id
          in: query
          type: string
          format: uuid
          description: Filter by absence type
        - name: from
          in: query
          type: string
          format: date
          description: Start date filter
        - name: to
          in: query
          type: string
          format: date
          description: End date filter
        - name: status
          in: query
          type: string
          enum:
            - pending
            - approved
            - rejected
            - cancelled
          description: Filter by status
      responses:
        '200':
          description: List of absences
          schema:
            $ref: '#/definitions/AbsenceList'
        '401':
          $ref: '#/responses/Unauthorized'
  '/absences/{id}':
    get:
      tags:
        - Absences
      summary: Get absence by ID
      operationId: getAbsence
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Absence details
          schema:
            $ref: '#/definitions/Absence'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Absences
      summary: Update absence
      operationId: updateAbsence
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateAbsenceRequest'
      responses:
        '200':
          description: Updated absence
          schema:
            $ref: '#/definitions/Absence'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Absences
      summary: Delete absence
      operationId: deleteAbsence
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Absence deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/absences/{id}/approve':
    post:
      tags:
        - Absences
      summary: Approve absence
      operationId: approveAbsence
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Approved absence
          schema:
            $ref: '#/definitions/Absence'
        '400':
          description: Cannot approve (not pending)
          schema:
            $ref: '#/definitions/ProblemDetails'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/absences/{id}/reject':
    post:
      tags:
        - Absences
      summary: Reject absence
      operationId: rejectAbsence
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          schema:
            type: object
            properties:
              reason:
                type: string
                description: Rejection reason
      responses:
        '200':
          description: Rejected absence
          schema:
            $ref: '#/definitions/Absence'
        '400':
          description: Cannot reject (not pending)
          schema:
            $ref: '#/definitions/ProblemDetails'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /vacation-balances:
    get:
      tags:
        - Vacation
      summary: List vacation balances
      description: |
        Returns vacation entitlements and usage per employee per year. Tracks
        total days, used days, remaining balance, and carryover. Use for leave
        planning and balance reports.
      operationId: listVacationBalances
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: year
          in: query
          type: integer
          description: Filter by year
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
      responses:
        '200':
          description: List of vacation balances
          schema:
            $ref: '#/definitions/VacationBalanceList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Vacation
      summary: Create vacation balance
      operationId: createVacationBalance
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateVacationBalanceRequest'
      responses:
        '201':
          description: Created vacation balance
          schema:
            $ref: '#/definitions/VacationBalance'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Balance for employee/year already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/vacation-balances/{id}':
    get:
      tags:
        - Vacation
      summary: Get vacation balance by ID
      operationId: getVacationBalance
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Vacation balance details
          schema:
            $ref: '#/definitions/VacationBalance'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Vacation
      summary: Update vacation balance
      operationId: updateVacationBalance
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateVacationBalanceRequest'
      responses:
        '200':
          description: Updated vacation balance
          schema:
            $ref: '#/definitions/VacationBalance'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /vacation-balances/initialize:
    post:
      tags:
        - Vacation
      summary: Initialize vacation balances for year
      description: Creates vacation balances for all active employees for a year
      operationId: initializeVacationBalances
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - year
            properties:
              year:
                type: integer
              carryover:
                type: boolean
                description: Whether to carry over from previous year
                default: true
      responses:
        '201':
          description: Vacation balances initialized
          schema:
            type: object
            properties:
              message:
                type: string
              created_count:
                type: integer
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /monthly-values:
    get:
      tags:
        - Monthly Values
      summary: List monthly values
      description: |
        Returns monthly aggregates of daily values per employee. Monthly values
        track total hours, overtime, account balances, and payroll data. Use for
        month-end closing and payroll export preparation.
      operationId: listMonthlyValues
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: year
          in: query
          type: integer
          description: Filter by year
        - name: month
          in: query
          type: integer
          minimum: 1
          maximum: 12
          description: Filter by month
        - name: status
          in: query
          type: string
          enum:
            - open
            - calculated
            - closed
            - exported
          description: Filter by status
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
      responses:
        '200':
          description: List of monthly values
          schema:
            $ref: '#/definitions/MonthlyValueList'
        '401':
          $ref: '#/responses/Unauthorized'
  '/monthly-values/{id}':
    get:
      tags:
        - Monthly Values
      summary: Get monthly value by ID
      operationId: getMonthlyValue
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Monthly value details
          schema:
            $ref: '#/definitions/MonthlyValue'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/monthly-values/{id}/close':
    post:
      tags:
        - Monthly Values
      summary: Close month
      description: 'Closes the month for the employee, preventing further modifications'
      operationId: closeMonth
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          schema:
            type: object
            properties:
              recalculate:
                type: boolean
                description: Recalculate all daily values before closing
                default: true
              notes:
                type: string
      responses:
        '200':
          description: Month closed
          schema:
            $ref: '#/definitions/MonthlyValue'
        '400':
          description: Cannot close (has errors or already closed)
          schema:
            $ref: '#/definitions/ProblemDetails'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/monthly-values/{id}/reopen':
    post:
      tags:
        - Monthly Values
      summary: Reopen month
      description: Reopens a closed month for corrections
      operationId: reopenMonth
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - reason
            properties:
              reason:
                type: string
                minLength: 10
                description: Reason for reopening
      responses:
        '200':
          description: Month reopened
          schema:
            $ref: '#/definitions/MonthlyValue'
        '400':
          description: Cannot reopen (not closed or already exported)
          schema:
            $ref: '#/definitions/ProblemDetails'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /monthly-values/close-batch:
    post:
      tags:
        - Monthly Values
      summary: Close month for multiple employees
      description: Batch close month for specified employees or all employees
      operationId: closeMonthBatch
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - year
              - month
            properties:
              year:
                type: integer
              month:
                type: integer
                minimum: 1
                maximum: 12
              employee_ids:
                type: array
                items:
                  type: string
                  format: uuid
                description: Optional list of employee IDs (all if not specified)
              department_id:
                type: string
                format: uuid
                description: Close for all employees in department
              recalculate:
                type: boolean
                default: true
      responses:
        '200':
          description: Batch close result
          schema:
            type: object
            properties:
              closed_count:
                type: integer
              skipped_count:
                type: integer
              error_count:
                type: integer
              errors:
                type: array
                items:
                  type: object
                  properties:
                    employee_id:
                      type: string
                      format: uuid
                    reason:
                      type: string
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /monthly-values/recalculate:
    post:
      tags:
        - Monthly Values
      summary: Recalculate monthly values
      description: Trigger recalculation for a month
      operationId: recalculateMonthlyValues
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - year
              - month
            properties:
              year:
                type: integer
              month:
                type: integer
                minimum: 1
                maximum: 12
              employee_id:
                type: string
                format: uuid
                description: Optional employee ID (all employees if not specified)
      responses:
        '202':
          description: Recalculation started
          schema:
            type: object
            properties:
              message:
                type: string
              affected_employees:
                type: integer
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/employees/{id}/months/{year}':
    get:
      tags:
        - Monthly Values
      summary: Get year overview
      description: Returns all monthly summaries for an employee in a given year
      operationId: getYearOverview
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: year
          in: path
          required: true
          type: integer
          description: Calendar year
      responses:
        '200':
          description: Year overview with monthly summaries
          schema:
            $ref: '#/definitions/YearOverviewResponse'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/months/{year}/{month}':
    get:
      tags:
        - Monthly Values
      summary: Get month summary
      description: |
        Returns the monthly summary for an employee including time totals,
        flextime balance, absence summary, closing status, and warnings.
        The response includes flextime tracking fields showing the evaluation
        chain: flextime_start -> flextime_change -> flextime_end -> flextime_carryover.
      operationId: getMonthSummary
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: year
          in: path
          required: true
          type: integer
          description: Calendar year
        - name: month
          in: path
          required: true
          type: integer
          minimum: 1
          maximum: 12
          description: Calendar month (1-12)
      responses:
        '200':
          description: Monthly summary
          schema:
            $ref: '#/definitions/MonthSummaryResponse'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/months/{year}/{month}/days':
    get:
      tags:
        - Monthly Values
      summary: Get daily breakdown
      description: Returns the daily values for a specific month
      operationId: getDailyBreakdown
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: year
          in: path
          required: true
          type: integer
          description: Calendar year
        - name: month
          in: path
          required: true
          type: integer
          minimum: 1
          maximum: 12
          description: Calendar month (1-12)
      responses:
        '200':
          description: Daily breakdown for the month
          schema:
            $ref: '#/definitions/DailyBreakdownResponse'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/months/{year}/{month}/close':
    post:
      tags:
        - Monthly Values
      summary: Close month
      description: |
        Closes the month, preventing further modifications and recalculations.
        Requires the month to have been calculated (monthly value exists).
        Records closed_at timestamp and closed_by user for audit trail.
      operationId: closeEmployeeMonth
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: year
          in: path
          required: true
          type: integer
          description: Calendar year
        - name: month
          in: path
          required: true
          type: integer
          minimum: 1
          maximum: 12
          description: Calendar month (1-12)
      responses:
        '200':
          description: 'Month closed successfully, returns updated summary'
          schema:
            $ref: '#/definitions/MonthSummaryResponse'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Month is already closed
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/months/{year}/{month}/reopen':
    post:
      tags:
        - Monthly Values
      summary: Reopen month
      description: |
        Reopens a closed month, allowing modifications and recalculations.
        Records reopened_at timestamp and reopened_by user for audit trail.
      operationId: reopenEmployeeMonth
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: year
          in: path
          required: true
          type: integer
          description: Calendar year
        - name: month
          in: path
          required: true
          type: integer
          minimum: 1
          maximum: 12
          description: Calendar month (1-12)
      responses:
        '200':
          description: 'Month reopened successfully, returns updated summary'
          schema:
            $ref: '#/definitions/MonthSummaryResponse'
        '400':
          description: Month is not closed
          schema:
            $ref: '#/definitions/ProblemDetails'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/months/{year}/{month}/recalculate':
    post:
      tags:
        - Monthly Values
      summary: Recalculate month
      description: |
        Recalculates the monthly aggregation from daily values.
        Applies credit type rules from the employee's tariff configuration:
        - no_evaluation: Direct 1:1 transfer of overtime/undertime
        - complete_carryover: Full transfer with monthly cap and annual balance limits
        - after_threshold: Credit only overtime exceeding the configured threshold
        - no_carryover: Reset balance to zero

        Monthly cap (max_flextime_per_month), positive cap (upper_limit_annual),
        and negative cap (lower_limit_annual) are applied in sequence.
        Returns error if the month is closed.
      operationId: recalculateEmployeeMonth
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: year
          in: path
          required: true
          type: integer
          description: Calendar year
        - name: month
          in: path
          required: true
          type: integer
          minimum: 1
          maximum: 12
          description: Calendar month (1-12)
      responses:
        '200':
          description: 'Month recalculated successfully, returns updated summary'
          schema:
            $ref: '#/definitions/MonthSummaryResponse'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: 'Month is closed, recalculation blocked'
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
  /corrections:
    get:
      tags:
        - Corrections
      summary: List corrections
      description: |
        Returns manual corrections to time records or account balances. Corrections
        go through an approval workflow. Use when automatic calculations need
        adjustment (forgotten clock-in, balance carryover, etc.).
      operationId: listCorrections
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: from
          in: query
          type: string
          format: date
          description: Start date filter
        - name: to
          in: query
          type: string
          format: date
          description: End date filter
        - name: correction_type
          in: query
          type: string
          enum:
            - time_adjustment
            - balance_adjustment
            - vacation_adjustment
            - account_adjustment
          description: Filter by correction type
        - name: status
          in: query
          type: string
          enum:
            - pending
            - approved
            - rejected
          description: Filter by status
      responses:
        '200':
          description: List of corrections
          schema:
            $ref: '#/definitions/CorrectionList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Corrections
      summary: Create correction
      operationId: createCorrection
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateCorrectionRequest'
      responses:
        '201':
          description: Created correction
          schema:
            $ref: '#/definitions/Correction'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Month is closed
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/corrections/{id}':
    get:
      tags:
        - Corrections
      summary: Get correction by ID
      operationId: getCorrection
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Correction details
          schema:
            $ref: '#/definitions/Correction'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Corrections
      summary: Update correction
      operationId: updateCorrection
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              value_minutes:
                type: integer
              reason:
                type: string
                minLength: 5
                maxLength: 500
              status:
                type: string
                enum:
                  - pending
                  - approved
                  - rejected
      responses:
        '200':
          description: Updated correction
          schema:
            $ref: '#/definitions/Correction'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Corrections
      summary: Delete correction
      operationId: deleteCorrection
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Correction deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot delete approved corrections
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
  '/corrections/{id}/approve':
    post:
      tags:
        - Corrections
      summary: Approve correction
      operationId: approveCorrection
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Approved correction
          schema:
            $ref: '#/definitions/Correction'
        '400':
          description: Cannot approve (not pending)
          schema:
            $ref: '#/definitions/ProblemDetails'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/corrections/{id}/reject':
    post:
      tags:
        - Corrections
      summary: Reject correction
      operationId: rejectCorrection
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Rejected correction
          schema:
            $ref: '#/definitions/Correction'
        '400':
          description: Cannot reject (not pending)
          schema:
            $ref: '#/definitions/ProblemDetails'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /accounts:
    get:
      tags:
        - Accounts
      summary: List accounts
      description: |
        Returns time accounts (overtime, vacation, flextime, etc.). Accounts
        track balances that accumulate over time. System accounts are built-in
        and cannot be deleted. Filter by type or payroll relevance.
      operationId: listAccounts
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
        - name: account_type
          in: query
          type: string
          enum:
            - bonus
            - day
            - month
          description: Filter by account type
        - name: include_system
          in: query
          type: boolean
          description: Include system accounts in results
        - name: payroll_relevant
          in: query
          type: boolean
          description: Filter by payroll relevance
      responses:
        '200':
          description: List of accounts
          schema:
            $ref: '#/definitions/AccountList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Accounts
      summary: Create account
      operationId: createAccount
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateAccountRequest'
      responses:
        '201':
          description: Created account
          schema:
            $ref: '#/definitions/Account'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/accounts/{id}':
    get:
      tags:
        - Accounts
      summary: Get account by ID
      operationId: getAccount
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Account details
          schema:
            $ref: '#/definitions/Account'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Accounts
      summary: Update account
      operationId: updateAccount
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateAccountRequest'
      responses:
        '200':
          description: Updated account
          schema:
            $ref: '#/definitions/Account'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot modify system accounts
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Accounts
      summary: Delete account
      operationId: deleteAccount
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Account deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          description: Cannot delete system accounts
          schema:
            $ref: '#/definitions/ProblemDetails'
        '404':
          $ref: '#/responses/NotFound'
  '/accounts/{id}/usage':
    get:
      tags:
        - Accounts
      summary: Get account usage
      operationId: getAccountUsage
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Account usage details
          schema:
            $ref: '#/definitions/AccountUsage'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /account-values:
    get:
      tags:
        - Accounts
      summary: List account values
      operationId: listAccountValues
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: account_id
          in: query
          type: string
          format: uuid
          description: Filter by account
        - name: from
          in: query
          type: string
          format: date
          description: Start date filter
        - name: to
          in: query
          type: string
          format: date
          description: End date filter
      responses:
        '200':
          description: List of account values
          schema:
            $ref: '#/definitions/AccountValueList'
        '401':
          $ref: '#/responses/Unauthorized'
  /audit-logs:
    get:
      tags:
        - Audit Logs
      summary: List audit logs
      description: |
        Returns audit trail of all changes in the system. Every create, update,
        delete, and approval action is logged with user, timestamp, and details.
        Required for compliance and debugging. Admin access only.
      operationId: listAuditLogs
      parameters:
        - name: user_id
          in: query
          type: string
          format: uuid
          description: Filter by user
        - name: entity_type
          in: query
          type: string
          description: 'Filter by entity type (e.g., booking, employee)'
        - name: entity_id
          in: query
          type: string
          format: uuid
          description: Filter by entity ID
        - name: action
          in: query
          type: string
          enum:
            - create
            - update
            - delete
            - approve
            - reject
            - close
            - reopen
            - export
            - import
            - login
            - logout
          description: Filter by action
        - name: from
          in: query
          type: string
          format: date-time
          description: Start datetime filter
        - name: to
          in: query
          type: string
          format: date-time
          description: End datetime filter
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
      responses:
        '200':
          description: List of audit logs
          schema:
            $ref: '#/definitions/AuditLogList'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  '/audit-logs/{id}':
    get:
      tags:
        - Audit Logs
      summary: Get audit log by ID
      operationId: getAuditLog
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Audit log details
          schema:
            $ref: '#/definitions/AuditLog'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
  /reports:
    get:
      tags:
        - Reports
      summary: List reports
      description: |
        Returns generated reports and their status. Reports are generated
        asynchronously and can be downloaded once complete. Filter by type
        or status to find specific reports.
      operationId: listReports
      parameters:
        - name: report_type
          in: query
          type: string
          enum:
            - daily_overview
            - weekly_overview
            - monthly_overview
            - employee_timesheet
            - department_summary
            - absence_report
            - vacation_report
            - overtime_report
            - account_balances
            - custom
          description: Filter by report type
        - name: status
          in: query
          type: string
          enum:
            - pending
            - generating
            - completed
            - failed
          description: Filter by status
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
      responses:
        '200':
          description: List of reports
          schema:
            $ref: '#/definitions/ReportList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Reports
      summary: Generate report
      description: Starts report generation (async)
      operationId: generateReport
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/GenerateReportRequest'
      responses:
        '202':
          description: Report generation started
          schema:
            $ref: '#/definitions/Report'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/reports/{id}':
    get:
      tags:
        - Reports
      summary: Get report by ID
      operationId: getReport
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Report details
          schema:
            $ref: '#/definitions/Report'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Reports
      summary: Delete report
      operationId: deleteReport
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Report deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/reports/{id}/download':
    get:
      tags:
        - Reports
      summary: Download report file
      operationId: downloadReport
      produces:
        - application/octet-stream
        - application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
        - text/csv
        - application/pdf
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Report file
          schema:
            type: file
          headers:
            Content-Disposition:
              type: string
              description: Attachment filename
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Report not ready (still generating)
          schema:
            $ref: '#/definitions/ProblemDetails'
  /export-interfaces:
    get:
      tags:
        - Export Interfaces
      summary: List export interfaces
      operationId: listExportInterfaces
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter to only active interfaces
      responses:
        '200':
          description: List of export interfaces
          schema:
            $ref: '#/definitions/ExportInterfaceList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Export Interfaces
      summary: Create export interface
      operationId: createExportInterface
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateExportInterfaceRequest'
      responses:
        '201':
          description: Created export interface
          schema:
            $ref: '#/definitions/ExportInterface'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Interface number already exists for this tenant
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/export-interfaces/{id}':
    get:
      tags:
        - Export Interfaces
      summary: Get export interface by ID
      operationId: getExportInterface
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Export interface details
          schema:
            $ref: '#/definitions/ExportInterface'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Export Interfaces
      summary: Update export interface
      operationId: updateExportInterface
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateExportInterfaceRequest'
      responses:
        '200':
          description: Updated export interface
          schema:
            $ref: '#/definitions/ExportInterface'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Export Interfaces
      summary: Delete export interface
      operationId: deleteExportInterface
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Export interface deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Interface has generated exports
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/export-interfaces/{id}/accounts':
    put:
      tags:
        - Export Interfaces
      summary: Set accounts for export interface
      description: Bulk replace all accounts for this interface
      operationId: setExportInterfaceAccounts
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/SetExportInterfaceAccountsRequest'
      responses:
        '200':
          description: Accounts set successfully
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/definitions/ExportInterfaceAccount'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    get:
      tags:
        - Export Interfaces
      summary: List accounts for export interface
      operationId: listExportInterfaceAccounts
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: List of accounts for this interface
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/definitions/ExportInterfaceAccount'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /payroll-exports:
    get:
      tags:
        - Payroll
      summary: List payroll exports
      description: |
        Returns payroll export files for integration with HR/payroll systems.
        Exports are generated asynchronously after month closing. Download in
        various formats (CSV, Excel, XML) for import into external systems.
      operationId: listPayrollExports
      parameters:
        - name: year
          in: query
          type: integer
          description: Filter by year
        - name: month
          in: query
          type: integer
          minimum: 1
          maximum: 12
          description: Filter by month
        - name: status
          in: query
          type: string
          enum:
            - pending
            - generating
            - completed
            - failed
          description: Filter by status
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
      responses:
        '200':
          description: List of payroll exports
          schema:
            $ref: '#/definitions/PayrollExportList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Payroll
      summary: Generate payroll export
      description: Starts payroll export generation (async)
      operationId: generatePayrollExport
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/GeneratePayrollExportRequest'
      responses:
        '202':
          description: Export generation started
          schema:
            $ref: '#/definitions/PayrollExport'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Month not closed for all employees
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/payroll-exports/{id}':
    get:
      tags:
        - Payroll
      summary: Get payroll export by ID
      operationId: getPayrollExport
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Payroll export details
          schema:
            $ref: '#/definitions/PayrollExport'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Payroll
      summary: Delete payroll export
      operationId: deletePayrollExport
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Payroll export deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/payroll-exports/{id}/download':
    get:
      tags:
        - Payroll
      summary: Download payroll export file
      operationId: downloadPayrollExport
      produces:
        - application/octet-stream
        - application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
        - text/csv
        - application/xml
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Payroll export file
          schema:
            type: file
          headers:
            Content-Disposition:
              type: string
              description: Attachment filename
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Export not ready (still generating)
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/payroll-exports/{id}/preview':
    get:
      tags:
        - Payroll
      summary: Preview payroll export data
      description: Returns the export data as JSON for preview
      operationId: previewPayrollExport
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Payroll export preview data
          schema:
            type: object
            properties:
              lines:
                type: array
                items:
                  type: object
                  required:
                    - employee_id
                    - personnel_number
                  properties:
                    employee_id:
                      type: string
                      format: uuid
                    personnel_number:
                      type: string
                    first_name:
                      type: string
                    last_name:
                      type: string
                    department_code:
                      type: string
                    cost_center_code:
                      type: string
                    target_hours:
                      type: number
                      format: decimal
                    worked_hours:
                      type: number
                      format: decimal
                    overtime_hours:
                      type: number
                      format: decimal
                    account_values:
                      type: object
                      description: Account code -> hours
                      additionalProperties:
                        type: number
                        format: decimal
                    vacation_days:
                      type: number
                      format: decimal
                    sick_days:
                      type: number
                      format: decimal
                    other_absence_days:
                      type: number
                      format: decimal
              summary:
                type: object
                properties:
                  employee_count:
                    type: integer
                  total_hours:
                    type: number
                    format: decimal
                  total_overtime:
                    type: number
                    format: decimal
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Export not ready
          schema:
            $ref: '#/definitions/ProblemDetails'
  /teams:
    get:
      tags:
        - Teams
      summary: List teams
      description: |
        Returns teams for collaborative work groups. Teams can span departments
        and have leaders/members with different roles. Use for shift planning
        and group reporting.
      operationId: listTeams
      parameters:
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
        - name: is_active
          in: query
          type: boolean
          description: Filter by active status
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
      responses:
        '200':
          description: List of teams
          schema:
            $ref: '#/definitions/TeamList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Teams
      summary: Create team
      operationId: createTeam
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateTeamRequest'
      responses:
        '201':
          description: Team created
          schema:
            $ref: '#/definitions/Team'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/teams/{id}':
    get:
      tags:
        - Teams
      summary: Get team by ID
      operationId: getTeam
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: include_members
          in: query
          type: boolean
          description: Include team members in response
      responses:
        '200':
          description: Team details
          schema:
            $ref: '#/definitions/Team'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Teams
      summary: Update team
      operationId: updateTeam
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateTeamRequest'
      responses:
        '200':
          description: Team updated
          schema:
            $ref: '#/definitions/Team'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Teams
      summary: Delete team
      operationId: deleteTeam
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Team deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/teams/{id}/members':
    get:
      tags:
        - Teams
      summary: List team members
      operationId: listTeamMembers
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: List of team members
          schema:
            type: object
            properties:
              items:
                type: array
                items:
                  $ref: '#/definitions/TeamMember'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    post:
      tags:
        - Teams
      summary: Add member to team
      operationId: addTeamMember
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/AddTeamMemberRequest'
      responses:
        '201':
          description: Member added
          schema:
            $ref: '#/definitions/TeamMember'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Member already in team
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/teams/{id}/members/{employee_id}':
    put:
      tags:
        - Teams
      summary: Update team member role
      operationId: updateTeamMember
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: employee_id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateTeamMemberRequest'
      responses:
        '200':
          description: Member role updated
          schema:
            $ref: '#/definitions/TeamMember'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Teams
      summary: Remove member from team
      operationId: removeTeamMember
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: employee_id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Member removed
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{employee_id}/teams':
    get:
      tags:
        - Teams
      summary: Get teams for employee
      operationId: getEmployeeTeams
      parameters:
        - name: employee_id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: List of teams the employee belongs to
          schema:
            $ref: '#/definitions/TeamList'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /employee-day-plans:
    get:
      tags:
        - Employee Day Plans
      summary: List employee day plans
      description: |
        Returns daily work schedules assigned to employees. These override the
        default week plan for specific dates. Use for shift changes, temporary
        schedules, or individual adjustments.
      operationId: listEmployeeDayPlans
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: from
          in: query
          type: string
          format: date
          description: Start date filter
        - name: to
          in: query
          type: string
          format: date
          description: End date filter
        - name: source
          in: query
          type: string
          enum:
            - tariff
            - manual
            - holiday
          description: Filter by source
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
      responses:
        '200':
          description: List of employee day plans
          schema:
            $ref: '#/definitions/EmployeeDayPlanList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Employee Day Plans
      summary: Create employee day plan
      operationId: createEmployeeDayPlan
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmployeeDayPlanRequest'
      responses:
        '201':
          description: Employee day plan created
          schema:
            $ref: '#/definitions/EmployeeDayPlan'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Day plan already exists for this employee and date
          schema:
            $ref: '#/definitions/ProblemDetails'
  /employee-day-plans/bulk:
    post:
      tags:
        - Employee Day Plans
      summary: Bulk create/upsert employee day plans
      operationId: bulkCreateEmployeeDayPlans
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/BulkCreateEmployeeDayPlanRequest'
      responses:
        '200':
          description: Employee day plans created/updated
          schema:
            type: object
            properties:
              created:
                type: integer
              updated:
                type: integer
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /employee-day-plans/delete-range:
    post:
      tags:
        - Employee Day Plans
      summary: Delete employee day plans in date range
      operationId: deleteEmployeeDayPlanRange
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/DeleteRangeRequest'
      responses:
        '200':
          description: Employee day plans deleted
          schema:
            type: object
            properties:
              deleted:
                type: integer
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/employee-day-plans/{id}':
    get:
      tags:
        - Employee Day Plans
      summary: Get employee day plan by ID
      operationId: getEmployeeDayPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Employee day plan details
          schema:
            $ref: '#/definitions/EmployeeDayPlan'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Employee Day Plans
      summary: Update employee day plan
      operationId: updateEmployeeDayPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateEmployeeDayPlanRequest'
      responses:
        '200':
          description: Employee day plan updated
          schema:
            $ref: '#/definitions/EmployeeDayPlan'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Employee Day Plans
      summary: Delete employee day plan
      operationId: deleteEmployeeDayPlan
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Employee day plan deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{employee_id}/day-plans':
    get:
      tags:
        - Employee Day Plans
      summary: Get day plans for employee in date range
      operationId: getEmployeeDayPlansForEmployee
      parameters:
        - name: employee_id
          in: path
          required: true
          type: string
          format: uuid
        - name: from
          in: query
          required: true
          type: string
          format: date
          description: Start date
        - name: to
          in: query
          required: true
          type: string
          format: date
          description: End date
      responses:
        '200':
          description: Employee day plans for the date range
          schema:
            $ref: '#/definitions/EmployeeDayPlanList'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{employee_id}/day-plans/{date}':
    get:
      tags:
        - Employee Day Plans
      summary: Get day plan for employee on specific date
      operationId: getEmployeeDayPlanForDate
      parameters:
        - name: employee_id
          in: path
          required: true
          type: string
          format: uuid
        - name: date
          in: path
          required: true
          type: string
          format: date
      responses:
        '200':
          description: Employee day plan for the date
          schema:
            $ref: '#/definitions/EmployeeDayPlan'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Employee Day Plans
      summary: Upsert day plan for employee on specific date
      operationId: upsertEmployeeDayPlanForDate
      parameters:
        - name: employee_id
          in: path
          required: true
          type: string
          format: uuid
        - name: date
          in: path
          required: true
          type: string
          format: date
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateEmployeeDayPlanRequest'
      responses:
        '200':
          description: Employee day plan created/updated
          schema:
            $ref: '#/definitions/EmployeeDayPlan'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /monthly-evaluations:
    get:
      tags:
        - Monthly Evaluations
      summary: List monthly evaluations
      description: |
        Returns evaluation templates for monthly time reports. Templates define
        which accounts, columns, and calculations appear in monthly summaries.
        Set a default template for tenant-wide use.
      operationId: listMonthlyEvaluations
      parameters:
        - name: is_active
          in: query
          type: boolean
          description: Filter by active status
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: cursor
          in: query
          type: string
      responses:
        '200':
          description: List of monthly evaluations
          schema:
            $ref: '#/definitions/MonthlyEvaluationList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Monthly Evaluations
      summary: Create monthly evaluation
      operationId: createMonthlyEvaluation
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateMonthlyEvaluationRequest'
      responses:
        '201':
          description: Monthly evaluation created
          schema:
            $ref: '#/definitions/MonthlyEvaluation'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /monthly-evaluations/default:
    get:
      tags:
        - Monthly Evaluations
      summary: Get default monthly evaluation
      operationId: getDefaultMonthlyEvaluation
      responses:
        '200':
          description: Default monthly evaluation
          schema:
            $ref: '#/definitions/MonthlyEvaluation'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          description: No default evaluation configured
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/monthly-evaluations/{id}':
    get:
      tags:
        - Monthly Evaluations
      summary: Get monthly evaluation by ID
      operationId: getMonthlyEvaluation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Monthly evaluation details
          schema:
            $ref: '#/definitions/MonthlyEvaluation'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    put:
      tags:
        - Monthly Evaluations
      summary: Update monthly evaluation
      operationId: updateMonthlyEvaluation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateMonthlyEvaluationRequest'
      responses:
        '200':
          description: Monthly evaluation updated
          schema:
            $ref: '#/definitions/MonthlyEvaluation'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Monthly Evaluations
      summary: Delete monthly evaluation
      operationId: deleteMonthlyEvaluation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Monthly evaluation deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Cannot delete default evaluation
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/monthly-evaluations/{id}/set-default':
    post:
      tags:
        - Monthly Evaluations
      summary: Set monthly evaluation as default
      operationId: setDefaultMonthlyEvaluation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Monthly evaluation set as default
          schema:
            $ref: '#/definitions/MonthlyEvaluation'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /absence-type-groups:
    get:
      tags:
        - Absence Type Groups
      summary: List absence type groups
      operationId: listAbsenceTypeGroups
      responses:
        '200':
          description: List of absence type groups
          schema:
            $ref: '#/definitions/AbsenceTypeGroupList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Absence Type Groups
      summary: Create absence type group
      operationId: createAbsenceTypeGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateAbsenceTypeGroupRequest'
      responses:
        '201':
          description: Created absence type group
          schema:
            $ref: '#/definitions/AbsenceTypeGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/absence-type-groups/{id}':
    get:
      tags:
        - Absence Type Groups
      summary: Get absence type group by ID
      operationId: getAbsenceTypeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Absence type group details
          schema:
            $ref: '#/definitions/AbsenceTypeGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Absence Type Groups
      summary: Update absence type group
      operationId: updateAbsenceTypeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateAbsenceTypeGroupRequest'
      responses:
        '200':
          description: Updated absence type group
          schema:
            $ref: '#/definitions/AbsenceTypeGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Absence Type Groups
      summary: Delete absence type group
      operationId: deleteAbsenceTypeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Absence type group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /account-groups:
    get:
      tags:
        - Account Groups
      summary: List account groups
      operationId: listAccountGroups
      responses:
        '200':
          description: List of account groups
          schema:
            $ref: '#/definitions/AccountGroupList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Account Groups
      summary: Create account group
      operationId: createAccountGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateAccountGroupRequest'
      responses:
        '201':
          description: Created account group
          schema:
            $ref: '#/definitions/AccountGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/account-groups/{id}':
    get:
      tags:
        - Account Groups
      summary: Get account group by ID
      operationId: getAccountGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Account group details
          schema:
            $ref: '#/definitions/AccountGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Account Groups
      summary: Update account group
      operationId: updateAccountGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateAccountGroupRequest'
      responses:
        '200':
          description: Updated account group
          schema:
            $ref: '#/definitions/AccountGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Account Groups
      summary: Delete account group
      operationId: deleteAccountGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Account group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /booking-reasons:
    get:
      tags:
        - Booking Reasons
      summary: List booking reasons
      operationId: listBookingReasons
      parameters:
        - name: booking_type_id
          in: query
          type: string
          format: uuid
          description: Filter by booking type ID
      responses:
        '200':
          description: List of booking reasons
          schema:
            $ref: '#/definitions/BookingReasonList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Booking Reasons
      summary: Create booking reason
      operationId: createBookingReason
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateBookingReasonRequest'
      responses:
        '201':
          description: Created booking reason
          schema:
            $ref: '#/definitions/BookingReason'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists for this booking type
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/booking-reasons/{id}':
    get:
      tags:
        - Booking Reasons
      summary: Get booking reason by ID
      operationId: getBookingReason
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Booking reason details
          schema:
            $ref: '#/definitions/BookingReason'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Booking Reasons
      summary: Update booking reason
      operationId: updateBookingReason
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateBookingReasonRequest'
      responses:
        '200':
          description: Updated booking reason
          schema:
            $ref: '#/definitions/BookingReason'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Booking Reasons
      summary: Delete booking reason
      operationId: deleteBookingReason
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Booking reason deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /booking-type-groups:
    get:
      tags:
        - Booking Type Groups
      summary: List booking type groups
      operationId: listBookingTypeGroups
      responses:
        '200':
          description: List of booking type groups
          schema:
            $ref: '#/definitions/BookingTypeGroupList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Booking Type Groups
      summary: Create booking type group
      operationId: createBookingTypeGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateBookingTypeGroupRequest'
      responses:
        '201':
          description: Created booking type group
          schema:
            $ref: '#/definitions/BookingTypeGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/booking-type-groups/{id}':
    get:
      tags:
        - Booking Type Groups
      summary: Get booking type group by ID
      operationId: getBookingTypeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Booking type group details
          schema:
            $ref: '#/definitions/BookingTypeGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Booking Type Groups
      summary: Update booking type group
      operationId: updateBookingTypeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateBookingTypeGroupRequest'
      responses:
        '200':
          description: Updated booking type group
          schema:
            $ref: '#/definitions/BookingTypeGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Booking Type Groups
      summary: Delete booking type group
      operationId: deleteBookingTypeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Booking type group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /employee-groups:
    get:
      tags:
        - Groups
      summary: List employee groups
      description: Returns all employee groups for the tenant.
      operationId: listEmployeeGroups
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of employee groups
          schema:
            type: array
            items:
              $ref: '#/definitions/EmployeeGroup'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Groups
      summary: Create employee group
      description: Creates a new employee group with a unique code.
      operationId: createEmployeeGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateGroupRequest'
      responses:
        '201':
          description: Created employee group
          schema:
            $ref: '#/definitions/EmployeeGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/employee-groups/{id}':
    get:
      tags:
        - Groups
      summary: Get employee group by ID
      operationId: getEmployeeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Employee group details
          schema:
            $ref: '#/definitions/EmployeeGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Groups
      summary: Update employee group
      operationId: updateEmployeeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateGroupRequest'
      responses:
        '200':
          description: Updated employee group
          schema:
            $ref: '#/definitions/EmployeeGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Groups
      summary: Delete employee group
      operationId: deleteEmployeeGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Employee group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /workflow-groups:
    get:
      tags:
        - Groups
      summary: List workflow groups
      description: Returns all workflow groups for the tenant.
      operationId: listWorkflowGroups
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of workflow groups
          schema:
            type: array
            items:
              $ref: '#/definitions/WorkflowGroup'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Groups
      summary: Create workflow group
      description: Creates a new workflow group with a unique code.
      operationId: createWorkflowGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateGroupRequest'
      responses:
        '201':
          description: Created workflow group
          schema:
            $ref: '#/definitions/WorkflowGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/workflow-groups/{id}':
    get:
      tags:
        - Groups
      summary: Get workflow group by ID
      operationId: getWorkflowGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Workflow group details
          schema:
            $ref: '#/definitions/WorkflowGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Groups
      summary: Update workflow group
      operationId: updateWorkflowGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateGroupRequest'
      responses:
        '200':
          description: Updated workflow group
          schema:
            $ref: '#/definitions/WorkflowGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Groups
      summary: Delete workflow group
      operationId: deleteWorkflowGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Workflow group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /activity-groups:
    get:
      tags:
        - Groups
      summary: List activity groups
      description: Returns all activity groups for the tenant.
      operationId: listActivityGroups
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of activity groups
          schema:
            type: array
            items:
              $ref: '#/definitions/ActivityGroup'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Groups
      summary: Create activity group
      description: Creates a new activity group with a unique code.
      operationId: createActivityGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateGroupRequest'
      responses:
        '201':
          description: Created activity group
          schema:
            $ref: '#/definitions/ActivityGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/activity-groups/{id}':
    get:
      tags:
        - Groups
      summary: Get activity group by ID
      operationId: getActivityGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Activity group details
          schema:
            $ref: '#/definitions/ActivityGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Groups
      summary: Update activity group
      operationId: updateActivityGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateGroupRequest'
      responses:
        '200':
          description: Updated activity group
          schema:
            $ref: '#/definitions/ActivityGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Groups
      summary: Delete activity group
      operationId: deleteActivityGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Activity group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /calculation-rules:
    get:
      tags:
        - Calculation Rules
      summary: List calculation rules
      operationId: listCalculationRules
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter to only active rules
      responses:
        '200':
          description: List of calculation rules
          schema:
            $ref: '#/definitions/CalculationRuleList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Calculation Rules
      summary: Create calculation rule
      operationId: createCalculationRule
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateCalculationRuleRequest'
      responses:
        '201':
          description: Created calculation rule
          schema:
            $ref: '#/definitions/CalculationRule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists for this tenant
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/calculation-rules/{id}':
    get:
      tags:
        - Calculation Rules
      summary: Get calculation rule by ID
      operationId: getCalculationRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Calculation rule details
          schema:
            $ref: '#/definitions/CalculationRule'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Calculation Rules
      summary: Update calculation rule
      operationId: updateCalculationRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateCalculationRuleRequest'
      responses:
        '200':
          description: Updated calculation rule
          schema:
            $ref: '#/definitions/CalculationRule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Calculation Rules
      summary: Delete calculation rule
      operationId: deleteCalculationRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Calculation rule deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Rule is still assigned to absence types
          schema:
            $ref: '#/definitions/ProblemDetails'
  /correction-messages:
    get:
      tags:
        - Correction Assistant
      summary: List correction messages
      description: |
        Returns the error/hint message catalog for the tenant. Each entry maps
        an error code to human-readable text with optional custom overrides.
      operationId: listCorrectionMessages
      parameters:
        - name: severity
          in: query
          type: string
          enum:
            - error
            - hint
          description: Filter by severity
        - name: is_active
          in: query
          type: boolean
          description: Filter by active status
        - name: code
          in: query
          type: string
          description: Filter by error code
      responses:
        '200':
          description: List of correction messages
          schema:
            $ref: '#/definitions/CorrectionMessageList'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  '/correction-messages/{id}':
    get:
      tags:
        - Correction Assistant
      summary: Get correction message by ID
      operationId: getCorrectionMessage
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Correction message details
          schema:
            $ref: '#/definitions/CorrectionMessage'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Correction Assistant
      summary: Update correction message
      description: |
        Update custom text, severity, or active status for a correction message.
        Set custom_text to override the default text in correction assistant outputs.
        Set custom_text to null to revert to the default text.
      operationId: updateCorrectionMessage
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateCorrectionMessageRequest'
      responses:
        '200':
          description: Updated correction message
          schema:
            $ref: '#/definitions/CorrectionMessage'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /correction-assistant:
    get:
      tags:
        - Correction Assistant
      summary: List correction assistant items
      description: |
        Returns daily calculation errors and hints for the correction assistant view.
        Each item represents one employee-date with one or more errors/hints,
        with messages resolved from the correction message catalog.

        **Default date range**: When no from/to parameters are provided, returns
        items from the first day of the previous month through the last day of
        the current month.
      operationId: listCorrectionAssistantItems
      parameters:
        - name: from
          in: query
          type: string
          format: date
          description: Start date filter (inclusive). Defaults to first day of previous month.
        - name: to
          in: query
          type: string
          format: date
          description: End date filter (inclusive). Defaults to last day of current month.
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department (includes all employees in department)
        - name: severity
          in: query
          type: string
          enum:
            - error
            - hint
          description: Filter by error severity
        - name: error_code
          in: query
          type: string
          description: Filter by specific error code
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 200
        - name: offset
          in: query
          type: integer
          default: 0
          minimum: 0
      responses:
        '200':
          description: List of correction assistant items
          schema:
            $ref: '#/definitions/CorrectionAssistantList'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  /vacation-special-calculations:
    get:
      tags:
        - Vacation Special Calculations
      summary: List vacation special calculations
      operationId: listVacationSpecialCalculations
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter to only active special calculations
        - name: type
          in: query
          type: string
          enum:
            - age
            - tenure
            - disability
          description: Filter by special calculation type
      responses:
        '200':
          description: List of vacation special calculations
          schema:
            $ref: '#/definitions/VacationSpecialCalculationList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Vacation Special Calculations
      summary: Create vacation special calculation
      operationId: createVacationSpecialCalculation
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateVacationSpecialCalculationRequest'
      responses:
        '201':
          description: Created vacation special calculation
          schema:
            $ref: '#/definitions/VacationSpecialCalculation'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Duplicate type+threshold combination for this tenant
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/vacation-special-calculations/{id}':
    get:
      tags:
        - Vacation Special Calculations
      summary: Get vacation special calculation by ID
      operationId: getVacationSpecialCalculation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Vacation special calculation details
          schema:
            $ref: '#/definitions/VacationSpecialCalculation'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Vacation Special Calculations
      summary: Update vacation special calculation
      operationId: updateVacationSpecialCalculation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateVacationSpecialCalculationRequest'
      responses:
        '200':
          description: Updated vacation special calculation
          schema:
            $ref: '#/definitions/VacationSpecialCalculation'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Vacation Special Calculations
      summary: Delete vacation special calculation
      operationId: deleteVacationSpecialCalculation
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Vacation special calculation deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Special calculation is still assigned to calculation groups
          schema:
            $ref: '#/definitions/ProblemDetails'
  /vacation-calculation-groups:
    get:
      tags:
        - Vacation Calculation Groups
      summary: List vacation calculation groups
      operationId: listVacationCalculationGroups
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter to only active groups
      responses:
        '200':
          description: List of vacation calculation groups
          schema:
            $ref: '#/definitions/VacationCalculationGroupList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Vacation Calculation Groups
      summary: Create vacation calculation group
      operationId: createVacationCalculationGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateVacationCalculationGroupRequest'
      responses:
        '201':
          description: Created vacation calculation group
          schema:
            $ref: '#/definitions/VacationCalculationGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists for this tenant
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/vacation-calculation-groups/{id}':
    get:
      tags:
        - Vacation Calculation Groups
      summary: Get vacation calculation group by ID
      operationId: getVacationCalculationGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Vacation calculation group details (includes linked special calculations)
          schema:
            $ref: '#/definitions/VacationCalculationGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Vacation Calculation Groups
      summary: Update vacation calculation group
      operationId: updateVacationCalculationGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateVacationCalculationGroupRequest'
      responses:
        '200':
          description: Updated vacation calculation group
          schema:
            $ref: '#/definitions/VacationCalculationGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Vacation Calculation Groups
      summary: Delete vacation calculation group
      operationId: deleteVacationCalculationGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Vacation calculation group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Group is still assigned to employment types
          schema:
            $ref: '#/definitions/ProblemDetails'
  /vacation-entitlement/preview:
    post:
      tags:
        - Vacation
      summary: Preview vacation entitlement for an employee
      description: |
        Calculates and returns a detailed breakdown of vacation entitlement for an employee in a given year.
        Uses the employee's employment type to resolve the calculation group, or accepts an optional override.
        Does NOT persist the result -- use /vacation-balances/initialize for that.
      operationId: previewVacationEntitlement
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/VacationEntitlementPreviewRequest'
      responses:
        '200':
          description: Vacation entitlement breakdown
          schema:
            $ref: '#/definitions/VacationEntitlementPreview'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          description: Employee not found
          schema:
            $ref: '#/definitions/ProblemDetails'
  /vacation-capping-rules:
    get:
      tags:
        - Vacation Capping Rules
      summary: List vacation capping rules
      operationId: listVacationCappingRules
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter to only active rules
        - name: rule_type
          in: query
          type: string
          enum:
            - year_end
            - mid_year
          description: Filter by rule type
      responses:
        '200':
          description: List of vacation capping rules
          schema:
            $ref: '#/definitions/VacationCappingRuleList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Vacation Capping Rules
      summary: Create vacation capping rule
      operationId: createVacationCappingRule
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateVacationCappingRuleRequest'
      responses:
        '201':
          description: Created vacation capping rule
          schema:
            $ref: '#/definitions/VacationCappingRule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists for this tenant
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/vacation-capping-rules/{id}':
    get:
      tags:
        - Vacation Capping Rules
      summary: Get vacation capping rule by ID
      operationId: getVacationCappingRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Vacation capping rule details
          schema:
            $ref: '#/definitions/VacationCappingRule'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Vacation Capping Rules
      summary: Update vacation capping rule
      operationId: updateVacationCappingRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateVacationCappingRuleRequest'
      responses:
        '200':
          description: Updated vacation capping rule
          schema:
            $ref: '#/definitions/VacationCappingRule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Vacation Capping Rules
      summary: Delete vacation capping rule
      operationId: deleteVacationCappingRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Vacation capping rule deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Rule is still assigned to groups
          schema:
            $ref: '#/definitions/ProblemDetails'
  /vacation-capping-rule-groups:
    get:
      tags:
        - Vacation Capping Rule Groups
      summary: List vacation capping rule groups
      operationId: listVacationCappingRuleGroups
      parameters:
        - name: active_only
          in: query
          type: boolean
          description: Filter to only active groups
      responses:
        '200':
          description: List of vacation capping rule groups
          schema:
            $ref: '#/definitions/VacationCappingRuleGroupList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Vacation Capping Rule Groups
      summary: Create vacation capping rule group
      operationId: createVacationCappingRuleGroup
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateVacationCappingRuleGroupRequest'
      responses:
        '201':
          description: Created vacation capping rule group
          schema:
            $ref: '#/definitions/VacationCappingRuleGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists for this tenant
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/vacation-capping-rule-groups/{id}':
    get:
      tags:
        - Vacation Capping Rule Groups
      summary: Get vacation capping rule group by ID
      operationId: getVacationCappingRuleGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Vacation capping rule group details (includes linked capping rules)
          schema:
            $ref: '#/definitions/VacationCappingRuleGroup'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Vacation Capping Rule Groups
      summary: Update vacation capping rule group
      operationId: updateVacationCappingRuleGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateVacationCappingRuleGroupRequest'
      responses:
        '200':
          description: Updated vacation capping rule group
          schema:
            $ref: '#/definitions/VacationCappingRuleGroup'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Vacation Capping Rule Groups
      summary: Delete vacation capping rule group
      operationId: deleteVacationCappingRuleGroup
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Vacation capping rule group deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Group is still assigned to tariffs
          schema:
            $ref: '#/definitions/ProblemDetails'
  /employee-capping-exceptions:
    get:
      tags:
        - Employee Capping Exceptions
      summary: List employee capping exceptions
      operationId: listEmployeeCappingExceptions
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee ID
        - name: capping_rule_id
          in: query
          type: string
          format: uuid
          description: Filter by capping rule ID
        - name: year
          in: query
          type: integer
          description: Filter by year
      responses:
        '200':
          description: List of employee capping exceptions
          schema:
            $ref: '#/definitions/EmployeeCappingExceptionList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Employee Capping Exceptions
      summary: Create employee capping exception
      operationId: createEmployeeCappingException
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmployeeCappingExceptionRequest'
      responses:
        '201':
          description: Created employee capping exception
          schema:
            $ref: '#/definitions/EmployeeCappingException'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Exception already exists for this employee/rule/year combination
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/employee-capping-exceptions/{id}':
    get:
      tags:
        - Employee Capping Exceptions
      summary: Get employee capping exception by ID
      operationId: getEmployeeCappingException
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Employee capping exception details
          schema:
            $ref: '#/definitions/EmployeeCappingException'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Employee Capping Exceptions
      summary: Update employee capping exception
      operationId: updateEmployeeCappingException
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateEmployeeCappingExceptionRequest'
      responses:
        '200':
          description: Updated employee capping exception
          schema:
            $ref: '#/definitions/EmployeeCappingException'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Employee Capping Exceptions
      summary: Delete employee capping exception
      operationId: deleteEmployeeCappingException
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Employee capping exception deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /vacation-carryover/preview:
    post:
      tags:
        - Vacation Capping Rules
      summary: Preview vacation carryover calculation
      operationId: previewVacationCarryover
      description: 'Preview how carryover would be calculated for an employee/year, showing all rules applied.'
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/VacationCarryoverPreviewRequest'
      responses:
        '200':
          description: Vacation carryover preview
          schema:
            $ref: '#/definitions/VacationCarryoverPreview'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /activities:
    get:
      tags:
        - Activities
      summary: List activities
      description: |
        Returns all activities for the tenant. Activities are work types
        used in order-based time tracking (Taetigkeiten).
      operationId: listActivities
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of activities
          schema:
            $ref: '#/definitions/ActivityList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Activities
      summary: Create activity
      description: |
        Creates a new activity with a unique code for use in order bookings.
      operationId: createActivity
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateActivityRequest'
      responses:
        '201':
          description: Created activity
          schema:
            $ref: '#/definitions/Activity'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/activities/{id}':
    get:
      tags:
        - Activities
      summary: Get activity by ID
      description: Retrieves activity details.
      operationId: getActivity
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Activity details
          schema:
            $ref: '#/definitions/Activity'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Activities
      summary: Update activity
      description: Updates activity properties.
      operationId: updateActivity
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateActivityRequest'
      responses:
        '200':
          description: Updated activity
          schema:
            $ref: '#/definitions/Activity'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Activities
      summary: Delete activity
      description: Permanently removes an activity. Consider deactivating instead.
      operationId: deleteActivity
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Activity deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /orders:
    get:
      tags:
        - Orders
      summary: List orders
      description: |
        Returns all orders for the tenant. Orders represent projects or work
        packages that employees can book time against.
      operationId: listOrders
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
        - name: status
          in: query
          type: string
          description: Filter by order status
          enum:
            - planned
            - active
            - completed
            - cancelled
      responses:
        '200':
          description: List of orders
          schema:
            $ref: '#/definitions/OrderList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Orders
      summary: Create order
      description: |
        Creates a new order with a unique code. Orders can be linked to cost
        centers and have billing rates for reporting.
      operationId: createOrder
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateOrderRequest'
      responses:
        '201':
          description: Created order
          schema:
            $ref: '#/definitions/Order'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/orders/{id}':
    get:
      tags:
        - Orders
      summary: Get order by ID
      description: Retrieves order details.
      operationId: getOrder
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Order details
          schema:
            $ref: '#/definitions/Order'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Orders
      summary: Update order
      description: Updates order properties.
      operationId: updateOrder
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateOrderRequest'
      responses:
        '200':
          description: Updated order
          schema:
            $ref: '#/definitions/Order'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Orders
      summary: Delete order
      description: Permanently removes an order. Consider deactivating instead.
      operationId: deleteOrder
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Order deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /order-assignments:
    get:
      tags:
        - Order Assignments
      summary: List order assignments
      description: Returns all order assignments for the tenant.
      operationId: listOrderAssignments
      parameters:
        - name: order_id
          in: query
          type: string
          format: uuid
          description: Filter by order ID
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee ID
      responses:
        '200':
          description: List of order assignments
          schema:
            $ref: '#/definitions/OrderAssignmentList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Order Assignments
      summary: Create order assignment
      description: Assigns an employee to an order with a role.
      operationId: createOrderAssignment
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateOrderAssignmentRequest'
      responses:
        '201':
          description: Created order assignment
          schema:
            $ref: '#/definitions/OrderAssignment'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Assignment already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/order-assignments/{id}':
    get:
      tags:
        - Order Assignments
      summary: Get order assignment by ID
      description: Retrieves order assignment details.
      operationId: getOrderAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Order assignment details
          schema:
            $ref: '#/definitions/OrderAssignment'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Order Assignments
      summary: Update order assignment
      description: Updates order assignment properties.
      operationId: updateOrderAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateOrderAssignmentRequest'
      responses:
        '200':
          description: Updated order assignment
          schema:
            $ref: '#/definitions/OrderAssignment'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Order Assignments
      summary: Delete order assignment
      description: Removes an employee-to-order assignment.
      operationId: deleteOrderAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Order assignment deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/orders/{id}/assignments':
    get:
      tags:
        - Order Assignments
      summary: List assignments for an order
      description: Returns all employee assignments for a specific order.
      operationId: listOrderAssignmentsByOrder
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: List of order assignments
          schema:
            $ref: '#/definitions/OrderAssignmentList'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /order-bookings:
    get:
      tags:
        - Order Bookings
      summary: List order bookings
      description: |
        Returns order bookings filtered by employee, order, and/or date range.
        Used for order-based time tracking reports.
      operationId: listOrderBookings
      parameters:
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee ID
        - name: order_id
          in: query
          type: string
          format: uuid
          description: Filter by order ID
        - name: date_from
          in: query
          type: string
          format: date
          description: Filter bookings from this date (inclusive)
        - name: date_to
          in: query
          type: string
          format: date
          description: Filter bookings to this date (inclusive)
      responses:
        '200':
          description: List of order bookings
          schema:
            $ref: '#/definitions/OrderBookingList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Order Bookings
      summary: Create order booking
      description: Creates a new time booking against an order.
      operationId: createOrderBooking
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateOrderBookingRequest'
      responses:
        '201':
          description: Created order booking
          schema:
            $ref: '#/definitions/OrderBooking'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/order-bookings/{id}':
    get:
      tags:
        - Order Bookings
      summary: Get order booking by ID
      description: Retrieves order booking details.
      operationId: getOrderBooking
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Order booking details
          schema:
            $ref: '#/definitions/OrderBooking'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Order Bookings
      summary: Update order booking
      description: Updates order booking properties.
      operationId: updateOrderBooking
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateOrderBookingRequest'
      responses:
        '200':
          description: Updated order booking
          schema:
            $ref: '#/definitions/OrderBooking'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Order Bookings
      summary: Delete order booking
      description: Permanently removes an order booking.
      operationId: deleteOrderBooking
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Order booking deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /system-settings:
    get:
      tags:
        - System Settings
      summary: Get system settings
      description: Returns the current system settings for the tenant. Creates default settings if none exist.
      operationId: getSystemSettings
      responses:
        '200':
          description: System settings
          schema:
            $ref: '#/definitions/SystemSettings'
        '401':
          $ref: '#/responses/Unauthorized'
    put:
      tags:
        - System Settings
      summary: Update system settings
      operationId: updateSystemSettings
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateSystemSettingsRequest'
      responses:
        '200':
          description: Updated system settings
          schema:
            $ref: '#/definitions/SystemSettings'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /system-settings/cleanup/delete-bookings:
    post:
      tags:
        - System Settings
      summary: Delete bookings in date range
      description: Deletes bookings in the specified date range. Set confirm=false for a preview count.
      operationId: cleanupDeleteBookings
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CleanupDeleteBookingsRequest'
      responses:
        '200':
          description: Cleanup result
          schema:
            $ref: '#/definitions/CleanupResult'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /system-settings/cleanup/delete-booking-data:
    post:
      tags:
        - System Settings
      summary: Delete booking data in date range
      description: 'Deletes bookings, daily values, and employee day plans in the specified date range. Set confirm=false for a preview count.'
      operationId: cleanupDeleteBookingData
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CleanupDeleteBookingDataRequest'
      responses:
        '200':
          description: Cleanup result
          schema:
            $ref: '#/definitions/CleanupResult'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /system-settings/cleanup/re-read-bookings:
    post:
      tags:
        - System Settings
      summary: Re-read bookings in date range
      description: Re-triggers calculation for all bookings in the specified date range. Set confirm=false for a preview count.
      operationId: cleanupReReadBookings
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CleanupReReadBookingsRequest'
      responses:
        '200':
          description: Cleanup result
          schema:
            $ref: '#/definitions/CleanupResult'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /system-settings/cleanup/mark-delete-orders:
    post:
      tags:
        - System Settings
      summary: Mark and delete orders
      description: Deletes the specified orders. Set confirm=false for a preview count.
      operationId: cleanupMarkDeleteOrders
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CleanupMarkDeleteOrdersRequest'
      responses:
        '200':
          description: Cleanup result
          schema:
            $ref: '#/definitions/CleanupResult'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /evaluations/daily-values:
    get:
      tags:
        - Evaluations
      summary: List daily value evaluations
      description: |
        Returns one row per employee per day within the date range.
        Shows time worked, overtime, break, balance and error status.
        Use include_no_bookings=true to include placeholder rows for
        dates with no daily values calculated.
      operationId: listEvaluationDailyValues
      parameters:
        - name: from
          in: query
          required: true
          type: string
          format: date
          description: Start date (YYYY-MM-DD)
        - name: to
          in: query
          required: true
          type: string
          format: date
          description: End date (YYYY-MM-DD)
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
        - name: include_no_bookings
          in: query
          type: boolean
          default: false
          description: Include rows for dates with zero bookings
        - name: has_errors
          in: query
          type: boolean
          description: Filter by error status
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 1000
        - name: page
          in: query
          type: integer
          default: 1
          minimum: 1
      responses:
        '200':
          description: List of daily value evaluations
          schema:
            $ref: '#/definitions/EvaluationDailyValueList'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /evaluations/bookings:
    get:
      tags:
        - Evaluations
      summary: List booking evaluations
      description: |
        Returns one row per booking within the date range.
        Shows time, type, source, and employee for each booking.
      operationId: listEvaluationBookings
      parameters:
        - name: from
          in: query
          required: true
          type: string
          format: date
          description: Start date (YYYY-MM-DD)
        - name: to
          in: query
          required: true
          type: string
          format: date
          description: End date (YYYY-MM-DD)
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
        - name: booking_type_id
          in: query
          type: string
          format: uuid
          description: Filter by booking type
        - name: source
          in: query
          type: string
          enum:
            - web
            - terminal
            - api
            - import
            - correction
          description: Filter by booking source
        - name: direction
          in: query
          type: string
          enum:
            - in
            - out
          description: Filter by booking direction
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 1000
        - name: page
          in: query
          type: integer
          default: 1
          minimum: 1
      responses:
        '200':
          description: List of booking evaluations
          schema:
            $ref: '#/definitions/EvaluationBookingList'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /evaluations/terminal-bookings:
    get:
      tags:
        - Evaluations
      summary: List terminal booking evaluations
      description: |
        Returns raw terminal booking transactions. Shows both original_time
        (raw terminal value) and edited_time (corrected value) side by side.
        Only returns bookings where source='terminal'.
      operationId: listEvaluationTerminalBookings
      parameters:
        - name: from
          in: query
          required: true
          type: string
          format: date
          description: Start date (YYYY-MM-DD)
        - name: to
          in: query
          required: true
          type: string
          format: date
          description: End date (YYYY-MM-DD)
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 1000
        - name: page
          in: query
          type: integer
          default: 1
          minimum: 1
      responses:
        '200':
          description: List of terminal booking evaluations
          schema:
            $ref: '#/definitions/EvaluationTerminalBookingList'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /evaluations/logs:
    get:
      tags:
        - Evaluations
      summary: List change log evaluations
      description: |
        Returns change log entries for bookings, absences, and monthly account
        changes. Shows user, timestamp, and before/after values.
      operationId: listEvaluationLogs
      parameters:
        - name: from
          in: query
          required: true
          type: string
          format: date
          description: 'Start date (YYYY-MM-DD, filters on performed_at)'
        - name: to
          in: query
          required: true
          type: string
          format: date
          description: 'End date (YYYY-MM-DD, filters on performed_at)'
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee (matches entity IDs related to employee)
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
        - name: entity_type
          in: query
          type: string
          description: 'Filter by entity type (booking, absence, monthly_value)'
        - name: action
          in: query
          type: string
          description: 'Filter by action (create, update, delete, approve, reject)'
        - name: user_id
          in: query
          type: string
          format: uuid
          description: Filter by user who performed the action
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 1000
        - name: page
          in: query
          type: integer
          default: 1
          minimum: 1
      responses:
        '200':
          description: List of change log entries
          schema:
            $ref: '#/definitions/EvaluationLogEntryList'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /evaluations/workflow-history:
    get:
      tags:
        - Evaluations
      summary: List workflow history evaluations
      description: |
        Returns approval and workflow history. Composed from audit_logs
        filtering by relevant entity types (absence, monthly_value) and
        workflow actions (create, approve, reject, close, reopen).
      operationId: listEvaluationWorkflowHistory
      parameters:
        - name: from
          in: query
          required: true
          type: string
          format: date
          description: 'Start date (YYYY-MM-DD, filters on performed_at)'
        - name: to
          in: query
          required: true
          type: string
          format: date
          description: 'End date (YYYY-MM-DD, filters on performed_at)'
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee
        - name: department_id
          in: query
          type: string
          format: uuid
          description: Filter by department
        - name: entity_type
          in: query
          type: string
          description: 'Filter by entity type (absence, monthly_value)'
        - name: action
          in: query
          type: string
          description: 'Filter by action (create, approve, reject, close, reopen)'
        - name: limit
          in: query
          type: integer
          default: 50
          minimum: 1
          maximum: 1000
        - name: page
          in: query
          type: integer
          default: 1
          minimum: 1
      responses:
        '200':
          description: List of workflow history entries
          schema:
            $ref: '#/definitions/EvaluationWorkflowEntryList'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  /schedules:
    get:
      tags:
        - Scheduler
      summary: List schedules
      operationId: listSchedules
      responses:
        '200':
          description: List of schedules
          schema:
            $ref: '#/definitions/ScheduleList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Scheduler
      summary: Create schedule
      operationId: createSchedule
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateScheduleRequest'
      responses:
        '201':
          description: Created schedule
          schema:
            $ref: '#/definitions/Schedule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Schedule name already exists for this tenant
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/schedules/{id}':
    get:
      tags:
        - Scheduler
      summary: Get schedule by ID
      operationId: getSchedule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Schedule details with tasks
          schema:
            $ref: '#/definitions/Schedule'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Scheduler
      summary: Update schedule
      operationId: updateSchedule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateScheduleRequest'
      responses:
        '200':
          description: Updated schedule
          schema:
            $ref: '#/definitions/Schedule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Scheduler
      summary: Delete schedule
      operationId: deleteSchedule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Schedule deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/schedules/{id}/tasks':
    get:
      tags:
        - Scheduler
      summary: List tasks for a schedule
      operationId: listScheduleTasks
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: List of tasks
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/definitions/ScheduleTask'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    post:
      tags:
        - Scheduler
      summary: Add task to schedule
      operationId: addScheduleTask
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateScheduleTaskRequest'
      responses:
        '201':
          description: Created task
          schema:
            $ref: '#/definitions/ScheduleTask'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/schedules/{id}/tasks/{taskId}':
    patch:
      tags:
        - Scheduler
      summary: Update schedule task
      operationId: updateScheduleTask
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: taskId
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateScheduleTaskRequest'
      responses:
        '200':
          description: Updated task
          schema:
            $ref: '#/definitions/ScheduleTask'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Scheduler
      summary: Remove task from schedule
      operationId: removeScheduleTask
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: taskId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Task removed
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/schedules/{id}/execute':
    post:
      tags:
        - Scheduler
      summary: Trigger manual execution of a schedule
      operationId: triggerScheduleExecution
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          schema:
            $ref: '#/definitions/TriggerExecutionRequest'
      responses:
        '200':
          description: Execution result
          schema:
            $ref: '#/definitions/ScheduleExecution'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/schedules/{id}/executions':
    get:
      tags:
        - Scheduler
      summary: List execution logs for a schedule
      operationId: listScheduleExecutions
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: limit
          in: query
          type: integer
          description: Max number of executions to return (default 20)
      responses:
        '200':
          description: Execution history
          schema:
            $ref: '#/definitions/ScheduleExecutionList'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/schedule-executions/{id}':
    get:
      tags:
        - Scheduler
      summary: Get execution detail with task logs
      operationId: getScheduleExecution
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Execution detail with task execution logs
          schema:
            $ref: '#/definitions/ScheduleExecution'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /scheduler/task-catalog:
    get:
      tags:
        - Scheduler
      summary: List available task types
      operationId: getTaskCatalog
      responses:
        '200':
          description: Task catalog
          schema:
            $ref: '#/definitions/TaskCatalog'
        '401':
          $ref: '#/responses/Unauthorized'
  /employee-messages:
    get:
      tags:
        - Employee Messages
      summary: List employee messages
      operationId: listEmployeeMessages
      parameters:
        - name: status
          in: query
          type: string
          enum:
            - pending
            - sent
            - failed
          description: Filter by recipient status (returns messages that have at least one recipient with this status)
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: offset
          in: query
          type: integer
          minimum: 0
          default: 0
      responses:
        '200':
          description: List of employee messages
          schema:
            $ref: '#/definitions/EmployeeMessageList'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
    post:
      tags:
        - Employee Messages
      summary: Create a new employee message
      operationId: createEmployeeMessage
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmployeeMessageRequest'
      responses:
        '201':
          description: Created employee message
          schema:
            $ref: '#/definitions/EmployeeMessage'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  '/employee-messages/{id}':
    get:
      tags:
        - Employee Messages
      summary: Get an employee message by ID
      operationId: getEmployeeMessage
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Employee message
          schema:
            $ref: '#/definitions/EmployeeMessage'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
  '/employee-messages/{id}/send':
    post:
      tags:
        - Employee Messages
      summary: Send an employee message (deliver to all pending recipients)
      operationId: sendEmployeeMessage
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Send result
          schema:
            $ref: '#/definitions/SendEmployeeMessageResponse'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
        '404':
          $ref: '#/responses/NotFound'
  '/employees/{id}/messages':
    get:
      tags:
        - Employee Messages
      summary: List messages for a specific employee
      operationId: listEmployeeMessagesForEmployee
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
          description: Employee ID
        - name: limit
          in: query
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        - name: offset
          in: query
          type: integer
          minimum: 0
          default: 0
      responses:
        '200':
          description: List of messages for the employee
          schema:
            $ref: '#/definitions/EmployeeMessageList'
        '401':
          $ref: '#/responses/Unauthorized'
        '403':
          $ref: '#/responses/Forbidden'
  /contact-types:
    get:
      tags:
        - Contact Types
      summary: List contact types
      description: |
        Returns all contact types for the tenant. Contact types define data
        validation formats (email, phone, text, url) for contact fields.
      operationId: listContactTypes
      parameters:
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of contact types
          schema:
            $ref: '#/definitions/ContactTypeList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Contact Types
      summary: Create contact type
      description: |
        Creates a new contact type with a unique code and data format.
      operationId: createContactType
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateContactTypeRequest'
      responses:
        '201':
          description: Created contact type
          schema:
            $ref: '#/definitions/ContactType'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/contact-types/{id}':
    get:
      tags:
        - Contact Types
      summary: Get contact type by ID
      description: Retrieves contact type details.
      operationId: getContactType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Contact type details
          schema:
            $ref: '#/definitions/ContactType'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Contact Types
      summary: Update contact type
      description: Updates contact type properties. Code and data_type cannot be changed.
      operationId: updateContactType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateContactTypeRequest'
      responses:
        '200':
          description: Updated contact type
          schema:
            $ref: '#/definitions/ContactType'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Contact Types
      summary: Delete contact type
      description: |
        Permanently removes a contact type. Fails if contact kinds reference it.
        Consider deactivating instead.
      operationId: deleteContactType
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Contact type deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Contact type is in use by contact kinds
          schema:
            $ref: '#/definitions/ProblemDetails'
  /contact-kinds:
    get:
      tags:
        - Contact Kinds
      summary: List contact kinds
      description: |
        Returns contact kinds for the tenant. Optionally filter by contact type or active status.
      operationId: listContactKinds
      parameters:
        - name: contact_type_id
          in: query
          type: string
          format: uuid
          description: Filter by contact type ID
        - name: active
          in: query
          type: boolean
          description: Filter by active status
      responses:
        '200':
          description: List of contact kinds
          schema:
            $ref: '#/definitions/ContactKindList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Contact Kinds
      summary: Create contact kind
      description: |
        Creates a new contact kind linked to a contact type.
      operationId: createContactKind
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateContactKindRequest'
      responses:
        '201':
          description: Created contact kind
          schema:
            $ref: '#/definitions/ContactKind'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/contact-kinds/{id}':
    get:
      tags:
        - Contact Kinds
      summary: Get contact kind by ID
      description: Retrieves contact kind details.
      operationId: getContactKind
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Contact kind details
          schema:
            $ref: '#/definitions/ContactKind'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Contact Kinds
      summary: Update contact kind
      description: Updates contact kind properties. Code and contact_type_id cannot be changed.
      operationId: updateContactKind
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateContactKindRequest'
      responses:
        '200':
          description: Updated contact kind
          schema:
            $ref: '#/definitions/ContactKind'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Contact Kinds
      summary: Delete contact kind
      description: Permanently removes a contact kind. Consider deactivating instead.
      operationId: deleteContactKind
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Contact kind deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /terminal-bookings:
    get:
      summary: List raw terminal bookings
      description: List raw terminal bookings filtered by date range and optional terminal ID.
      operationId: listRawTerminalBookings
      tags:
        - Terminal Bookings
      parameters:
        - name: X-Tenant-ID
          in: header
          required: true
          type: string
          format: uuid
        - name: from
          in: query
          required: true
          type: string
          format: date
          description: Start date (inclusive)
        - name: to
          in: query
          required: true
          type: string
          format: date
          description: End date (inclusive)
        - name: terminal_id
          in: query
          type: string
          description: Filter by terminal device ID
        - name: employee_id
          in: query
          type: string
          format: uuid
          description: Filter by employee ID
        - name: status
          in: query
          type: string
          enum:
            - pending
            - processed
            - failed
            - skipped
          description: Filter by processing status
        - name: import_batch_id
          in: query
          type: string
          format: uuid
          description: Filter by import batch
        - name: limit
          in: query
          type: integer
          default: 50
        - name: page
          in: query
          type: integer
          default: 1
      responses:
        '200':
          description: List of raw terminal bookings
          schema:
            $ref: '#/definitions/RawTerminalBookingList'
        '400':
          description: Invalid request parameters
          schema:
            $ref: '#/definitions/ProblemDetails'
  /terminal-bookings/import:
    post:
      summary: Trigger terminal booking import
      description: |
        Import raw bookings from a terminal. The import is idempotent per batch_reference:
        if the same batch_reference has already been imported for this tenant, the request
        returns the existing batch without re-importing.
      operationId: triggerTerminalImport
      tags:
        - Terminal Bookings
      parameters:
        - name: X-Tenant-ID
          in: header
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/TriggerTerminalImportRequest'
      responses:
        '200':
          description: Import triggered (or duplicate batch returned)
          schema:
            $ref: '#/definitions/TriggerTerminalImportResponse'
        '400':
          description: Invalid request
          schema:
            $ref: '#/definitions/ProblemDetails'
        '409':
          description: Batch already imported (idempotent - returns existing batch)
          schema:
            $ref: '#/definitions/TriggerTerminalImportResponse'
  /import-batches:
    get:
      summary: List import batches
      description: List terminal import batches with optional filters.
      operationId: listImportBatches
      tags:
        - Terminal Bookings
      parameters:
        - name: X-Tenant-ID
          in: header
          required: true
          type: string
          format: uuid
        - name: status
          in: query
          type: string
          enum:
            - pending
            - processing
            - completed
            - failed
        - name: terminal_id
          in: query
          type: string
        - name: limit
          in: query
          type: integer
          default: 50
        - name: page
          in: query
          type: integer
          default: 1
      responses:
        '200':
          description: List of import batches
          schema:
            $ref: '#/definitions/ImportBatchList'
  '/import-batches/{id}':
    get:
      summary: Get import batch by ID
      description: Get a single import batch with its summary.
      operationId: getImportBatch
      tags:
        - Terminal Bookings
      parameters:
        - name: X-Tenant-ID
          in: header
          required: true
          type: string
          format: uuid
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Import batch details
          schema:
            $ref: '#/definitions/ImportBatch'
        '404':
          description: Batch not found
          schema:
            $ref: '#/definitions/ProblemDetails'
  /access-zones:
    get:
      tags:
        - Access Zones
      summary: List access zones
      description: |
        Returns all access zones for the tenant.
        Placeholder - requires separate ZMI Zutritt documentation for full implementation.
      operationId: listAccessZones
      responses:
        '200':
          description: List of access zones
          schema:
            $ref: '#/definitions/AccessZoneList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Access Zones
      summary: Create access zone
      description: |
        Creates a new access zone with a unique code.
        Placeholder - requires separate ZMI Zutritt documentation for full implementation.
      operationId: createAccessZone
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateAccessZoneRequest'
      responses:
        '201':
          description: Created access zone
          schema:
            $ref: '#/definitions/AccessZone'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/access-zones/{id}':
    get:
      tags:
        - Access Zones
      summary: Get access zone by ID
      description: Retrieves access zone details.
      operationId: getAccessZone
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Access zone details
          schema:
            $ref: '#/definitions/AccessZone'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Access Zones
      summary: Update access zone
      description: Updates access zone properties. Code cannot be changed.
      operationId: updateAccessZone
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateAccessZoneRequest'
      responses:
        '200':
          description: Updated access zone
          schema:
            $ref: '#/definitions/AccessZone'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Access Zones
      summary: Delete access zone
      description: Permanently removes an access zone.
      operationId: deleteAccessZone
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Access zone deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /access-profiles:
    get:
      tags:
        - Access Profiles
      summary: List access profiles
      description: |
        Returns all access profiles for the tenant.
        Placeholder - requires separate ZMI Zutritt documentation for full implementation.
      operationId: listAccessProfiles
      responses:
        '200':
          description: List of access profiles
          schema:
            $ref: '#/definitions/AccessProfileList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Access Profiles
      summary: Create access profile
      description: |
        Creates a new access profile with a unique code.
        Placeholder - requires separate ZMI Zutritt documentation for full implementation.
      operationId: createAccessProfile
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateAccessProfileRequest'
      responses:
        '201':
          description: Created access profile
          schema:
            $ref: '#/definitions/AccessProfile'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/access-profiles/{id}':
    get:
      tags:
        - Access Profiles
      summary: Get access profile by ID
      description: Retrieves access profile details.
      operationId: getAccessProfile
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Access profile details
          schema:
            $ref: '#/definitions/AccessProfile'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Access Profiles
      summary: Update access profile
      description: Updates access profile properties. Code cannot be changed.
      operationId: updateAccessProfile
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateAccessProfileRequest'
      responses:
        '200':
          description: Updated access profile
          schema:
            $ref: '#/definitions/AccessProfile'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Access Profiles
      summary: Delete access profile
      description: |
        Permanently removes an access profile. Fails if employee assignments reference it.
        Consider deactivating instead.
      operationId: deleteAccessProfile
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Access profile deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Access profile is in use by employee assignments
          schema:
            $ref: '#/definitions/ProblemDetails'
  /employee-access-assignments:
    get:
      tags:
        - Employee Access Assignments
      summary: List employee access assignments
      description: |
        Returns all employee access assignments for the tenant.
        Placeholder - requires separate ZMI Zutritt documentation for full implementation.
      operationId: listEmployeeAccessAssignments
      responses:
        '200':
          description: List of employee access assignments
          schema:
            $ref: '#/definitions/EmployeeAccessAssignmentList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Employee Access Assignments
      summary: Create employee access assignment
      description: |
        Assigns an access profile to an employee.
        Placeholder - requires separate ZMI Zutritt documentation for full implementation.
      operationId: createEmployeeAccessAssignment
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateEmployeeAccessAssignmentRequest'
      responses:
        '201':
          description: Created employee access assignment
          schema:
            $ref: '#/definitions/EmployeeAccessAssignment'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/employee-access-assignments/{id}':
    get:
      tags:
        - Employee Access Assignments
      summary: Get employee access assignment by ID
      description: Retrieves employee access assignment details.
      operationId: getEmployeeAccessAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Employee access assignment details
          schema:
            $ref: '#/definitions/EmployeeAccessAssignment'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Employee Access Assignments
      summary: Update employee access assignment
      description: Updates employee access assignment properties.
      operationId: updateEmployeeAccessAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateEmployeeAccessAssignmentRequest'
      responses:
        '200':
          description: Updated employee access assignment
          schema:
            $ref: '#/definitions/EmployeeAccessAssignment'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Employee Access Assignments
      summary: Delete employee access assignment
      description: Permanently removes an employee access assignment.
      operationId: deleteEmployeeAccessAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Employee access assignment deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /vehicles:
    get:
      tags:
        - Vehicles
      summary: List vehicles
      description: |
        Returns all vehicles for the tenant.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: listVehicles
      responses:
        '200':
          description: List of vehicles
          schema:
            $ref: '#/definitions/VehicleList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Vehicles
      summary: Create vehicle
      description: |
        Creates a new vehicle with a unique code.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: createVehicle
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateVehicleRequest'
      responses:
        '201':
          description: Created vehicle
          schema:
            $ref: '#/definitions/Vehicle'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/vehicles/{id}':
    get:
      tags:
        - Vehicles
      summary: Get vehicle by ID
      description: |
        Retrieves vehicle details.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: getVehicle
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Vehicle details
          schema:
            $ref: '#/definitions/Vehicle'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Vehicles
      summary: Update vehicle
      description: |
        Updates vehicle properties. Code cannot be changed.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: updateVehicle
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateVehicleRequest'
      responses:
        '200':
          description: Updated vehicle
          schema:
            $ref: '#/definitions/Vehicle'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Vehicles
      summary: Delete vehicle
      description: |
        Permanently removes a vehicle.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: deleteVehicle
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Vehicle deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /vehicle-routes:
    get:
      tags:
        - Vehicle Routes
      summary: List vehicle routes
      description: |
        Returns all vehicle routes for the tenant.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: listVehicleRoutes
      responses:
        '200':
          description: List of vehicle routes
          schema:
            $ref: '#/definitions/VehicleRouteList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Vehicle Routes
      summary: Create vehicle route
      description: |
        Creates a new vehicle route with a unique code.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: createVehicleRoute
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateVehicleRouteRequest'
      responses:
        '201':
          description: Created vehicle route
          schema:
            $ref: '#/definitions/VehicleRoute'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/vehicle-routes/{id}':
    get:
      tags:
        - Vehicle Routes
      summary: Get vehicle route by ID
      description: |
        Retrieves vehicle route details.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: getVehicleRoute
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Vehicle route details
          schema:
            $ref: '#/definitions/VehicleRoute'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Vehicle Routes
      summary: Update vehicle route
      description: |
        Updates vehicle route properties. Code cannot be changed.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: updateVehicleRoute
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateVehicleRouteRequest'
      responses:
        '200':
          description: Updated vehicle route
          schema:
            $ref: '#/definitions/VehicleRoute'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Vehicle Routes
      summary: Delete vehicle route
      description: |
        Permanently removes a vehicle route.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: deleteVehicleRoute
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Vehicle route deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /trip-records:
    get:
      tags:
        - Trip Records
      summary: List trip records
      description: |
        Returns all trip records for the tenant.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: listTripRecords
      responses:
        '200':
          description: List of trip records
          schema:
            $ref: '#/definitions/TripRecordList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Trip Records
      summary: Create trip record
      description: |
        Creates a new trip record.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: createTripRecord
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateTripRecordRequest'
      responses:
        '201':
          description: Created trip record
          schema:
            $ref: '#/definitions/TripRecord'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/trip-records/{id}':
    get:
      tags:
        - Trip Records
      summary: Get trip record by ID
      description: |
        Retrieves trip record details.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: getTripRecord
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Trip record details
          schema:
            $ref: '#/definitions/TripRecord'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Trip Records
      summary: Update trip record
      description: |
        Updates trip record properties.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: updateTripRecord
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateTripRecordRequest'
      responses:
        '200':
          description: Updated trip record
          schema:
            $ref: '#/definitions/TripRecord'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Trip Records
      summary: Delete trip record
      description: |
        Permanently removes a trip record.
        Placeholder - requires separate vehicle documentation for full implementation.
      operationId: deleteTripRecord
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Trip record deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /travel-allowance-rule-sets:
    get:
      tags:
        - Travel Allowance Rule Sets
      summary: List travel allowance rule sets
      description: |
        Returns all travel allowance rule sets for the tenant.
      operationId: listTravelAllowanceRuleSets
      responses:
        '200':
          description: List of travel allowance rule sets
          schema:
            $ref: '#/definitions/TravelAllowanceRuleSetList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Travel Allowance Rule Sets
      summary: Create travel allowance rule set
      description: |
        Creates a new travel allowance rule set with a unique code.
      operationId: createTravelAllowanceRuleSet
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateTravelAllowanceRuleSetRequest'
      responses:
        '201':
          description: Created travel allowance rule set
          schema:
            $ref: '#/definitions/TravelAllowanceRuleSet'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/travel-allowance-rule-sets/{id}':
    get:
      tags:
        - Travel Allowance Rule Sets
      summary: Get travel allowance rule set by ID
      description: |
        Retrieves travel allowance rule set details.
      operationId: getTravelAllowanceRuleSet
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Travel allowance rule set details
          schema:
            $ref: '#/definitions/TravelAllowanceRuleSet'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Travel Allowance Rule Sets
      summary: Update travel allowance rule set
      description: |
        Updates travel allowance rule set properties. Code cannot be changed.
      operationId: updateTravelAllowanceRuleSet
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateTravelAllowanceRuleSetRequest'
      responses:
        '200':
          description: Updated travel allowance rule set
          schema:
            $ref: '#/definitions/TravelAllowanceRuleSet'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Travel Allowance Rule Sets
      summary: Delete travel allowance rule set
      description: |
        Permanently removes a travel allowance rule set.
      operationId: deleteTravelAllowanceRuleSet
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Travel allowance rule set deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /local-travel-rules:
    get:
      tags:
        - Local Travel Rules
      summary: List local travel rules
      description: |
        Returns all local travel rules for the tenant.
      operationId: listLocalTravelRules
      responses:
        '200':
          description: List of local travel rules
          schema:
            $ref: '#/definitions/LocalTravelRuleList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Local Travel Rules
      summary: Create local travel rule
      description: |
        Creates a new local travel rule within a rule set.
      operationId: createLocalTravelRule
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateLocalTravelRuleRequest'
      responses:
        '201':
          description: Created local travel rule
          schema:
            $ref: '#/definitions/LocalTravelRule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/local-travel-rules/{id}':
    get:
      tags:
        - Local Travel Rules
      summary: Get local travel rule by ID
      description: |
        Retrieves local travel rule details.
      operationId: getLocalTravelRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Local travel rule details
          schema:
            $ref: '#/definitions/LocalTravelRule'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Local Travel Rules
      summary: Update local travel rule
      description: |
        Updates local travel rule properties.
      operationId: updateLocalTravelRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateLocalTravelRuleRequest'
      responses:
        '200':
          description: Updated local travel rule
          schema:
            $ref: '#/definitions/LocalTravelRule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Local Travel Rules
      summary: Delete local travel rule
      description: |
        Permanently removes a local travel rule.
      operationId: deleteLocalTravelRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Local travel rule deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /extended-travel-rules:
    get:
      tags:
        - Extended Travel Rules
      summary: List extended travel rules
      description: |
        Returns all extended travel rules for the tenant.
      operationId: listExtendedTravelRules
      responses:
        '200':
          description: List of extended travel rules
          schema:
            $ref: '#/definitions/ExtendedTravelRuleList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Extended Travel Rules
      summary: Create extended travel rule
      description: |
        Creates a new extended travel rule within a rule set.
      operationId: createExtendedTravelRule
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateExtendedTravelRuleRequest'
      responses:
        '201':
          description: Created extended travel rule
          schema:
            $ref: '#/definitions/ExtendedTravelRule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/extended-travel-rules/{id}':
    get:
      tags:
        - Extended Travel Rules
      summary: Get extended travel rule by ID
      description: |
        Retrieves extended travel rule details.
      operationId: getExtendedTravelRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Extended travel rule details
          schema:
            $ref: '#/definitions/ExtendedTravelRule'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Extended Travel Rules
      summary: Update extended travel rule
      description: |
        Updates extended travel rule properties.
      operationId: updateExtendedTravelRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateExtendedTravelRuleRequest'
      responses:
        '200':
          description: Updated extended travel rule
          schema:
            $ref: '#/definitions/ExtendedTravelRule'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Extended Travel Rules
      summary: Delete extended travel rule
      description: |
        Permanently removes an extended travel rule.
      operationId: deleteExtendedTravelRule
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Extended travel rule deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /travel-allowance/preview:
    post:
      tags:
        - Travel Allowance
      summary: Preview travel allowance calculation
      description: |
        Calculates a travel allowance preview based on the given trip parameters and rule set.
        Returns a breakdown of tax-free and taxable amounts.
      operationId: previewTravelAllowance
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/TravelAllowancePreviewRequest'
      responses:
        '200':
          description: Travel allowance preview result
          schema:
            $ref: '#/definitions/TravelAllowancePreview'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /shifts:
    get:
      tags:
        - Shifts
      summary: List shifts
      description: |
        Returns all shift definitions for the tenant.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: listShifts
      responses:
        '200':
          description: List of shifts
          schema:
            $ref: '#/definitions/ShiftList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Shifts
      summary: Create shift
      description: |
        Creates a new shift definition with a unique code.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: createShift
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateShiftRequest'
      responses:
        '201':
          description: Created shift
          schema:
            $ref: '#/definitions/Shift'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Code already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/shifts/{id}':
    get:
      tags:
        - Shifts
      summary: Get shift by ID
      description: |
        Retrieves shift definition details.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: getShift
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Shift details
          schema:
            $ref: '#/definitions/Shift'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Shifts
      summary: Update shift
      description: |
        Updates shift definition properties. Code cannot be changed.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: updateShift
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateShiftRequest'
      responses:
        '200':
          description: Updated shift
          schema:
            $ref: '#/definitions/Shift'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Shifts
      summary: Delete shift
      description: |
        Permanently removes a shift definition. Fails if shift assignments reference it.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: deleteShift
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Shift deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
        '409':
          description: Shift is in use by shift assignments
          schema:
            $ref: '#/definitions/ProblemDetails'
  /shift-assignments:
    get:
      tags:
        - Shift Assignments
      summary: List shift assignments
      description: |
        Returns all shift assignments for the tenant.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: listShiftAssignments
      responses:
        '200':
          description: List of shift assignments
          schema:
            $ref: '#/definitions/ShiftAssignmentList'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Shift Assignments
      summary: Create shift assignment
      description: |
        Assigns a shift to an employee for an optional date range.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: createShiftAssignment
      parameters:
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateShiftAssignmentRequest'
      responses:
        '201':
          description: Created shift assignment
          schema:
            $ref: '#/definitions/ShiftAssignment'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
  '/shift-assignments/{id}':
    get:
      tags:
        - Shift Assignments
      summary: Get shift assignment by ID
      description: |
        Retrieves shift assignment details.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: getShiftAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Shift assignment details
          schema:
            $ref: '#/definitions/ShiftAssignment'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Shift Assignments
      summary: Update shift assignment
      description: |
        Updates shift assignment properties (date range, notes, active status).
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: updateShiftAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpdateShiftAssignmentRequest'
      responses:
        '200':
          description: Updated shift assignment
          schema:
            $ref: '#/definitions/ShiftAssignment'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Shift Assignments
      summary: Delete shift assignment
      description: |
        Permanently removes a shift assignment.
        Placeholder - requires separate Plantafel documentation for full implementation.
      operationId: deleteShiftAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Shift assignment deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  /macros:
    get:
      tags:
        - Macros
      summary: List macros
      operationId: listMacros
      responses:
        '200':
          description: List of macros
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/paths/~1macros/post/responses/201/schema'
        '401':
          $ref: '#/responses/Unauthorized'
    post:
      tags:
        - Macros
      summary: Create macro
      operationId: createMacro
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - name
              - macro_type
              - action_type
            properties:
              name:
                type: string
              description:
                type: string
              macro_type:
                type: string
                enum:
                  - weekly
                  - monthly
              action_type:
                type: string
                enum:
                  - log_message
                  - recalculate_target_hours
                  - reset_flextime
                  - carry_forward_balance
              action_params:
                type: object
      responses:
        '201':
          description: Created macro
          schema:
            type: object
            required:
              - id
              - tenant_id
              - name
              - macro_type
              - action_type
            properties:
              id:
                type: string
                format: uuid
              tenant_id:
                type: string
                format: uuid
              name:
                type: string
                example: Weekly Target Hours Reset
              description:
                type: string
                x-nullable: true
              macro_type:
                type: string
                enum:
                  - weekly
                  - monthly
                description: weekly = executes on a specific weekday; monthly = executes on a specific day of month
              action_type:
                type: string
                enum:
                  - log_message
                  - recalculate_target_hours
                  - reset_flextime
                  - carry_forward_balance
              action_params:
                type: object
                description: Action-specific configuration parameters
              is_active:
                type: boolean
              assignments:
                type: array
                items:
                  $ref: '#/paths/~1macros~1%7Bid%7D~1assignments/post/responses/201/schema'
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '409':
          description: Macro name already exists
          schema:
            $ref: '#/definitions/ProblemDetails'
  '/macros/{id}':
    get:
      tags:
        - Macros
      summary: Get macro by ID
      operationId: getMacro
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Macro details
          schema:
            $ref: '#/paths/~1macros/post/responses/201/schema'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    patch:
      tags:
        - Macros
      summary: Update macro
      operationId: updateMacro
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              name:
                type: string
              description:
                type: string
              macro_type:
                type: string
                enum:
                  - weekly
                  - monthly
              action_type:
                type: string
                enum:
                  - log_message
                  - recalculate_target_hours
                  - reset_flextime
                  - carry_forward_balance
              action_params:
                type: object
              is_active:
                type: boolean
      responses:
        '200':
          description: Updated macro
          schema:
            $ref: '#/paths/~1macros/post/responses/201/schema'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Macros
      summary: Delete macro
      operationId: deleteMacro
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Macro deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/macros/{id}/assignments':
    get:
      tags:
        - Macros
      summary: List macro assignments
      operationId: listMacroAssignments
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: List of assignments
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/paths/~1macros~1%7Bid%7D~1assignments/post/responses/201/schema'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    post:
      tags:
        - Macros
      summary: Create macro assignment
      operationId: createMacroAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - execution_day
            properties:
              tariff_id:
                type: string
                format: uuid
                description: Mutually exclusive with employee_id
              employee_id:
                type: string
                format: uuid
                description: Mutually exclusive with tariff_id
              execution_day:
                type: integer
                description: 'For weekly: 0-6 (Sun-Sat). For monthly: 1-31.'
      responses:
        '201':
          description: Created assignment
          schema:
            type: object
            required:
              - id
              - tenant_id
              - macro_id
              - execution_day
            properties:
              id:
                type: string
                format: uuid
              tenant_id:
                type: string
                format: uuid
              macro_id:
                type: string
                format: uuid
              tariff_id:
                type: string
                format: uuid
                x-nullable: true
                description: Tariff this macro is assigned to (mutually exclusive with employee_id)
              employee_id:
                type: string
                format: uuid
                x-nullable: true
                description: Employee this macro is assigned to (mutually exclusive with tariff_id)
              execution_day:
                type: integer
                description: 'For weekly macros: 0=Sunday..6=Saturday. For monthly macros: 1-31 (falls back to last day of month if exceeds month length)'
              is_active:
                type: boolean
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/macros/{id}/assignments/{assignmentId}':
    patch:
      tags:
        - Macros
      summary: Update macro assignment
      operationId: updateMacroAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: assignmentId
          in: path
          required: true
          type: string
          format: uuid
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              execution_day:
                type: integer
              is_active:
                type: boolean
      responses:
        '200':
          description: Updated assignment
          schema:
            $ref: '#/paths/~1macros~1%7Bid%7D~1assignments/post/responses/201/schema'
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
    delete:
      tags:
        - Macros
      summary: Delete macro assignment
      operationId: deleteMacroAssignment
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: assignmentId
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '204':
          description: Assignment deleted
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/macros/{id}/execute':
    post:
      tags:
        - Macros
      summary: Trigger macro execution
      operationId: triggerMacroExecution
      description: |
        Manually triggers execution of a macro. The macro must be active.
        Weekly macros execute on their configured weekday (0=Sunday..6=Saturday).
        Monthly macros execute on their configured day of month (1-31).
        If a monthly macro is configured for day 31 but the month has fewer days,
        execution falls back to the last day of the month.
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Execution result
          schema:
            type: object
            required:
              - id
              - tenant_id
              - macro_id
              - status
              - trigger_type
            properties:
              id:
                type: string
                format: uuid
              tenant_id:
                type: string
                format: uuid
              macro_id:
                type: string
                format: uuid
              assignment_id:
                type: string
                format: uuid
                x-nullable: true
              status:
                type: string
                enum:
                  - pending
                  - running
                  - completed
                  - failed
              trigger_type:
                type: string
                enum:
                  - scheduled
                  - manual
              triggered_by:
                type: string
                format: uuid
                x-nullable: true
              started_at:
                type: string
                format: date-time
                x-nullable: true
              completed_at:
                type: string
                format: date-time
                x-nullable: true
              result:
                type: object
              error_message:
                type: string
                x-nullable: true
              created_at:
                type: string
                format: date-time
        '400':
          $ref: '#/responses/BadRequest'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/macros/{id}/executions':
    get:
      tags:
        - Macros
      summary: List macro executions
      operationId: listMacroExecutions
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
        - name: limit
          in: query
          type: integer
          default: 20
      responses:
        '200':
          description: List of executions
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: '#/paths/~1macros~1%7Bid%7D~1execute/post/responses/200/schema'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
  '/macro-executions/{id}':
    get:
      tags:
        - Macros
      summary: Get macro execution by ID
      operationId: getMacroExecution
      parameters:
        - name: id
          in: path
          required: true
          type: string
          format: uuid
      responses:
        '200':
          description: Execution details
          schema:
            $ref: '#/paths/~1macros~1%7Bid%7D~1execute/post/responses/200/schema'
        '401':
          $ref: '#/responses/Unauthorized'
        '404':
          $ref: '#/responses/NotFound'
definitions:
  UUID:
    type: string
    format: uuid
    example: 550e8400-e29b-41d4-a716-446655440000
  Timestamp:
    type: string
    format: date-time
    example: '2024-01-15T10:30:00Z'
  ProblemDetails:
    type: object
    required:
      - type
      - title
      - status
    properties:
      type:
        type: string
        format: uri
        description: URI identifying the problem type
        example: 'https://api.example.com/problems/validation-error'
      title:
        type: string
        description: Short human-readable summary
        example: Validation Error
      status:
        type: integer
        description: HTTP status code
        example: 400
      detail:
        type: string
        description: Human-readable explanation
        example: The 'content' field is required
      instance:
        type: string
        format: uri
        description: URI identifying the specific occurrence
      errors:
        type: array
        description: Field-level validation errors
        items:
          type: object
          properties:
            field:
              type: string
              example: content
            message:
              type: string
              example: Field is required
  PaginationMeta:
    type: object
    properties:
      total:
        type: integer
        description: Total number of items
        example: 150
      limit:
        type: integer
        description: Items per page
        example: 20
      has_more:
        type: boolean
        description: Whether more items exist
        example: true
      next_cursor:
        type: string
        description: Cursor for next page
        example: eyJpZCI6IjEyMzQ1Njc4OTAifQ==
  User:
    type: object
    required:
      - id
      - email
      - display_name
      - role
      - created_at
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
        x-nullable: true
      email:
        type: string
        format: email
        example: user@example.com
      username:
        type: string
        x-nullable: true
        example: jdoe
      display_name:
        type: string
        example: John Doe
      avatar_url:
        type: string
        format: uri
        x-nullable: true
        example: 'https://storage.example.com/avatars/abc123.jpg'
      role:
        type: string
        enum:
          - user
          - admin
        example: user
      sso_id:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      is_locked:
        type: boolean
        example: false
      data_scope_type:
        type: string
        enum:
          - all
          - tenant
          - department
          - employee
        example: all
      data_scope_tenant_ids:
        type: array
        items:
          type: string
          format: uuid
      data_scope_department_ids:
        type: array
        items:
          type: string
          format: uuid
      data_scope_employee_ids:
        type: array
        items:
          type: string
          format: uuid
      employee_id:
        type: string
        format: uuid
        x-nullable: true
        description: 'ID of the linked employee record, if any'
      user_group_id:
        type: string
        format: uuid
        x-nullable: true
        description: 'ID of the assigned user group, if any'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  UserSummary:
    type: object
    required:
      - id
      - display_name
    properties:
      id:
        type: string
        format: uuid
      display_name:
        type: string
        example: John Doe
      avatar_url:
        type: string
        format: uri
  UpdateUserRequest:
    type: object
    properties:
      display_name:
        type: string
        minLength: 2
        maxLength: 255
      avatar_url:
        type: string
        format: uri
      user_group_id:
        type: string
        format: uuid
        x-nullable: true
      username:
        type: string
        x-nullable: true
      employee_id:
        type: string
        format: uuid
        x-nullable: true
      sso_id:
        type: string
        x-nullable: true
      is_active:
        type: boolean
      is_locked:
        type: boolean
      data_scope_type:
        type: string
        enum:
          - all
          - tenant
          - department
          - employee
      data_scope_tenant_ids:
        type: array
        items:
          type: string
          format: uuid
      data_scope_department_ids:
        type: array
        items:
          type: string
          format: uuid
      data_scope_employee_ids:
        type: array
        items:
          type: string
          format: uuid
  CreateUserRequest:
    type: object
    required:
      - email
      - display_name
    properties:
      tenant_id:
        type: string
        format: uuid
        x-nullable: true
      email:
        type: string
        format: email
        example: user@example.com
      username:
        type: string
        x-nullable: true
      display_name:
        type: string
        example: John Doe
      password:
        type: string
        format: password
      sso_id:
        type: string
        x-nullable: true
      user_group_id:
        type: string
        format: uuid
        x-nullable: true
      employee_id:
        type: string
        format: uuid
        x-nullable: true
      is_active:
        type: boolean
      is_locked:
        type: boolean
      data_scope_type:
        type: string
        enum:
          - all
          - tenant
          - department
          - employee
      data_scope_tenant_ids:
        type: array
        items:
          type: string
          format: uuid
      data_scope_department_ids:
        type: array
        items:
          type: string
          format: uuid
      data_scope_employee_ids:
        type: array
        items:
          type: string
          format: uuid
  ChangePasswordRequest:
    type: object
    required:
      - new_password
    properties:
      current_password:
        type: string
        format: password
      new_password:
        type: string
        format: password
  UserList:
    type: object
    required:
      - data
      - meta
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/User'
      meta:
        $ref: '#/definitions/PaginationMeta'
  CurrentUserPermissions:
    type: object
    required:
      - permission_ids
      - is_admin
    properties:
      permission_ids:
        type: array
        items:
          type: string
          format: uuid
      is_admin:
        type: boolean
  CurrentUserPermissionsResponse:
    type: object
    required:
      - data
    properties:
      data:
        $ref: '#/definitions/CurrentUserPermissions'
  Notification:
    type: object
    required:
      - id
      - tenant_id
      - user_id
      - type
      - title
      - message
      - created_at
      - updated_at
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      user_id:
        type: string
        format: uuid
      type:
        type: string
        enum:
          - approvals
          - errors
          - reminders
          - system
      title:
        type: string
        example: Absence approved
      message:
        type: string
        example: Vacation on 2026-01-20 was approved.
      link:
        type: string
        x-nullable: true
      read_at:
        type: string
        format: date-time
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  NotificationList:
    type: object
    required:
      - data
      - total
      - unread_count
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Notification'
      total:
        type: integer
        format: int64
        example: 50
      unread_count:
        type: integer
        format: int64
        example: 3
  NotificationPreferences:
    type: object
    required:
      - id
      - tenant_id
      - user_id
      - approvals_enabled
      - errors_enabled
      - reminders_enabled
      - system_enabled
      - created_at
      - updated_at
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      user_id:
        type: string
        format: uuid
      approvals_enabled:
        type: boolean
      errors_enabled:
        type: boolean
      reminders_enabled:
        type: boolean
      system_enabled:
        type: boolean
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  UpdateNotificationPreferencesRequest:
    type: object
    required:
      - approvals_enabled
      - errors_enabled
      - reminders_enabled
      - system_enabled
    properties:
      approvals_enabled:
        type: boolean
      errors_enabled:
        type: boolean
      reminders_enabled:
        type: boolean
      system_enabled:
        type: boolean
  MarkNotificationsReadResponse:
    type: object
    required:
      - count
    properties:
      count:
        type: integer
        format: int64
        example: 5
  Tenant:
    type: object
    required:
      - id
      - name
      - slug
      - is_active
      - vacation_basis
      - created_at
    properties:
      id:
        type: string
        format: uuid
      name:
        type: string
        example: Acme Corp
      slug:
        type: string
        example: acme-corp
      address_street:
        type: string
        example: Main Street 1
      address_zip:
        type: string
        example: '10115'
      address_city:
        type: string
        example: Berlin
      address_country:
        type: string
        example: DE
      phone:
        type: string
        example: +49 30 123456
      email:
        type: string
        format: email
        example: info@example.com
      payroll_export_base_path:
        type: string
        example: /var/lib/payroll/exports
      notes:
        type: string
        example: Primary HQ tenant
      vacation_basis:
        type: string
        enum:
          - calendar_year
          - entry_date
        example: calendar_year
      settings:
        type: object
        additionalProperties: true
        example: {}
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateTenantRequest:
    type: object
    required:
      - name
      - slug
      - address_street
      - address_zip
      - address_city
      - address_country
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
        example: Acme Corp
      slug:
        type: string
        minLength: 3
        maxLength: 100
        pattern: '^[a-z0-9-]+$'
        example: acme-corp
      address_street:
        type: string
        minLength: 1
        maxLength: 255
        example: Main Street 1
      address_zip:
        type: string
        minLength: 1
        maxLength: 20
        example: '10115'
      address_city:
        type: string
        minLength: 1
        maxLength: 100
        example: Berlin
      address_country:
        type: string
        minLength: 1
        maxLength: 100
        example: DE
      phone:
        type: string
        x-nullable: true
        maxLength: 50
        example: +49 30 123456
      email:
        type: string
        format: email
        x-nullable: true
        maxLength: 255
        example: info@example.com
      payroll_export_base_path:
        type: string
        x-nullable: true
        example: /var/lib/payroll/exports
      notes:
        type: string
        x-nullable: true
        example: Primary HQ tenant
      vacation_basis:
        type: string
        enum:
          - calendar_year
          - entry_date
        example: calendar_year
  UpdateTenantRequest:
    type: object
    properties:
      name:
        type: string
        x-nullable: true
        minLength: 1
        maxLength: 255
      address_street:
        type: string
        x-nullable: true
        minLength: 1
        maxLength: 255
      address_zip:
        type: string
        x-nullable: true
        minLength: 1
        maxLength: 20
      address_city:
        type: string
        x-nullable: true
        minLength: 1
        maxLength: 100
      address_country:
        type: string
        x-nullable: true
        minLength: 1
        maxLength: 100
      phone:
        type: string
        x-nullable: true
        maxLength: 50
      email:
        type: string
        format: email
        x-nullable: true
        maxLength: 255
      payroll_export_base_path:
        type: string
        x-nullable: true
      notes:
        type: string
        x-nullable: true
      vacation_basis:
        type: string
        x-nullable: true
        enum:
          - calendar_year
          - entry_date
      is_active:
        type: boolean
        x-nullable: true
  TenantList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Tenant'
  Holiday:
    type: object
    required:
      - id
      - tenant_id
      - holiday_date
      - name
      - category
      - applies_to_all
      - created_at
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      holiday_date:
        type: string
        format: date
        example: '2024-01-01'
      name:
        type: string
        example: New Year's Day
      category:
        type: integer
        enum:
          - 1
          - 2
          - 3
        description: 'Holiday credit category (1=full, 2=half, 3=custom)'
        example: 1
      applies_to_all:
        type: boolean
        example: true
      department_id:
        type: string
        format: uuid
        description: Optional department restriction
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  HolidayCategoryOverride:
    type: object
    required:
      - month
      - day
      - category
    properties:
      month:
        type: integer
        minimum: 1
        maximum: 12
        example: 12
      day:
        type: integer
        minimum: 1
        maximum: 31
        example: 24
      category:
        type: integer
        enum:
          - 1
          - 2
          - 3
        description: 'Holiday credit category (1=full, 2=half, 3=custom)'
        example: 2
  CreateHolidayRequest:
    type: object
    required:
      - holiday_date
      - name
      - category
    properties:
      holiday_date:
        type: string
        format: date
        example: '2024-01-01'
      name:
        type: string
        minLength: 1
        maxLength: 255
        example: New Year's Day
      category:
        type: integer
        enum:
          - 1
          - 2
          - 3
        description: 'Holiday credit category (1=full, 2=half, 3=custom)'
        example: 1
      applies_to_all:
        type: boolean
        default: true
      department_id:
        type: string
        format: uuid
        description: Optional department restriction
  UpdateHolidayRequest:
    type: object
    properties:
      holiday_date:
        type: string
        format: date
      name:
        type: string
        minLength: 1
        maxLength: 255
      category:
        type: integer
        enum:
          - 1
          - 2
          - 3
        description: 'Holiday credit category (1=full, 2=half, 3=custom)'
      applies_to_all:
        type: boolean
      department_id:
        type: string
        format: uuid
  GenerateHolidaysRequest:
    type: object
    required:
      - year
      - state
    properties:
      year:
        type: integer
        example: 2026
      state:
        type: string
        enum:
          - BW
          - BY
          - BE
          - BB
          - HB
          - HH
          - HE
          - MV
          - NI
          - NW
          - RP
          - SL
          - SN
          - ST
          - SH
          - TH
        description: German federal state (Bundesland) code
      skip_existing:
        type: boolean
        default: true
  CopyHolidaysRequest:
    type: object
    required:
      - source_year
      - target_year
    properties:
      source_year:
        type: integer
        example: 2025
      target_year:
        type: integer
        example: 2026
      category_overrides:
        type: array
        items:
          $ref: '#/definitions/HolidayCategoryOverride'
      skip_existing:
        type: boolean
        default: true
  HolidayList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Holiday'
  Employee:
    type: object
    required:
      - id
      - tenant_id
      - personnel_number
      - first_name
      - last_name
      - entry_date
      - is_active
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      personnel_number:
        type: string
        example: E001
      first_name:
        type: string
        example: John
      last_name:
        type: string
        example: Doe
      email:
        type: string
        format: email
        x-nullable: true
      phone:
        type: string
        x-nullable: true
      entry_date:
        type: string
        format: date
        example: '2024-01-15'
      exit_date:
        type: string
        format: date
        x-nullable: true
      department_id:
        type: string
        format: uuid
        x-nullable: true
      cost_center_id:
        type: string
        format: uuid
        x-nullable: true
      employment_type_id:
        type: string
        format: uuid
        x-nullable: true
      tariff_id:
        type: string
        format: uuid
        x-nullable: true
      weekly_hours:
        type: number
        format: decimal
        example: 40
      vacation_days_per_year:
        type: number
        format: decimal
        example: 30
      is_active:
        type: boolean
        example: true
      exit_reason:
        type: string
        x-nullable: true
      notes:
        type: string
        x-nullable: true
      address_street:
        type: string
        x-nullable: true
      address_zip:
        type: string
        x-nullable: true
      address_city:
        type: string
        x-nullable: true
      address_country:
        type: string
        x-nullable: true
      birth_date:
        type: string
        format: date
        x-nullable: true
      gender:
        type: string
        enum:
          - male
          - female
          - diverse
          - not_specified
        x-nullable: true
      nationality:
        type: string
        x-nullable: true
      religion:
        type: string
        x-nullable: true
      marital_status:
        type: string
        enum:
          - single
          - married
          - divorced
          - widowed
          - registered_partnership
          - not_specified
        x-nullable: true
      birth_place:
        type: string
        x-nullable: true
      birth_country:
        type: string
        x-nullable: true
      room_number:
        type: string
        x-nullable: true
      photo_url:
        type: string
        x-nullable: true
      employee_group_id:
        type: string
        format: uuid
        x-nullable: true
      workflow_group_id:
        type: string
        format: uuid
        x-nullable: true
      activity_group_id:
        type: string
        format: uuid
        x-nullable: true
      default_order_id:
        type: string
        format: uuid
        x-nullable: true
      default_activity_id:
        type: string
        format: uuid
        x-nullable: true
      part_time_percent:
        type: number
        format: decimal
        x-nullable: true
      disability_flag:
        type: boolean
      daily_target_hours:
        type: number
        format: decimal
        x-nullable: true
      weekly_target_hours:
        type: number
        format: decimal
        x-nullable: true
      monthly_target_hours:
        type: number
        format: decimal
        x-nullable: true
      annual_target_hours:
        type: number
        format: decimal
        x-nullable: true
      work_days_per_week:
        type: number
        format: decimal
        x-nullable: true
      calculation_start_date:
        type: string
        format: date
        x-nullable: true
      pin:
        type: string
        description: Employee PIN (included in detail view only)
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      department:
        allOf:
          - $ref: '#/definitions/Department'
        x-nullable: true
      cost_center:
        allOf:
          - $ref: '#/definitions/CostCenter'
        x-nullable: true
      employment_type:
        allOf:
          - $ref: '#/definitions/EmploymentType'
        x-nullable: true
      tariff:
        allOf:
          - $ref: '#/definitions/EmployeeTariffAssignment/properties/tariff'
        x-nullable: true
      employee_group:
        allOf:
          - $ref: '#/definitions/EmployeeGroup'
        x-nullable: true
      workflow_group:
        allOf:
          - $ref: '#/definitions/WorkflowGroup'
        x-nullable: true
      activity_group:
        allOf:
          - $ref: '#/definitions/ActivityGroup'
        x-nullable: true
      contacts:
        type: array
        items:
          type: object
          required:
            - id
            - employee_id
            - contact_type
            - value
          properties:
            id:
              type: string
              format: uuid
            employee_id:
              type: string
              format: uuid
            contact_type:
              type: string
              enum:
                - email
                - phone
                - mobile
                - emergency
              example: email
              description: 'Deprecated: Use contact_kind_id instead'
            contact_kind_id:
              type: string
              format: uuid
              x-nullable: true
              description: Reference to configurable contact kind. Replaces contact_type.
            value:
              type: string
              example: john.doe@example.com
            label:
              type: string
              x-nullable: true
              example: Work
            is_primary:
              type: boolean
              example: false
            created_at:
              type: string
              format: date-time
            updated_at:
              type: string
              format: date-time
      cards:
        type: array
        items:
          type: object
          required:
            - id
            - tenant_id
            - employee_id
            - card_number
            - valid_from
          properties:
            id:
              type: string
              format: uuid
            tenant_id:
              type: string
              format: uuid
            employee_id:
              type: string
              format: uuid
            card_number:
              type: string
              example: CARD001
            card_type:
              type: string
              enum:
                - rfid
                - barcode
                - pin
              default: rfid
            valid_from:
              type: string
              format: date
            valid_to:
              type: string
              format: date
              x-nullable: true
            is_active:
              type: boolean
              example: true
            deactivated_at:
              type: string
              format: date-time
              x-nullable: true
            deactivation_reason:
              type: string
              x-nullable: true
            created_at:
              type: string
              format: date-time
            updated_at:
              type: string
              format: date-time
  EmployeeSummary:
    type: object
    required:
      - id
      - personnel_number
      - first_name
      - last_name
    properties:
      id:
        type: string
        format: uuid
      personnel_number:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      department_id:
        type: string
        format: uuid
        x-nullable: true
      tariff_id:
        type: string
        format: uuid
        x-nullable: true
      is_active:
        type: boolean
  CreateEmployeeRequest:
    type: object
    required:
      - personnel_number
      - first_name
      - last_name
      - entry_date
    properties:
      personnel_number:
        type: string
        minLength: 1
        maxLength: 50
      pin:
        type: string
        maxLength: 20
        description: 'Optional PIN. If not provided, auto-assigned as next available integer.'
      first_name:
        type: string
        minLength: 1
        maxLength: 100
      last_name:
        type: string
        minLength: 1
        maxLength: 100
      email:
        type: string
        format: email
      phone:
        type: string
      entry_date:
        type: string
        format: date
      exit_date:
        type: string
        format: date
      department_id:
        type: string
        format: uuid
      cost_center_id:
        type: string
        format: uuid
      employment_type_id:
        type: string
        format: uuid
      tariff_id:
        type: string
        format: uuid
        x-nullable: true
      weekly_hours:
        type: number
        format: decimal
      vacation_days_per_year:
        type: number
        format: decimal
      exit_reason:
        type: string
      notes:
        type: string
      address_street:
        type: string
      address_zip:
        type: string
      address_city:
        type: string
      address_country:
        type: string
      birth_date:
        type: string
        format: date
      gender:
        type: string
        enum:
          - male
          - female
          - diverse
          - not_specified
      nationality:
        type: string
      religion:
        type: string
      marital_status:
        type: string
        enum:
          - single
          - married
          - divorced
          - widowed
          - registered_partnership
          - not_specified
      birth_place:
        type: string
      birth_country:
        type: string
      room_number:
        type: string
      photo_url:
        type: string
      employee_group_id:
        type: string
        format: uuid
      workflow_group_id:
        type: string
        format: uuid
      activity_group_id:
        type: string
        format: uuid
      default_order_id:
        type: string
        format: uuid
      default_activity_id:
        type: string
        format: uuid
      part_time_percent:
        type: number
        format: decimal
      disability_flag:
        type: boolean
      daily_target_hours:
        type: number
        format: decimal
      weekly_target_hours:
        type: number
        format: decimal
      monthly_target_hours:
        type: number
        format: decimal
      annual_target_hours:
        type: number
        format: decimal
      work_days_per_week:
        type: number
        format: decimal
  UpdateEmployeeRequest:
    type: object
    properties:
      first_name:
        type: string
        minLength: 1
        maxLength: 100
      last_name:
        type: string
        minLength: 1
        maxLength: 100
      email:
        type: string
        format: email
      phone:
        type: string
      exit_date:
        type: string
        format: date
      department_id:
        type: string
        format: uuid
      cost_center_id:
        type: string
        format: uuid
      employment_type_id:
        type: string
        format: uuid
      tariff_id:
        type: string
        format: uuid
        x-nullable: true
      weekly_hours:
        type: number
        format: decimal
      vacation_days_per_year:
        type: number
        format: decimal
      exit_reason:
        type: string
      notes:
        type: string
      address_street:
        type: string
      address_zip:
        type: string
      address_city:
        type: string
      address_country:
        type: string
      birth_date:
        type: string
        format: date
      gender:
        type: string
        enum:
          - male
          - female
          - diverse
          - not_specified
      nationality:
        type: string
      religion:
        type: string
      marital_status:
        type: string
        enum:
          - single
          - married
          - divorced
          - widowed
          - registered_partnership
          - not_specified
      birth_place:
        type: string
      birth_country:
        type: string
      room_number:
        type: string
      photo_url:
        type: string
      employee_group_id:
        type: string
        format: uuid
        x-nullable: true
      workflow_group_id:
        type: string
        format: uuid
        x-nullable: true
      activity_group_id:
        type: string
        format: uuid
        x-nullable: true
      default_order_id:
        type: string
        format: uuid
        x-nullable: true
      default_activity_id:
        type: string
        format: uuid
        x-nullable: true
      part_time_percent:
        type: number
        format: decimal
      disability_flag:
        type: boolean
      daily_target_hours:
        type: number
        format: decimal
      weekly_target_hours:
        type: number
        format: decimal
      monthly_target_hours:
        type: number
        format: decimal
      annual_target_hours:
        type: number
        format: decimal
      work_days_per_week:
        type: number
        format: decimal
  CreateEmployeeContactRequest:
    type: object
    required:
      - contact_type
      - value
    properties:
      contact_type:
        type: string
        enum:
          - email
          - phone
          - mobile
          - emergency
        description: 'Deprecated: Use contact_kind_id instead'
      contact_kind_id:
        type: string
        format: uuid
        description: Reference to configurable contact kind. Replaces contact_type.
      value:
        type: string
        minLength: 1
        maxLength: 255
      label:
        type: string
        maxLength: 100
      is_primary:
        type: boolean
        default: false
  CreateEmployeeCardRequest:
    type: object
    required:
      - card_number
      - valid_from
    properties:
      card_number:
        type: string
        minLength: 1
        maxLength: 100
      card_type:
        type: string
        enum:
          - rfid
          - barcode
          - pin
        default: rfid
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
  EmployeeList:
    type: object
    required:
      - data
      - total
      - page
      - limit
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Employee'
      total:
        type: integer
        example: 150
      page:
        type: integer
        example: 1
      limit:
        type: integer
  BulkTariffAssignmentRequest:
    type: object
    properties:
      employee_ids:
        type: array
        items:
          type: string
          format: uuid
      filter:
        type: object
        properties:
          q:
            type: string
          department_id:
            type: string
            format: uuid
          is_active:
            type: boolean
      tariff_id:
        type: string
        format: uuid
        x-nullable: true
  BulkTariffAssignmentResponse:
    type: object
    required:
      - updated
      - skipped
    properties:
      updated:
        type: integer
      skipped:
        type: integer
        example: 20
  Department:
    type: object
    required:
      - id
      - tenant_id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      name:
        type: string
        example: Engineering
      code:
        type: string
        example: ENG
      description:
        type: string
        x-nullable: true
      parent_id:
        type: string
        format: uuid
        x-nullable: true
        description: Parent department for hierarchical structure
      manager_id:
        type: string
        format: uuid
        x-nullable: true
        description: Employee who manages this department
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      parent:
        allOf:
          - $ref: '#/definitions/DepartmentSummary'
        x-nullable: true
      children:
        type: array
        items:
          $ref: '#/definitions/DepartmentSummary'
  DepartmentNode:
    type: object
    description: A node in the department hierarchy tree
    required:
      - department
    properties:
      department:
        $ref: '#/definitions/Department'
      children:
        type: array
        items:
          $ref: '#/definitions/DepartmentNode'
  CreateDepartmentRequest:
    type: object
    required:
      - name
      - code
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 20
      description:
        type: string
      parent_id:
        type: string
        format: uuid
      manager_id:
        type: string
        format: uuid
  UpdateDepartmentRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 20
      description:
        type: string
      parent_id:
        type: string
        format: uuid
      manager_id:
        type: string
        format: uuid
      is_active:
        type: boolean
  DepartmentList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Department'
  DayPlan:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
      - plan_type
      - regular_hours
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: PLAN-001
      name:
        type: string
        example: Standard Day
      description:
        type: string
        x-nullable: true
      plan_type:
        type: string
        enum:
          - fixed
          - flextime
        example: fixed
      come_from:
        type: integer
        description: Earliest allowed arrival (minutes from midnight)
        x-nullable: true
        example: 420
      come_to:
        type: integer
        description: Latest allowed arrival (minutes from midnight)
        x-nullable: true
        example: 540
      go_from:
        type: integer
        description: Earliest allowed departure (minutes from midnight)
        x-nullable: true
        example: 960
      go_to:
        type: integer
        description: Latest allowed departure (minutes from midnight)
        x-nullable: true
        example: 1080
      core_start:
        type: integer
        description: Core time start (minutes from midnight)
        x-nullable: true
        example: 540
      core_end:
        type: integer
        description: Core time end (minutes from midnight)
        x-nullable: true
        example: 960
      regular_hours:
        type: integer
        description: Target working hours in minutes
        example: 480
      regular_hours_2:
        type: integer
        description: Alternative target hours for absence days (minutes)
        x-nullable: true
      from_employee_master:
        type: boolean
        description: Get target hours from employee master data
      tolerance_come_plus:
        type: integer
        description: Tolerance for late arrival (minutes)
        example: 0
      tolerance_come_minus:
        type: integer
        description: Tolerance for early arrival (minutes)
        example: 0
      tolerance_go_plus:
        type: integer
        description: Tolerance for late departure (minutes)
        example: 0
      tolerance_go_minus:
        type: integer
        description: Tolerance for early departure (minutes)
        example: 0
      variable_work_time:
        type: boolean
        description: Enable tolerance_come_minus for fixed working time plans
      rounding_come_type:
        type: string
        enum:
          - none
          - up
          - down
          - nearest
          - add
          - subtract
        x-nullable: true
      rounding_come_interval:
        type: integer
        description: Rounding interval in minutes
        x-nullable: true
      rounding_come_add_value:
        type: integer
        description: Value to add/subtract for arrival (minutes)
        x-nullable: true
      rounding_go_type:
        type: string
        enum:
          - none
          - up
          - down
          - nearest
          - add
          - subtract
        x-nullable: true
      rounding_go_interval:
        type: integer
        description: Rounding interval in minutes
        x-nullable: true
      rounding_go_add_value:
        type: integer
        description: Value to add/subtract for departure (minutes)
        x-nullable: true
      round_all_bookings:
        type: boolean
        description: Round all bookings vs first arrival/last departure only
      min_work_time:
        type: integer
        description: Minimum work time in minutes
        x-nullable: true
      max_net_work_time:
        type: integer
        description: Maximum net work time in minutes
        x-nullable: true
      holiday_credit_cat1:
        type: integer
        description: Full holiday time credit (minutes)
        x-nullable: true
      holiday_credit_cat2:
        type: integer
        description: Half holiday time credit (minutes)
        x-nullable: true
      holiday_credit_cat3:
        type: integer
        description: Custom category holiday credit (minutes)
        x-nullable: true
      vacation_deduction:
        type: number
        format: float
        description: Vacation days deducted per day (default 1.0)
      no_booking_behavior:
        type: string
        enum:
          - error
          - deduct_target
          - vocational_school
          - adopt_target
          - target_with_order
        description: Behavior when no bookings recorded
      day_change_behavior:
        type: string
        enum:
          - none
          - at_arrival
          - at_departure
          - auto_complete
        description: How to handle cross-midnight shifts
      shift_detect_arrive_from:
        type: integer
        description: Shift detection arrival window start (minutes)
        x-nullable: true
      shift_detect_arrive_to:
        type: integer
        description: Shift detection arrival window end (minutes)
        x-nullable: true
      shift_detect_depart_from:
        type: integer
        description: Shift detection departure window start (minutes)
        x-nullable: true
      shift_detect_depart_to:
        type: integer
        description: Shift detection departure window end (minutes)
        x-nullable: true
      shift_alt_plan_1:
        type: string
        format: uuid
        x-nullable: true
      shift_alt_plan_2:
        type: string
        format: uuid
        x-nullable: true
      shift_alt_plan_3:
        type: string
        format: uuid
        x-nullable: true
      shift_alt_plan_4:
        type: string
        format: uuid
        x-nullable: true
      shift_alt_plan_5:
        type: string
        format: uuid
        x-nullable: true
      shift_alt_plan_6:
        type: string
        format: uuid
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      breaks:
        type: array
        items:
          $ref: '#/definitions/DayPlanBreak'
      bonuses:
        type: array
        items:
          $ref: '#/definitions/DayPlanBonus'
  DayPlanSummary:
    type: object
    required:
      - id
      - code
      - name
      - plan_type
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      plan_type:
        type: string
  DayPlanBreak:
    type: object
    required:
      - id
      - day_plan_id
      - break_type
      - duration
    properties:
      id:
        type: string
        format: uuid
      day_plan_id:
        type: string
        format: uuid
      break_type:
        type: string
        enum:
          - fixed
          - variable
          - minimum
        example: fixed
      start_time:
        type: integer
        description: Break start (minutes from midnight)
        x-nullable: true
      end_time:
        type: integer
        description: Break end (minutes from midnight)
        x-nullable: true
      duration:
        type: integer
        description: Break duration in minutes
        example: 30
      after_work_minutes:
        type: integer
        description: Auto-deduct break after this much work time
        x-nullable: true
      auto_deduct:
        type: boolean
        description: Automatically deduct break
        example: true
      is_paid:
        type: boolean
        description: Is this break paid
        example: false
      minutes_difference:
        type: boolean
        description: Proportional deduction when near threshold (for minimum breaks)
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  DayPlanBonus:
    type: object
    required:
      - id
      - day_plan_id
      - account_id
      - time_from
      - time_to
      - calculation_type
      - value_minutes
    properties:
      id:
        type: string
        format: uuid
      day_plan_id:
        type: string
        format: uuid
      account_id:
        type: string
        format: uuid
      time_from:
        type: integer
        description: Bonus time range start (minutes from midnight)
        example: 1200
      time_to:
        type: integer
        description: Bonus time range end (minutes from midnight)
        example: 1380
      calculation_type:
        type: string
        enum:
          - fixed
          - per_minute
          - percentage
        example: per_minute
      value_minutes:
        type: integer
        description: Bonus value in minutes
        example: 15
      min_work_minutes:
        type: integer
        description: Minimum work required for bonus
        x-nullable: true
      applies_on_holiday:
        type: boolean
        example: false
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      account:
        allOf:
          - $ref: '#/definitions/Account'
        x-nullable: true
  CreateDayPlanRequest:
    type: object
    required:
      - code
      - name
      - plan_type
      - regular_hours
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 20
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      plan_type:
        type: string
        enum:
          - fixed
          - flextime
      come_from:
        type: integer
      come_to:
        type: integer
      go_from:
        type: integer
      go_to:
        type: integer
      core_start:
        type: integer
      core_end:
        type: integer
      regular_hours:
        type: integer
      regular_hours_2:
        type: integer
      from_employee_master:
        type: boolean
      tolerance_come_plus:
        type: integer
      tolerance_come_minus:
        type: integer
      tolerance_go_plus:
        type: integer
      tolerance_go_minus:
        type: integer
      variable_work_time:
        type: boolean
      rounding_come_type:
        type: string
        enum:
          - none
          - up
          - down
          - nearest
          - add
          - subtract
      rounding_come_interval:
        type: integer
      rounding_come_add_value:
        type: integer
      rounding_go_type:
        type: string
        enum:
          - none
          - up
          - down
          - nearest
          - add
          - subtract
      rounding_go_interval:
        type: integer
      rounding_go_add_value:
        type: integer
      round_all_bookings:
        type: boolean
      min_work_time:
        type: integer
      max_net_work_time:
        type: integer
      holiday_credit_cat1:
        type: integer
      holiday_credit_cat2:
        type: integer
      holiday_credit_cat3:
        type: integer
      vacation_deduction:
        type: number
        format: float
      no_booking_behavior:
        type: string
        enum:
          - error
          - deduct_target
          - vocational_school
          - adopt_target
          - target_with_order
      day_change_behavior:
        type: string
        enum:
          - none
          - at_arrival
          - at_departure
          - auto_complete
      shift_detect_arrive_from:
        type: integer
      shift_detect_arrive_to:
        type: integer
      shift_detect_depart_from:
        type: integer
      shift_detect_depart_to:
        type: integer
      shift_alt_plan_1:
        type: string
        format: uuid
      shift_alt_plan_2:
        type: string
        format: uuid
      shift_alt_plan_3:
        type: string
        format: uuid
      shift_alt_plan_4:
        type: string
        format: uuid
      shift_alt_plan_5:
        type: string
        format: uuid
      shift_alt_plan_6:
        type: string
        format: uuid
      is_active:
        type: boolean
  UpdateDayPlanRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      plan_type:
        type: string
        enum:
          - fixed
          - flextime
      come_from:
        type: integer
      come_to:
        type: integer
      go_from:
        type: integer
      go_to:
        type: integer
      core_start:
        type: integer
      core_end:
        type: integer
      regular_hours:
        type: integer
      regular_hours_2:
        type: integer
      from_employee_master:
        type: boolean
      tolerance_come_plus:
        type: integer
      tolerance_come_minus:
        type: integer
      tolerance_go_plus:
        type: integer
      tolerance_go_minus:
        type: integer
      variable_work_time:
        type: boolean
      rounding_come_type:
        type: string
        enum:
          - none
          - up
          - down
          - nearest
          - add
          - subtract
      rounding_come_interval:
        type: integer
      rounding_come_add_value:
        type: integer
      rounding_go_type:
        type: string
        enum:
          - none
          - up
          - down
          - nearest
          - add
          - subtract
      rounding_go_interval:
        type: integer
      rounding_go_add_value:
        type: integer
      round_all_bookings:
        type: boolean
      min_work_time:
        type: integer
      max_net_work_time:
        type: integer
      holiday_credit_cat1:
        type: integer
      holiday_credit_cat2:
        type: integer
      holiday_credit_cat3:
        type: integer
      vacation_deduction:
        type: number
        format: float
      no_booking_behavior:
        type: string
        enum:
          - error
          - deduct_target
          - vocational_school
          - adopt_target
          - target_with_order
      day_change_behavior:
        type: string
        enum:
          - none
          - at_arrival
          - at_departure
          - auto_complete
      shift_detect_arrive_from:
        type: integer
      shift_detect_arrive_to:
        type: integer
      shift_detect_depart_from:
        type: integer
      shift_detect_depart_to:
        type: integer
      shift_alt_plan_1:
        type: string
        format: uuid
      shift_alt_plan_2:
        type: string
        format: uuid
      shift_alt_plan_3:
        type: string
        format: uuid
      shift_alt_plan_4:
        type: string
        format: uuid
      shift_alt_plan_5:
        type: string
        format: uuid
      shift_alt_plan_6:
        type: string
        format: uuid
      is_active:
        type: boolean
  CopyDayPlanRequest:
    type: object
    required:
      - new_code
      - new_name
    properties:
      new_code:
        type: string
        minLength: 1
        maxLength: 20
      new_name:
        type: string
        minLength: 1
        maxLength: 255
  CreateDayPlanBreakRequest:
    type: object
    required:
      - break_type
      - duration
    properties:
      break_type:
        type: string
        enum:
          - fixed
          - variable
          - minimum
      start_time:
        type: integer
      end_time:
        type: integer
      duration:
        type: integer
      after_work_minutes:
        type: integer
      auto_deduct:
        type: boolean
        default: true
      is_paid:
        type: boolean
        default: false
      minutes_difference:
        type: boolean
        default: false
  CreateDayPlanBonusRequest:
    type: object
    required:
      - account_id
      - time_from
      - time_to
      - calculation_type
      - value_minutes
    properties:
      account_id:
        type: string
        format: uuid
      time_from:
        type: integer
      time_to:
        type: integer
      calculation_type:
        type: string
        enum:
          - fixed
          - per_minute
          - percentage
      value_minutes:
        type: integer
      min_work_minutes:
        type: integer
      applies_on_holiday:
        type: boolean
        default: false
  DayPlanList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/DayPlan'
  Account:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
      - account_type
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
        x-nullable: true
        description: Null for system accounts
      code:
        type: string
        example: OT
      name:
        type: string
        example: Overtime
      description:
        type: string
        x-nullable: true
      account_type:
        type: string
        enum:
          - bonus
          - day
          - month
        example: bonus
      unit:
        type: string
        enum:
          - minutes
          - hours
          - days
        example: minutes
      display_format:
        type: string
        enum:
          - decimal
          - hh_mm
        description: Display format for account values
        example: decimal
      bonus_factor:
        type: number
        format: double
        x-nullable: true
        description: Multiplier for bonus calculations (e.g. 1.5 for 150%)
        example: 1.5
      account_group_id:
        type: string
        format: uuid
        x-nullable: true
        description: ID of the account group this account belongs to
      is_system:
        type: boolean
        description: System accounts cannot be deleted
        example: false
      year_carryover:
        type: boolean
        description: Carry over balance at year end
        example: true
      is_payroll_relevant:
        type: boolean
        description: Include in payroll export
        example: true
      payroll_code:
        type: string
        x-nullable: true
        description: Code for payroll system export
      sort_order:
        type: integer
        example: 0
      is_active:
        type: boolean
        example: true
      usage_count:
        type: integer
        description: Number of day plans that reference this account
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  AccountSummary:
    type: object
    required:
      - id
      - code
      - name
      - account_type
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      account_type:
        type: string
  AccountValue:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - account_id
      - value_date
      - value_minutes
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      account_id:
        type: string
        format: uuid
      value_date:
        type: string
        format: date
      value_minutes:
        type: integer
        example: 60
      source:
        type: string
        enum:
          - calculated
          - manual
          - correction
          - import
        example: calculated
      source_id:
        type: string
        format: uuid
        x-nullable: true
        description: 'ID of source record (daily_value, correction, etc.)'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      account:
        allOf:
          - $ref: '#/definitions/AccountSummary'
        x-nullable: true
      employee:
        allOf:
          - $ref: '#/definitions/EmployeeSummary'
        x-nullable: true
  AccountUsage:
    type: object
    required:
      - account_id
      - usage_count
      - day_plans
    properties:
      account_id:
        type: string
        format: uuid
      usage_count:
        type: integer
        example: 2
      day_plans:
        type: array
        items:
          type: object
          required:
            - id
            - code
            - name
          properties:
            id:
              type: string
              format: uuid
            code:
              type: string
            name:
              type: string
  CreateAccountRequest:
    type: object
    required:
      - code
      - name
      - account_type
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 20
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      account_type:
        type: string
        enum:
          - bonus
          - day
          - month
      unit:
        type: string
        enum:
          - minutes
          - hours
          - days
      display_format:
        type: string
        enum:
          - decimal
          - hh_mm
        description: Display format for account values
      bonus_factor:
        type: number
        format: double
        x-nullable: true
        description: Multiplier for bonus calculations (e.g. 1.5 for 150%)
      account_group_id:
        type: string
        format: uuid
        x-nullable: true
        description: ID of the account group this account belongs to
      year_carryover:
        type: boolean
      is_payroll_relevant:
        type: boolean
        default: false
      payroll_code:
        type: string
      sort_order:
        type: integer
  UpdateAccountRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      unit:
        type: string
        enum:
          - minutes
          - hours
          - days
      display_format:
        type: string
        enum:
          - decimal
          - hh_mm
        description: Display format for account values
      bonus_factor:
        type: number
        format: double
        x-nullable: true
        description: Multiplier for bonus calculations (e.g. 1.5 for 150%)
      account_group_id:
        type: string
        format: uuid
        x-nullable: true
        description: ID of the account group this account belongs to
      is_payroll_relevant:
        type: boolean
      payroll_code:
        type: string
      sort_order:
        type: integer
      year_carryover:
        type: boolean
      is_active:
        type: boolean
  AccountList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Account'
  AccountValueList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/AccountValue'
  CostCenter:
    type: object
    required:
      - id
      - tenant_id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      name:
        type: string
        example: Development
      code:
        type: string
        example: DEV-001
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CostCenterSummary:
    type: object
    required:
      - id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      name:
        type: string
      code:
        type: string
  CreateCostCenterRequest:
    type: object
    required:
      - name
      - code
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 50
      description:
        type: string
  UpdateCostCenterRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 50
      description:
        type: string
      is_active:
        type: boolean
  CostCenterList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/CostCenter'
  EmploymentType:
    type: object
    required:
      - id
      - tenant_id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      name:
        type: string
        example: Full-time
      code:
        type: string
        example: FT
      description:
        type: string
        x-nullable: true
      default_weekly_hours:
        type: number
        format: decimal
        example: 40
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  EmploymentTypeSummary:
    type: object
    required:
      - id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      name:
        type: string
      code:
        type: string
  CreateEmploymentTypeRequest:
    type: object
    required:
      - name
      - code
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 20
      description:
        type: string
      default_weekly_hours:
        type: number
        format: decimal
  UpdateEmploymentTypeRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 20
      description:
        type: string
      default_weekly_hours:
        type: number
        format: decimal
      is_active:
        type: boolean
  EmploymentTypeList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EmploymentType'
  WeekPlan:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: WEEK-001
      name:
        type: string
        example: Standard Week
      description:
        type: string
        x-nullable: true
      monday_day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      tuesday_day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      wednesday_day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      thursday_day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      friday_day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      saturday_day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      sunday_day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      monday_day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
      tuesday_day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
      wednesday_day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
      thursday_day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
      friday_day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
      saturday_day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
      sunday_day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
  WeekPlanSummary:
    type: object
    required:
      - id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
  CreateWeekPlanRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 20
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      monday_day_plan_id:
        type: string
        format: uuid
      tuesday_day_plan_id:
        type: string
        format: uuid
      wednesday_day_plan_id:
        type: string
        format: uuid
      thursday_day_plan_id:
        type: string
        format: uuid
      friday_day_plan_id:
        type: string
        format: uuid
      saturday_day_plan_id:
        type: string
        format: uuid
      sunday_day_plan_id:
        type: string
        format: uuid
  UpdateWeekPlanRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      monday_day_plan_id:
        type: string
        format: uuid
      tuesday_day_plan_id:
        type: string
        format: uuid
      wednesday_day_plan_id:
        type: string
        format: uuid
      thursday_day_plan_id:
        type: string
        format: uuid
      friday_day_plan_id:
        type: string
        format: uuid
      saturday_day_plan_id:
        type: string
        format: uuid
      sunday_day_plan_id:
        type: string
        format: uuid
      is_active:
        type: boolean
  WeekPlanList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/WeekPlan'
  Location:
    type: object
    required:
      - id
      - tenant_id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      name:
        type: string
        example: Main Office
      code:
        type: string
        example: HQ
      description:
        type: string
        x-nullable: true
      address:
        type: string
        x-nullable: true
      city:
        type: string
        x-nullable: true
      country:
        type: string
        x-nullable: true
      timezone:
        type: string
        example: Europe/Berlin
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  LocationSummary:
    type: object
    required:
      - id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      name:
        type: string
      code:
        type: string
  CreateLocationRequest:
    type: object
    required:
      - name
      - code
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 20
      description:
        type: string
      address:
        type: string
      city:
        type: string
      country:
        type: string
      timezone:
        type: string
  UpdateLocationRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 20
      description:
        type: string
      address:
        type: string
      city:
        type: string
      country:
        type: string
      timezone:
        type: string
      is_active:
        type: boolean
  LocationList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Location'
  Tariff:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: TARIFF-001
      name:
        type: string
        example: Standard Tariff
      description:
        type: string
        x-nullable: true
      week_plan_id:
        type: string
        format: uuid
        x-nullable: true
      valid_from:
        type: string
        format: date
        x-nullable: true
      valid_to:
        type: string
        format: date
        x-nullable: true
      is_active:
        type: boolean
        example: true
      annual_vacation_days:
        type: number
        format: double
        description: 'ZMI: Jahresurlaub - Base annual vacation days'
        example: 30
        x-nullable: true
      work_days_per_week:
        type: integer
        minimum: 1
        maximum: 7
        description: 'ZMI: AT pro Woche - Work days per week for vacation pro-rating'
        example: 5
        x-nullable: true
      vacation_basis:
        type: string
        enum:
          - calendar_year
          - entry_date
        description: 'ZMI: Urlaubsberechnung Basis - Vacation year calculation basis'
        example: calendar_year
      daily_target_hours:
        type: number
        format: double
        description: 'ZMI: Tagessollstunden - Daily target hours'
        example: 8
        x-nullable: true
      weekly_target_hours:
        type: number
        format: double
        description: 'ZMI: Wochensollstunden - Weekly target hours'
        example: 40
        x-nullable: true
      monthly_target_hours:
        type: number
        format: double
        description: 'ZMI: Monatssollstunden - Monthly target hours'
        example: 173.33
        x-nullable: true
      annual_target_hours:
        type: number
        format: double
        description: 'ZMI: Jahressollstunden - Annual target hours'
        example: 2080
        x-nullable: true
      max_flextime_per_month:
        type: integer
        description: 'ZMI: Max Gleitzeit im Monat - Max monthly flextime credit in minutes'
        example: 600
        x-nullable: true
      upper_limit_annual:
        type: integer
        description: 'ZMI: Obergrenze Jahreszeitkonto - Annual flextime cap in minutes'
        example: 2400
        x-nullable: true
      lower_limit_annual:
        type: integer
        description: 'ZMI: Untergrenze Jahreszeitkonto - Annual flextime floor in minutes (can be negative)'
        example: -600
        x-nullable: true
      flextime_threshold:
        type: integer
        description: 'ZMI: Gleitzeitschwelle - Overtime threshold in minutes'
        example: 60
        x-nullable: true
      credit_type:
        type: string
        enum:
          - no_evaluation
          - complete
          - after_threshold
          - no_carryover
        description: 'ZMI: Art der Gutschrift - How flextime is credited at month end'
        example: no_evaluation
      rhythm_type:
        type: string
        enum:
          - weekly
          - rolling_weekly
          - x_days
        description: 'ZMI: Zeitplan-Modell - Time plan rhythm type'
        example: weekly
      cycle_days:
        type: integer
        minimum: 1
        maximum: 365
        description: 'ZMI: Tage im Zyklus - For x_days rhythm, number of days in cycle'
        example: 14
        x-nullable: true
      rhythm_start_date:
        type: string
        format: date
        description: 'ZMI: Rhythmus-Startdatum - Start date for rhythm calculation'
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      week_plan:
        allOf:
          - $ref: '#/definitions/WeekPlanSummary'
        x-nullable: true
      breaks:
        type: array
        items:
          $ref: '#/definitions/TariffBreak'
      tariff_week_plans:
        type: array
        description: Ordered week plans for rolling_weekly rhythm
        items:
          type: object
          required:
            - id
            - tariff_id
            - week_plan_id
            - sequence_order
          properties:
            id:
              type: string
              format: uuid
            tariff_id:
              type: string
              format: uuid
            week_plan_id:
              type: string
              format: uuid
            sequence_order:
              type: integer
              description: Position in rotation (1-based)
              example: 1
            created_at:
              type: string
              format: date-time
            week_plan:
              allOf:
                - $ref: '#/definitions/WeekPlanSummary'
              x-nullable: true
      tariff_day_plans:
        type: array
        description: Day plans for x_days rhythm
        items:
          type: object
          required:
            - id
            - tariff_id
            - day_position
          properties:
            id:
              type: string
              format: uuid
            tariff_id:
              type: string
              format: uuid
            day_position:
              type: integer
              description: Position in cycle (1-based)
              example: 1
            day_plan_id:
              type: string
              format: uuid
              x-nullable: true
              description: NULL = off day
            created_at:
              type: string
              format: date-time
            day_plan:
              allOf:
                - $ref: '#/definitions/DayPlanSummary'
              x-nullable: true
  TariffBreak:
    type: object
    required:
      - id
      - tariff_id
      - break_type
      - duration
    properties:
      id:
        type: string
        format: uuid
      tariff_id:
        type: string
        format: uuid
      break_type:
        type: string
        enum:
          - fixed
          - variable
          - minimum
        example: minimum
      after_work_minutes:
        type: integer
        description: Deduct break after this much work time
        example: 360
      duration:
        type: integer
        description: Break duration in minutes
        example: 30
      is_paid:
        type: boolean
        example: false
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateTariffRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 20
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      week_plan_id:
        type: string
        format: uuid
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      rhythm_type:
        type: string
        enum:
          - weekly
          - rolling_weekly
          - x_days
        description: 'Time plan rhythm type (default: weekly)'
      cycle_days:
        type: integer
        minimum: 1
        maximum: 365
        description: 'For x_days rhythm: number of days in cycle'
      rhythm_start_date:
        type: string
        format: date
        description: Start date for rhythm calculation
      week_plan_ids:
        type: array
        description: 'For rolling_weekly: ordered list of week plan IDs'
        items:
          type: string
          format: uuid
      day_plans:
        type: array
        description: 'For x_days: day plans per position in cycle'
        items:
          type: object
          required:
            - day_position
          properties:
            day_position:
              type: integer
              minimum: 1
              description: Position in cycle (1-based)
            day_plan_id:
              type: string
              format: uuid
              x-nullable: true
              description: 'Day plan ID, null for off day'
      annual_vacation_days:
        type: number
        format: double
      work_days_per_week:
        type: integer
        minimum: 1
        maximum: 7
      vacation_basis:
        type: string
        enum:
          - calendar_year
          - entry_date
      daily_target_hours:
        type: number
        format: double
      weekly_target_hours:
        type: number
        format: double
      monthly_target_hours:
        type: number
        format: double
      annual_target_hours:
        type: number
        format: double
      max_flextime_per_month:
        type: integer
      upper_limit_annual:
        type: integer
      lower_limit_annual:
        type: integer
      flextime_threshold:
        type: integer
      credit_type:
        type: string
        enum:
          - no_evaluation
          - complete
          - after_threshold
          - no_carryover
  UpdateTariffRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      week_plan_id:
        type: string
        format: uuid
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      is_active:
        type: boolean
      rhythm_type:
        type: string
        enum:
          - weekly
          - rolling_weekly
          - x_days
        description: Time plan rhythm type
      cycle_days:
        type: integer
        minimum: 1
        maximum: 365
        x-nullable: true
        description: 'For x_days rhythm: number of days in cycle'
      rhythm_start_date:
        type: string
        format: date
        x-nullable: true
        description: Start date for rhythm calculation
      week_plan_ids:
        type: array
        description: 'For rolling_weekly: ordered list of week plan IDs'
        items:
          type: string
          format: uuid
      day_plans:
        type: array
        description: 'For x_days: day plans per position in cycle'
        items:
          $ref: '#/definitions/CreateTariffRequest/properties/day_plans/items'
      annual_vacation_days:
        type: number
        format: double
        x-nullable: true
      work_days_per_week:
        type: integer
        minimum: 1
        maximum: 7
        x-nullable: true
      vacation_basis:
        type: string
        enum:
          - calendar_year
          - entry_date
      daily_target_hours:
        type: number
        format: double
        x-nullable: true
      weekly_target_hours:
        type: number
        format: double
        x-nullable: true
      monthly_target_hours:
        type: number
        format: double
        x-nullable: true
      annual_target_hours:
        type: number
        format: double
        x-nullable: true
      max_flextime_per_month:
        type: integer
        x-nullable: true
      upper_limit_annual:
        type: integer
        x-nullable: true
      lower_limit_annual:
        type: integer
        x-nullable: true
      flextime_threshold:
        type: integer
        x-nullable: true
      credit_type:
        type: string
        enum:
          - no_evaluation
          - complete
          - after_threshold
          - no_carryover
  TariffList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Tariff'
  BookingType:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
      - direction
      - category
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
        x-nullable: true
        description: Null for system booking types
      code:
        type: string
        example: COME
      name:
        type: string
        example: Clock In
      description:
        type: string
        x-nullable: true
      direction:
        type: string
        enum:
          - in
          - out
        description: Whether this is an arrival (in) or departure (out) booking
        example: in
      category:
        type: string
        enum:
          - work
          - break
          - business_trip
          - other
        description: Functional category of the booking type
        example: work
      account_id:
        type: string
        format: uuid
        x-nullable: true
        description: Optional linked account for time calculations
      requires_reason:
        type: boolean
        description: Whether bookings of this type must include a reason code
        example: false
      is_system:
        type: boolean
        description: System types cannot be deleted
        example: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  BookingTypeSummary:
    type: object
    required:
      - id
      - code
      - name
      - direction
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      direction:
        type: string
        enum:
          - in
          - out
  CreateBookingTypeRequest:
    type: object
    required:
      - code
      - name
      - direction
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 20
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      direction:
        type: string
        enum:
          - in
          - out
      category:
        type: string
        enum:
          - work
          - break
          - business_trip
          - other
        description: Defaults to 'work' if not specified
      account_id:
        type: string
        format: uuid
        x-nullable: true
      requires_reason:
        type: boolean
  UpdateBookingTypeRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      is_active:
        type: boolean
      category:
        type: string
        enum:
          - work
          - break
          - business_trip
          - other
      account_id:
        type: string
        format: uuid
        x-nullable: true
      requires_reason:
        type: boolean
  BookingTypeList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/BookingType'
  AbsenceType:
    type: object
    required:
      - id
      - code
      - name
      - category
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
        x-nullable: true
        description: Null for system absence types
      code:
        type: string
        example: VAC
      name:
        type: string
        example: Vacation
      description:
        type: string
        x-nullable: true
      category:
        type: string
        enum:
          - vacation
          - sick
          - personal
          - unpaid
          - holiday
          - other
        example: vacation
      is_paid:
        type: boolean
        example: true
      affects_vacation_balance:
        type: boolean
        description: Whether this absence type deducts from vacation balance
        example: true
      requires_approval:
        type: boolean
        example: true
      portion:
        type: integer
        enum:
          - 0
          - 1
          - 2
        description: 'ZMI Anteil: portion of regular hours credited (0=none, 1=full, 2=half)'
        example: 1
      holiday_code:
        type: string
        x-nullable: true
        description: 'ZMI Krzel am Feiertag: alternative code used on holidays'
        example: UH
      priority:
        type: integer
        description: 'ZMI Prioritt: higher value wins when holiday and absence overlap'
        example: 0
      sort_order:
        type: integer
        description: Display ordering
        example: 0
      requires_document:
        type: boolean
        description: Whether this absence type requires a medical certificate or document
        example: false
      absence_type_group_id:
        type: string
        format: uuid
        x-nullable: true
        description: Group this absence type belongs to
      calculation_rule_id:
        type: string
        format: uuid
        x-nullable: true
        description: Calculation rule that determines account value for this absence type
      color:
        type: string
        description: Hex color for UI display
        example: '#4CAF50'
      is_system:
        type: boolean
        description: System types cannot be deleted
        example: false
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  AbsenceTypeSummary:
    type: object
    required:
      - id
      - code
      - name
      - category
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      category:
        type: string
      color:
        type: string
  CreateAbsenceTypeRequest:
    type: object
    required:
      - code
      - name
      - category
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 20
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      category:
        type: string
        enum:
          - vacation
          - sick
          - personal
          - unpaid
          - holiday
          - other
      is_paid:
        type: boolean
        default: true
      affects_vacation_balance:
        type: boolean
        default: false
      requires_approval:
        type: boolean
        default: true
      color:
        type: string
      portion:
        type: integer
        enum:
          - 0
          - 1
          - 2
        default: 1
        description: 'ZMI Anteil: 0=none, 1=full, 2=half'
      holiday_code:
        type: string
        maxLength: 10
        description: Alternative code on holidays
      priority:
        type: integer
        default: 0
        description: Priority when holiday+absence overlap
      sort_order:
        type: integer
        default: 0
      requires_document:
        type: boolean
        default: false
      absence_type_group_id:
        type: string
        format: uuid
      calculation_rule_id:
        type: string
        format: uuid
  UpdateAbsenceTypeRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      category:
        type: string
        enum:
          - vacation
          - sick
          - personal
          - unpaid
          - holiday
          - other
      is_paid:
        type: boolean
      affects_vacation_balance:
        type: boolean
      requires_approval:
        type: boolean
      color:
        type: string
      is_active:
        type: boolean
      portion:
        type: integer
        enum:
          - 0
          - 1
          - 2
        description: 'ZMI Anteil: 0=none, 1=full, 2=half'
      holiday_code:
        type: string
        maxLength: 10
      priority:
        type: integer
      sort_order:
        type: integer
      requires_document:
        type: boolean
      absence_type_group_id:
        type: string
        format: uuid
      calculation_rule_id:
        type: string
        format: uuid
  AbsenceTypeList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/AbsenceType'
  AbsenceTypeGroup:
    type: object
    required:
      - id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateAbsenceTypeGroupRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
  UpdateAbsenceTypeGroupRequest:
    type: object
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      is_active:
        type: boolean
  AbsenceTypeGroupList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/AbsenceTypeGroup'
  AccountGroup:
    type: object
    required:
      - id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      description:
        type: string
        x-nullable: true
      sort_order:
        type: integer
        example: 0
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateAccountGroupRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      sort_order:
        type: integer
  UpdateAccountGroupRequest:
    type: object
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      sort_order:
        type: integer
      is_active:
        type: boolean
  AccountGroupList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/AccountGroup'
  VacationBalance:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - year
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      year:
        type: integer
        example: 2024
      base_entitlement:
        type: number
        format: decimal
        description: Annual vacation entitlement in days
        example: 30
      additional_entitlement:
        type: number
        format: decimal
        description: 'Additional entitlement (bonus, seniority)'
        example: 0
      carryover_from_previous:
        type: number
        format: decimal
        description: Days carried over from previous year
        example: 5
      manual_adjustment:
        type: number
        format: decimal
        description: Manual adjustments
        example: 0
      used_days:
        type: number
        format: decimal
        description: Days already used
        example: 10
      planned_days:
        type: number
        format: decimal
        description: Days planned/approved but not yet taken
        example: 5
      total_entitlement:
        type: number
        format: decimal
        description: Total available days (calculated)
        example: 35
      remaining_days:
        type: number
        format: decimal
        description: Remaining days (total - used - planned)
        example: 20
      carryover_to_next:
        type: number
        format: decimal
        description: Days that will carry over to next year
        x-nullable: true
      carryover_expires_at:
        type: string
        format: date
        description: Date when carryover days expire
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      employee:
        allOf:
          - $ref: '#/definitions/EmployeeSummary'
        x-nullable: true
  CreateVacationBalanceRequest:
    type: object
    required:
      - employee_id
      - year
      - base_entitlement
    properties:
      employee_id:
        type: string
        format: uuid
      year:
        type: integer
      base_entitlement:
        type: number
        format: decimal
      additional_entitlement:
        type: number
        format: decimal
      carryover_from_previous:
        type: number
        format: decimal
      manual_adjustment:
        type: number
        format: decimal
      carryover_expires_at:
        type: string
        format: date
  UpdateVacationBalanceRequest:
    type: object
    properties:
      base_entitlement:
        type: number
        format: decimal
      additional_entitlement:
        type: number
        format: decimal
      carryover_from_previous:
        type: number
        format: decimal
      manual_adjustment:
        type: number
        format: decimal
      carryover_to_next:
        type: number
        format: decimal
      carryover_expires_at:
        type: string
        format: date
  VacationBalanceList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/VacationBalance'
  AuditLog:
    type: object
    required:
      - id
      - tenant_id
      - action
      - entity_type
      - entity_id
      - performed_at
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      user_id:
        type: string
        format: uuid
        x-nullable: true
        description: User who performed the action (null for system actions)
      action:
        type: string
        enum:
          - create
          - update
          - delete
          - approve
          - reject
          - close
          - reopen
          - export
          - import
          - login
          - logout
        example: update
      entity_type:
        type: string
        description: Type of entity affected
        example: booking
      entity_id:
        type: string
        format: uuid
        description: ID of the affected entity
      entity_name:
        type: string
        x-nullable: true
        description: Human-readable name of entity
        example: 'Booking #12345'
      changes:
        type: object
        x-nullable: true
        description: JSON object with changed fields (before/after)
        example:
          edited_time:
            before: 480
            after: 510
      metadata:
        type: object
        x-nullable: true
        description: Additional context
      ip_address:
        type: string
        x-nullable: true
        example: 192.168.1.1
      user_agent:
        type: string
        x-nullable: true
      performed_at:
        type: string
        format: date-time
      user:
        allOf:
          - $ref: '#/definitions/UserSummary'
        x-nullable: true
  AuditLogList:
    type: object
    required:
      - data
      - meta
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/AuditLog'
      meta:
        $ref: '#/definitions/PaginationMeta'
  UserGroup:
    type: object
    required:
      - id
      - tenant_id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      name:
        type: string
        example: Administrators
      code:
        type: string
        example: ADMIN
      description:
        type: string
        x-nullable: true
      is_system:
        type: boolean
        description: System groups cannot be deleted
        example: false
      is_admin:
        type: boolean
        description: Admin groups bypass permission checks
        example: false
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      permissions:
        type: array
        items:
          $ref: '#/definitions/Permission'
  UserGroupSummary:
    type: object
    required:
      - id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      name:
        type: string
      code:
        type: string
  Permission:
    type: object
    required:
      - id
      - resource
      - action
    properties:
      id:
        type: string
        format: uuid
      resource:
        type: string
        example: employees
      action:
        type: string
        enum:
          - create
          - read
          - update
          - delete
          - manage
          - view_own
          - view_all
          - approve
          - request
        example: read
      description:
        type: string
        x-nullable: true
  CreateUserGroupRequest:
    type: object
    required:
      - name
      - code
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 50
      description:
        type: string
      permission_ids:
        type: array
        items:
          type: string
          format: uuid
      is_admin:
        type: boolean
  UpdateUserGroupRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 50
      description:
        type: string
      permission_ids:
        type: array
        items:
          type: string
          format: uuid
      is_active:
        type: boolean
      is_admin:
        type: boolean
  UserGroupList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/UserGroup'
  DepartmentSummary:
    type: object
    required:
      - id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      name:
        type: string
      code:
        type: string
  BookingReason:
    type: object
    required:
      - id
      - tenant_id
      - booking_type_id
      - code
      - label
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      booking_type_id:
        type: string
        format: uuid
      code:
        type: string
        example: ERRAND
      label:
        type: string
        example: Work Errand
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateBookingReasonRequest:
    type: object
    required:
      - booking_type_id
      - code
      - label
    properties:
      booking_type_id:
        type: string
        format: uuid
      code:
        type: string
        minLength: 1
        maxLength: 50
      label:
        type: string
        minLength: 1
        maxLength: 255
      sort_order:
        type: integer
  UpdateBookingReasonRequest:
    type: object
    properties:
      label:
        type: string
        minLength: 1
        maxLength: 255
      is_active:
        type: boolean
      sort_order:
        type: integer
  BookingReasonList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/BookingReason'
  BookingTypeGroup:
    type: object
    required:
      - id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      booking_type_ids:
        type: array
        items:
          type: string
          format: uuid
        description: IDs of booking types in this group
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateBookingTypeGroupRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      booking_type_ids:
        type: array
        items:
          type: string
          format: uuid
        description: IDs of booking types to add as members
  UpdateBookingTypeGroupRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      is_active:
        type: boolean
      booking_type_ids:
        type: array
        items:
          type: string
          format: uuid
        description: Replace group members with these booking type IDs
  BookingTypeGroupList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/BookingTypeGroup'
  EmployeeGroup:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: GRP-001
      name:
        type: string
        example: Production Workers
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  WorkflowGroup:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: WF-001
      name:
        type: string
        example: Standard Workflow
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  ActivityGroup:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: ACT-001
      name:
        type: string
        example: Office Activities
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateGroupRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
  UpdateGroupRequest:
    type: object
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      is_active:
        type: boolean
  DailyValueSummary:
    type: object
    required:
      - id
      - value_date
      - status
      - net_minutes
      - balance_minutes
    properties:
      id:
        type: string
        format: uuid
      value_date:
        type: string
        format: date
      status:
        type: string
      net_minutes:
        type: integer
      balance_minutes:
        type: integer
      has_errors:
        type: boolean
  DailyError:
    type: object
    required:
      - id
      - daily_value_id
      - error_type
      - message
    properties:
      id:
        type: string
        format: uuid
      daily_value_id:
        type: string
        format: uuid
      error_type:
        type: string
        enum:
          - missing_booking
          - unpaired_booking
          - overlapping_bookings
          - core_time_violation
          - exceeds_max_hours
          - below_min_hours
          - break_violation
          - invalid_sequence
        example: missing_booking
      message:
        type: string
        example: Missing clock-out booking
      severity:
        type: string
        enum:
          - warning
          - error
        example: error
      booking_id:
        type: string
        format: uuid
        x-nullable: true
        description: Related booking if applicable
      created_at:
        type: string
        format: date-time
  Booking:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - booking_date
      - booking_type_id
      - original_time
      - edited_time
      - source
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      booking_date:
        type: string
        format: date
        example: '2024-01-15'
      booking_type_id:
        type: string
        format: uuid
      original_time:
        type: integer
        description: |
          Original booking time (minutes from midnight). This value is set once during creation and is immutable -- it cannot be changed by any update operation. Represents the raw terminal or manual ingest time.
        example: 480
        readOnly: true
      edited_time:
        type: integer
        description: |
          Edited/corrected time (minutes from midnight). Defaults to original_time on creation. Can be changed by the user via PUT /bookings/{id}. When changed, calculated_time is cleared and recalculated on next day calculation.
        example: 480
      calculated_time:
        type: integer
        description: |
          Time after tolerance/rounding applied (minutes from midnight). Derived automatically during day calculation based on day plan settings. Cleared when edited_time changes. This is the value used in final time calculations.
        x-nullable: true
      time_string:
        type: string
        description: 'Formatted time as HH:MM (read-only)'
        example: '08:00'
        readOnly: true
      pair_id:
        type: string
        format: uuid
        x-nullable: true
        description: ID of paired booking (in/out pair)
      source:
        type: string
        enum:
          - web
          - terminal
          - api
          - import
          - correction
        example: web
      terminal_id:
        type: string
        format: uuid
        x-nullable: true
      notes:
        type: string
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      created_by:
        type: string
        format: uuid
        x-nullable: true
      updated_by:
        type: string
        format: uuid
        x-nullable: true
      employee:
        allOf:
          - $ref: '#/definitions/EmployeeSummary'
        x-nullable: true
      booking_type:
        allOf:
          - $ref: '#/definitions/BookingTypeSummary'
        x-nullable: true
  CreateBookingRequest:
    type: object
    required:
      - employee_id
      - booking_date
      - booking_type_id
      - time
    properties:
      employee_id:
        type: string
        format: uuid
      booking_date:
        type: string
        format: date
        description: Date in YYYY-MM-DD format
      booking_type_id:
        type: string
        format: uuid
      time:
        type: string
        description: 'Time in HH:MM format'
        example: '08:00'
      notes:
        type: string
  UpdateBookingRequest:
    type: object
    properties:
      time:
        type: string
        description: 'Time in HH:MM format'
        example: '08:15'
      notes:
        type: string
  BookingList:
    type: object
    required:
      - data
      - total
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Booking'
      total:
        type: integer
        example: 50
  DayView:
    type: object
    required:
      - employee_id
      - date
      - bookings
    properties:
      employee_id:
        type: string
        format: uuid
      date:
        type: string
        format: date
      bookings:
        type: array
        items:
          $ref: '#/definitions/Booking'
      daily_value:
        allOf:
          - $ref: '#/definitions/DailyValue'
        x-nullable: true
      day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
      is_holiday:
        type: boolean
      holiday:
        allOf:
          - $ref: '#/definitions/Holiday'
        x-nullable: true
      errors:
        type: array
        items:
          $ref: '#/definitions/DailyError'
  DailyValue:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - value_date
      - status
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      value_date:
        type: string
        format: date
        example: '2024-01-15'
      day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      status:
        type: string
        enum:
          - pending
          - calculated
          - error
          - approved
        example: calculated
      target_minutes:
        type: integer
        description: Target work time in minutes
        example: 480
      gross_minutes:
        type: integer
        description: Gross work time in minutes
        example: 540
      break_minutes:
        type: integer
        description: Break time in minutes
        example: 30
      net_minutes:
        type: integer
        description: Net work time in minutes
        example: 510
      overtime_minutes:
        type: integer
        description: Overtime in minutes
        example: 30
      undertime_minutes:
        type: integer
        description: Undertime in minutes
        example: 0
      balance_minutes:
        type: integer
        description: Balance (overtime - undertime)
        example: 30
      is_holiday:
        type: boolean
        example: false
      is_weekend:
        type: boolean
        example: false
      is_absence:
        type: boolean
        example: false
      absence_type_id:
        type: string
        format: uuid
        x-nullable: true
      has_errors:
        type: boolean
        example: false
      is_locked:
        type: boolean
        description: Locked after month closing
        example: false
      calculated_at:
        type: string
        format: date-time
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      employee:
        allOf:
          - $ref: '#/definitions/EmployeeSummary'
        x-nullable: true
      day_plan:
        allOf:
          - $ref: '#/definitions/DayPlanSummary'
        x-nullable: true
      absence_type:
        allOf:
          - $ref: '#/definitions/AbsenceTypeSummary'
        x-nullable: true
      errors:
        type: array
        items:
          $ref: '#/definitions/DailyError'
  DailyValueList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/DailyValue'
      meta:
        $ref: '#/definitions/PaginationMeta'
  Absence:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - absence_type_id
      - absence_date
      - duration
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      absence_type_id:
        type: string
        format: uuid
      absence_date:
        type: string
        format: date
        example: '2024-01-15'
      duration:
        type: number
        format: decimal
        description: '1.0 for full day, 0.5 for half day'
        example: 1
      status:
        type: string
        enum:
          - pending
          - approved
          - rejected
          - cancelled
        example: approved
      notes:
        type: string
        x-nullable: true
      rejection_reason:
        type: string
        x-nullable: true
      approved_by:
        type: string
        format: uuid
        x-nullable: true
      approved_at:
        type: string
        format: date-time
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      created_by:
        type: string
        format: uuid
        x-nullable: true
      employee:
        allOf:
          - $ref: '#/definitions/EmployeeSummary'
        x-nullable: true
      absence_type:
        allOf:
          - $ref: '#/definitions/AbsenceTypeSummary'
        x-nullable: true
  CreateAbsenceRangeRequest:
    type: object
    required:
      - absence_type_id
      - from
      - to
      - duration
    properties:
      absence_type_id:
        type: string
        format: uuid
      from:
        type: string
        format: date
        description: Start date in YYYY-MM-DD format
      to:
        type: string
        format: date
        description: End date in YYYY-MM-DD format
      duration:
        type: number
        format: decimal
        description: '1.0 for full day, 0.5 for half day (applies to all days in range)'
        example: 1
      notes:
        type: string
  UpdateAbsenceRequest:
    type: object
    properties:
      duration:
        type: number
        format: decimal
      notes:
        type: string
      status:
        type: string
        enum:
          - pending
          - approved
          - rejected
          - cancelled
  AbsenceList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Absence'
  MonthlyValue:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - year
      - month
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      year:
        type: integer
        example: 2024
      month:
        type: integer
        minimum: 1
        maximum: 12
        example: 1
      status:
        type: string
        enum:
          - open
          - calculated
          - closed
          - exported
        example: calculated
      target_minutes:
        type: integer
        description: Total target work time for month
        example: 10080
      gross_minutes:
        type: integer
        description: Total gross work time
        example: 10500
      break_minutes:
        type: integer
        description: Total break time
        example: 600
      net_minutes:
        type: integer
        description: Total net work time
        example: 9900
      overtime_minutes:
        type: integer
        description: Total overtime
        example: 420
      undertime_minutes:
        type: integer
        description: Total undertime
        example: 0
      balance_minutes:
        type: integer
        description: Balance (overtime - undertime)
        example: 420
      working_days:
        type: integer
        description: Number of working days in month
        example: 21
      worked_days:
        type: integer
        description: Number of days actually worked
        example: 20
      absence_days:
        type: number
        format: decimal
        description: Number of absence days
        example: 1
      holiday_days:
        type: integer
        description: Number of holidays
        example: 0
      account_balances:
        type: object
        description: Balances per account (account_id -> minutes)
        additionalProperties:
          type: integer
      calculated_at:
        type: string
        format: date-time
        x-nullable: true
      closed_at:
        type: string
        format: date-time
        x-nullable: true
      closed_by:
        type: string
        format: uuid
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      employee:
        allOf:
          - $ref: '#/definitions/EmployeeSummary'
        x-nullable: true
  MonthlyValueList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/MonthlyValue'
  MonthSummaryResponse:
    type: object
    description: |
      Monthly summary for an employee including time totals, flextime balance,
      absence summary, closing status, and evaluation warnings. Field names
      match the Go MonthlyValue model (e.g. total_gross_time, not gross_minutes).
    required:
      - is_closed
    properties:
      employee_id:
        type: string
        format: uuid
        description: Employee ID
      year:
        type: integer
        description: Calendar year
      month:
        type: integer
        description: Calendar month (1-12)
        minimum: 1
        maximum: 12
      total_gross_time:
        type: integer
        description: Total gross work time for the month (minutes)
      total_net_time:
        type: integer
        description: Total net work time for the month (minutes)
      total_target_time:
        type: integer
        description: Total target work time for the month (minutes)
      total_overtime:
        type: integer
        description: Total overtime for the month (minutes)
      total_undertime:
        type: integer
        description: Total undertime for the month (minutes)
      total_break_time:
        type: integer
        description: Total break time for the month (minutes)
      flextime_start:
        type: integer
        description: |
          Flextime balance at start of month (carried over from previous month's flextime_end).
          For January of a new year, this is the annual carryover value.
      flextime_change:
        type: integer
        description: |
          Net flextime change for the month (total_overtime - total_undertime).
          Can be negative if undertime exceeds overtime.
      flextime_end:
        type: integer
        description: |
          Flextime balance at end of month after applying credit type rules and caps.
          This is the value that carries over to the next month's flextime_start.
          For credit_type "no_evaluation": flextime_start + flextime_change.
          For credit_type "complete_carryover": flextime_start + credited (after monthly/balance caps).
          For credit_type "after_threshold": flextime_start + credited (overtime above threshold, after caps).
          For credit_type "no_carryover": always 0.
      flextime_carryover:
        type: integer
        description: |
          Flextime carryover to next month. Equal to flextime_end.
          The next month's recalculation reads this as its flextime_start.
      vacation_taken:
        type: number
        format: double
        description: 'Vacation days taken this month (supports half-day, e.g. 2.5)'
      sick_days:
        type: integer
        description: Number of sick days this month
      other_absence_days:
        type: integer
        description: 'Number of other absence days (special leave, etc.)'
      work_days:
        type: integer
        description: Number of days with recorded work time (gross_time > 0 or net_time > 0)
      days_with_errors:
        type: integer
        description: Number of days with calculation errors
      is_closed:
        type: boolean
        description: Whether the month has been closed. Closed months block recalculation and new bookings.
      closed_at:
        type: string
        format: date-time
        x-nullable: true
        description: Timestamp when the month was closed
      closed_by:
        type: string
        format: uuid
        x-nullable: true
        description: User ID who closed the month
      reopened_at:
        type: string
        format: date-time
        x-nullable: true
        description: Timestamp when the month was last reopened
      reopened_by:
        type: string
        format: uuid
        x-nullable: true
        description: User ID who last reopened the month
      warnings:
        type: array
        description: |
          Warning codes from monthly evaluation. Possible values:
          - MONTHLY_CAP_REACHED: Credited flextime was capped at the monthly maximum (max_flextime_per_month)
          - FLEXTIME_CAPPED: End balance hit the positive or negative annual cap (upper_limit_annual / lower_limit_annual)
          - BELOW_THRESHOLD: Overtime was below the flextime threshold and was forfeited (after_threshold credit type)
          - NO_CARRYOVER: Credit type is no_carryover, balance reset to zero
        items:
          type: string
  YearOverviewResponse:
    type: object
    description: Year overview containing all monthly summaries for an employee in a given year
    properties:
      year:
        type: integer
        description: Calendar year
      data:
        type: array
        description: Monthly summaries ordered by month
        items:
          $ref: '#/definitions/MonthSummaryResponse'
  DailyBreakdownResponse:
    type: object
    description: Daily values for a specific month
    properties:
      data:
        type: array
        description: Daily value entries for the month
        items:
          $ref: '#/definitions/DailyBreakdownItem'
  DailyBreakdownItem:
    type: object
    description: A single daily value entry within a monthly breakdown
    properties:
      id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      value_date:
        type: string
        format: date
      gross_time:
        type: integer
        description: Gross work time in minutes
      net_time:
        type: integer
        description: Net work time in minutes
      target_time:
        type: integer
        description: Target work time in minutes
      overtime:
        type: integer
        description: Overtime in minutes
      undertime:
        type: integer
        description: Undertime in minutes
      break_time:
        type: integer
        description: Break time in minutes
      has_error:
        type: boolean
      error_codes:
        type: array
        items:
          type: string
      warnings:
        type: array
        items:
          type: string
      booking_count:
        type: integer
      first_come:
        type: string
        x-nullable: true
        description: 'First clock-in time (HH:MM)'
      last_go:
        type: string
        x-nullable: true
        description: 'Last clock-out time (HH:MM)'
  Correction:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - correction_date
      - correction_type
      - value_minutes
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      correction_date:
        type: string
        format: date
        example: '2024-01-15'
      correction_type:
        type: string
        enum:
          - time_adjustment
          - balance_adjustment
          - vacation_adjustment
          - account_adjustment
        example: time_adjustment
      account_id:
        type: string
        format: uuid
        x-nullable: true
        description: Target account for account_adjustment type
      value_minutes:
        type: integer
        description: Correction value in minutes (positive or negative)
        example: 60
      reason:
        type: string
        description: Reason for correction
        example: Forgot to clock out
      status:
        type: string
        enum:
          - pending
          - approved
          - rejected
        example: approved
      approved_by:
        type: string
        format: uuid
        x-nullable: true
      approved_at:
        type: string
        format: date-time
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      created_by:
        type: string
        format: uuid
        x-nullable: true
      employee:
        allOf:
          - $ref: '#/definitions/EmployeeSummary'
        x-nullable: true
      account:
        allOf:
          - $ref: '#/definitions/AccountSummary'
        x-nullable: true
  CreateCorrectionRequest:
    type: object
    required:
      - employee_id
      - correction_date
      - correction_type
      - value_minutes
      - reason
    properties:
      employee_id:
        type: string
        format: uuid
      correction_date:
        type: string
        format: date
      correction_type:
        type: string
        enum:
          - time_adjustment
          - balance_adjustment
          - vacation_adjustment
          - account_adjustment
      account_id:
        type: string
        format: uuid
        description: Required for account_adjustment type
      value_minutes:
        type: integer
      reason:
        type: string
        minLength: 5
        maxLength: 500
  CorrectionList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Correction'
  Report:
    type: object
    required:
      - id
      - tenant_id
      - report_type
      - status
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      report_type:
        type: string
        enum:
          - daily_overview
          - weekly_overview
          - monthly_overview
          - employee_timesheet
          - department_summary
          - absence_report
          - vacation_report
          - overtime_report
          - account_balances
          - custom
        example: monthly_overview
      name:
        type: string
        example: January 2024 Overview
      description:
        type: string
        x-nullable: true
      status:
        type: string
        enum:
          - pending
          - generating
          - completed
          - failed
        example: completed
      parameters:
        type: object
        description: 'Report parameters (dates, employees, departments, etc.)'
        properties:
          from_date:
            type: string
            format: date
          to_date:
            type: string
            format: date
          employee_ids:
            type: array
            items:
              type: string
              format: uuid
          department_ids:
            type: array
            items:
              type: string
              format: uuid
          cost_center_ids:
            type: array
            items:
              type: string
              format: uuid
          team_ids:
            type: array
            items:
              type: string
              format: uuid
      format:
        type: string
        enum:
          - json
          - csv
          - xlsx
          - pdf
        example: xlsx
      file_url:
        type: string
        format: uri
        x-nullable: true
        description: URL to download generated report
      file_size:
        type: integer
        x-nullable: true
        description: File size in bytes
      row_count:
        type: integer
        x-nullable: true
        description: Number of rows in report
      requested_at:
        type: string
        format: date-time
      started_at:
        type: string
        format: date-time
        x-nullable: true
      completed_at:
        type: string
        format: date-time
        x-nullable: true
      error_message:
        type: string
        x-nullable: true
      created_by:
        type: string
        format: uuid
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  GenerateReportRequest:
    type: object
    required:
      - report_type
      - format
    properties:
      report_type:
        type: string
        enum:
          - daily_overview
          - weekly_overview
          - monthly_overview
          - employee_timesheet
          - department_summary
          - absence_report
          - vacation_report
          - overtime_report
          - account_balances
          - custom
      name:
        type: string
        maxLength: 255
      format:
        type: string
        enum:
          - json
          - csv
          - xlsx
          - pdf
      parameters:
        type: object
        properties:
          from_date:
            type: string
            format: date
          to_date:
            type: string
            format: date
          employee_ids:
            type: array
            items:
              type: string
              format: uuid
          department_ids:
            type: array
            items:
              type: string
              format: uuid
          cost_center_ids:
            type: array
            items:
              type: string
              format: uuid
          team_ids:
            type: array
            items:
              type: string
              format: uuid
  ReportList:
    type: object
    required:
      - data
      - meta
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Report'
      meta:
        $ref: '#/definitions/PaginationMeta'
  ExportInterface:
    type: object
    required:
      - id
      - tenant_id
      - interface_number
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      interface_number:
        type: integer
        example: 1
      name:
        type: string
        example: Payroll Export DATEV
      mandant_number:
        type: string
        x-nullable: true
        example: '12345'
      export_script:
        type: string
        x-nullable: true
        example: export_datev.sh
      export_path:
        type: string
        x-nullable: true
        example: /exports/datev/
      output_filename:
        type: string
        x-nullable: true
        example: payroll_export.csv
      is_active:
        type: boolean
        example: true
      accounts:
        type: array
        items:
          $ref: '#/definitions/ExportInterfaceAccount'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  ExportInterfaceSummary:
    type: object
    required:
      - id
      - interface_number
      - name
    properties:
      id:
        type: string
        format: uuid
      interface_number:
        type: integer
      name:
        type: string
      is_active:
        type: boolean
  ExportInterfaceAccount:
    type: object
    required:
      - account_id
    properties:
      account_id:
        type: string
        format: uuid
      account_code:
        type: string
      account_name:
        type: string
      payroll_code:
        type: string
        x-nullable: true
      sort_order:
        type: integer
  CreateExportInterfaceRequest:
    type: object
    required:
      - interface_number
      - name
    properties:
      interface_number:
        type: integer
        minimum: 1
      name:
        type: string
        minLength: 1
        maxLength: 255
      mandant_number:
        type: string
        maxLength: 50
      export_script:
        type: string
        maxLength: 255
      export_path:
        type: string
        maxLength: 500
      output_filename:
        type: string
        maxLength: 255
  UpdateExportInterfaceRequest:
    type: object
    properties:
      interface_number:
        type: integer
        minimum: 1
      name:
        type: string
        minLength: 1
        maxLength: 255
      mandant_number:
        type: string
        maxLength: 50
      export_script:
        type: string
        maxLength: 255
      export_path:
        type: string
        maxLength: 500
      output_filename:
        type: string
        maxLength: 255
      is_active:
        type: boolean
  ExportInterfaceList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/ExportInterface'
  SetExportInterfaceAccountsRequest:
    type: object
    required:
      - account_ids
    properties:
      account_ids:
        type: array
        items:
          type: string
          format: uuid
  PayrollExport:
    type: object
    required:
      - id
      - tenant_id
      - year
      - month
      - status
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      export_interface_id:
        type: string
        format: uuid
        x-nullable: true
        description: Export interface used to generate this export
      year:
        type: integer
        example: 2024
      month:
        type: integer
        minimum: 1
        maximum: 12
        example: 1
      status:
        type: string
        enum:
          - pending
          - generating
          - completed
          - failed
        example: completed
      export_type:
        type: string
        enum:
          - standard
          - datev
          - sage
          - custom
        example: standard
      parameters:
        type: object
        description: Export parameters
        properties:
          employee_ids:
            type: array
            items:
              type: string
              format: uuid
          department_ids:
            type: array
            items:
              type: string
              format: uuid
          include_accounts:
            type: array
            items:
              type: string
              format: uuid
      format:
        type: string
        enum:
          - csv
          - xlsx
          - xml
          - json
        example: csv
      file_url:
        type: string
        format: uri
        x-nullable: true
      file_size:
        type: integer
        x-nullable: true
      row_count:
        type: integer
        x-nullable: true
      employee_count:
        type: integer
        example: 50
      total_hours:
        type: number
        format: decimal
        example: 8400.5
      total_overtime:
        type: number
        format: decimal
        example: 250
      requested_at:
        type: string
        format: date-time
      started_at:
        type: string
        format: date-time
        x-nullable: true
      completed_at:
        type: string
        format: date-time
        x-nullable: true
      error_message:
        type: string
        x-nullable: true
      created_by:
        type: string
        format: uuid
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  GeneratePayrollExportRequest:
    type: object
    required:
      - year
      - month
      - format
    properties:
      year:
        type: integer
      month:
        type: integer
        minimum: 1
        maximum: 12
      export_type:
        type: string
        enum:
          - standard
          - datev
          - sage
          - custom
        default: standard
      format:
        type: string
        enum:
          - csv
          - xlsx
          - xml
          - json
      export_interface_id:
        type: string
        format: uuid
        description: Interface to use (determines accounts if include_accounts not specified)
      parameters:
        type: object
        properties:
          employee_ids:
            type: array
            items:
              type: string
              format: uuid
          department_ids:
            type: array
            items:
              type: string
              format: uuid
          include_accounts:
            type: array
            items:
              type: string
              format: uuid
  PayrollExportList:
    type: object
    required:
      - data
      - meta
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/PayrollExport'
      meta:
        $ref: '#/definitions/PaginationMeta'
  Team:
    type: object
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      department_id:
        type: string
        format: uuid
      name:
        type: string
      description:
        type: string
      leader_employee_id:
        type: string
        format: uuid
      is_active:
        type: boolean
      member_count:
        type: integer
        description: Number of members in the team
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      department:
        $ref: '#/definitions/Department'
      leader:
        $ref: '#/definitions/Employee'
      members:
        type: array
        items:
          $ref: '#/definitions/TeamMember'
    required:
      - id
      - tenant_id
      - name
      - is_active
  TeamMember:
    type: object
    properties:
      team_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      joined_at:
        type: string
        format: date-time
      role:
        $ref: '#/definitions/TeamMemberRole'
      employee:
        $ref: '#/definitions/Employee'
    required:
      - team_id
      - employee_id
      - joined_at
      - role
  TeamMemberRole:
    type: string
    enum:
      - member
      - lead
      - deputy
  CreateTeamRequest:
    type: object
    properties:
      department_id:
        type: string
        format: uuid
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      leader_employee_id:
        type: string
        format: uuid
      is_active:
        type: boolean
        default: true
    required:
      - name
  UpdateTeamRequest:
    type: object
    properties:
      department_id:
        type: string
        format: uuid
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      leader_employee_id:
        type: string
        format: uuid
      is_active:
        type: boolean
  AddTeamMemberRequest:
    type: object
    properties:
      employee_id:
        type: string
        format: uuid
      role:
        $ref: '#/definitions/TeamMemberRole'
    required:
      - employee_id
  UpdateTeamMemberRequest:
    type: object
    properties:
      role:
        $ref: '#/definitions/TeamMemberRole'
    required:
      - role
  TeamList:
    type: object
    properties:
      items:
        type: array
        items:
          $ref: '#/definitions/Team'
      next_cursor:
        type: string
    required:
      - items
  EmployeeDayPlan:
    type: object
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      plan_date:
        type: string
        format: date
      day_plan_id:
        type: string
        format: uuid
      source:
        $ref: '#/definitions/EmployeeDayPlanSource'
      notes:
        type: string
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      day_plan:
        $ref: '#/definitions/DayPlan'
    required:
      - id
      - tenant_id
      - employee_id
      - plan_date
      - source
  CreateEmployeeDayPlanRequest:
    type: object
    properties:
      employee_id:
        type: string
        format: uuid
      plan_date:
        type: string
        format: date
      day_plan_id:
        type: string
        format: uuid
        description: 'If null, marks the day as an off day'
      source:
        $ref: '#/definitions/EmployeeDayPlanSource'
      notes:
        type: string
    required:
      - employee_id
      - plan_date
  UpdateEmployeeDayPlanRequest:
    type: object
    properties:
      day_plan_id:
        type: string
        format: uuid
        description: 'If null, marks the day as an off day'
      source:
        $ref: '#/definitions/EmployeeDayPlanSource'
      notes:
        type: string
  EmployeeDayPlanList:
    type: object
    properties:
      items:
        type: array
        items:
          $ref: '#/definitions/EmployeeDayPlan'
      next_cursor:
        type: string
    required:
      - items
  BulkCreateEmployeeDayPlanRequest:
    type: object
    properties:
      plans:
        type: array
        items:
          type: object
          properties:
            employee_id:
              type: string
              format: uuid
            plan_date:
              type: string
              format: date
            day_plan_id:
              type: string
              format: uuid
            source:
              $ref: '#/definitions/EmployeeDayPlanSource'
            notes:
              type: string
          required:
            - employee_id
            - plan_date
    required:
      - plans
  DeleteRangeRequest:
    type: object
    properties:
      employee_id:
        type: string
        format: uuid
      from:
        type: string
        format: date
      to:
        type: string
        format: date
    required:
      - employee_id
      - from
      - to
  EmployeeDayPlanSource:
    type: string
    enum:
      - tariff
      - manual
      - holiday
  MonthlyEvaluation:
    type: object
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      name:
        type: string
      description:
        type: string
      flextime_cap_positive:
        type: integer
        description: Maximum positive flextime in minutes
      flextime_cap_negative:
        type: integer
        description: Maximum negative flextime in minutes
      overtime_threshold:
        type: integer
        description: Overtime threshold in minutes
      max_carryover_vacation:
        type: number
        format: decimal
        description: Maximum vacation days that can be carried over
      is_default:
        type: boolean
      is_active:
        type: boolean
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
    required:
      - id
      - tenant_id
      - name
      - is_default
      - is_active
  CreateMonthlyEvaluationRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 100
      description:
        type: string
      flextime_cap_positive:
        type: integer
        minimum: 0
        description: Maximum positive flextime in minutes
      flextime_cap_negative:
        type: integer
        minimum: 0
        description: Maximum negative flextime in minutes
      overtime_threshold:
        type: integer
        minimum: 0
        description: Overtime threshold in minutes
      max_carryover_vacation:
        type: number
        format: decimal
        minimum: 0
        description: Maximum vacation days that can be carried over
      is_default:
        type: boolean
        default: false
      is_active:
        type: boolean
        default: true
    required:
      - name
  UpdateMonthlyEvaluationRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 100
      description:
        type: string
      flextime_cap_positive:
        type: integer
        minimum: 0
      flextime_cap_negative:
        type: integer
        minimum: 0
      overtime_threshold:
        type: integer
        minimum: 0
      max_carryover_vacation:
        type: number
        format: decimal
        minimum: 0
      is_default:
        type: boolean
      is_active:
        type: boolean
  MonthlyEvaluationList:
    type: object
    properties:
      items:
        type: array
        items:
          $ref: '#/definitions/MonthlyEvaluation'
      next_cursor:
        type: string
    required:
      - items
  CalculationRule:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
      - value
      - factor
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: FULL_DAY
      name:
        type: string
        example: Full Day Absence
      description:
        type: string
        x-nullable: true
      account_id:
        type: string
        format: uuid
        x-nullable: true
        description: Linked account for writing calculated values
      value:
        type: integer
        description: Value in minutes. 0 means use daily target time from employee time plan
        example: 0
      factor:
        type: number
        format: double
        description: 'Multiplier applied to value or daily target time (e.g. 1.0 = full, 0.5 = half)'
        example: 1
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CalculationRuleSummary:
    type: object
    required:
      - id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
  CreateCalculationRuleRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      account_id:
        type: string
        format: uuid
      value:
        type: integer
        default: 0
        description: Value in minutes. 0 = use daily target time
      factor:
        type: number
        format: double
        default: 1
        description: 'Multiplier (e.g. 1.0 = full, 0.5 = half)'
  UpdateCalculationRuleRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      account_id:
        type: string
        format: uuid
        x-nullable: true
      value:
        type: integer
        description: Value in minutes. 0 = use daily target time
      factor:
        type: number
        format: double
        description: 'Multiplier (e.g. 1.0 = full, 0.5 = half)'
      is_active:
        type: boolean
  CalculationRuleList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/CalculationRule'
  CorrectionMessage:
    type: object
    required:
      - id
      - tenant_id
      - code
      - default_text
      - severity
      - is_active
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        description: Error/warning code matching calculation engine constants
        example: MISSING_COME
      default_text:
        type: string
        description: System-provided default message text
        example: Missing arrival booking
      custom_text:
        type: string
        x-nullable: true
        description: 'Tenant-specific override text. When set, replaces default_text in outputs'
      effective_text:
        type: string
        description: 'Resolved text (custom_text if set, otherwise default_text)'
        readOnly: true
      severity:
        type: string
        enum:
          - error
          - hint
        description: 'Classification: error or hint'
        example: error
      description:
        type: string
        x-nullable: true
        description: Internal description of when this error/hint occurs
      is_active:
        type: boolean
        description: Whether this message is active
        default: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  UpdateCorrectionMessageRequest:
    type: object
    properties:
      custom_text:
        type: string
        x-nullable: true
        description: 'Set to override default text, or null to clear override'
      severity:
        type: string
        enum:
          - error
          - hint
      is_active:
        type: boolean
  CorrectionMessageList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/CorrectionMessage'
      meta:
        $ref: '#/definitions/PaginationMeta'
  CorrectionAssistantItem:
    type: object
    required:
      - daily_value_id
      - employee_id
      - value_date
      - errors
    properties:
      daily_value_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      employee_name:
        type: string
        example: Max Mustermann
      department_id:
        type: string
        format: uuid
        x-nullable: true
      department_name:
        type: string
        x-nullable: true
      value_date:
        type: string
        format: date
        example: '2026-01-15'
      errors:
        type: array
        items:
          $ref: '#/definitions/CorrectionAssistantError'
  CorrectionAssistantError:
    type: object
    required:
      - code
      - severity
      - message
    properties:
      code:
        type: string
        description: Error/warning code
        example: MISSING_GO
      severity:
        type: string
        enum:
          - error
          - hint
        example: error
      message:
        type: string
        description: Resolved message text (custom override or default)
        example: Missing departure booking
      error_type:
        type: string
        enum:
          - missing_booking
          - unpaired_booking
          - overlapping_bookings
          - core_time_violation
          - exceeds_max_hours
          - below_min_hours
          - break_violation
          - invalid_sequence
        description: Categorized error type
  CorrectionAssistantList:
    type: object
    required:
      - data
      - meta
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/CorrectionAssistantItem'
      meta:
        $ref: '#/definitions/PaginationMeta'
  VacationSpecialCalculation:
    type: object
    required:
      - id
      - tenant_id
      - type
      - threshold
      - bonus_days
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      type:
        type: string
        enum:
          - age
          - tenure
          - disability
        description: 'Type of special calculation: age (Alter), tenure (Betriebszugehoerigkeit), or disability (Behinderung)'
        example: age
      threshold:
        type: integer
        description: 'Age in years (age), tenure in years (tenure), 0 for disability'
        example: 50
      bonus_days:
        type: number
        format: double
        description: Additional vacation days when threshold is met
        example: 2
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  VacationSpecialCalculationSummary:
    type: object
    required:
      - id
      - type
      - threshold
      - bonus_days
    properties:
      id:
        type: string
        format: uuid
      type:
        type: string
        enum:
          - age
          - tenure
          - disability
      threshold:
        type: integer
      bonus_days:
        type: number
        format: double
  CreateVacationSpecialCalculationRequest:
    type: object
    required:
      - type
      - bonus_days
    properties:
      type:
        type: string
        enum:
          - age
          - tenure
          - disability
      threshold:
        type: integer
        default: 0
        description: Age or tenure threshold in years. Must be 0 for disability type.
      bonus_days:
        type: number
        format: double
        minimum: 0.5
        description: Additional vacation days
      description:
        type: string
  UpdateVacationSpecialCalculationRequest:
    type: object
    properties:
      threshold:
        type: integer
      bonus_days:
        type: number
        format: double
        minimum: 0.5
      description:
        type: string
      is_active:
        type: boolean
  VacationSpecialCalculationList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/VacationSpecialCalculation'
  VacationCalculationGroup:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
      - basis
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: STANDARD
      name:
        type: string
        example: Standard Vacation Group
      description:
        type: string
        x-nullable: true
      basis:
        type: string
        enum:
          - calendar_year
          - entry_date
        description: 'Vacation year basis: calendar_year (Jan-Dec) or entry_date (hire anniversary)'
        example: calendar_year
      is_active:
        type: boolean
        example: true
      special_calculations:
        type: array
        items:
          $ref: '#/definitions/VacationSpecialCalculationSummary'
        description: Special calculations linked to this group
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  VacationCalculationGroupSummary:
    type: object
    required:
      - id
      - code
      - name
      - basis
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      basis:
        type: string
        enum:
          - calendar_year
          - entry_date
  CreateVacationCalculationGroupRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      basis:
        type: string
        enum:
          - calendar_year
          - entry_date
        default: calendar_year
      special_calculation_ids:
        type: array
        items:
          type: string
          format: uuid
        description: IDs of special calculations to link to this group
  UpdateVacationCalculationGroupRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      basis:
        type: string
        enum:
          - calendar_year
          - entry_date
      is_active:
        type: boolean
      special_calculation_ids:
        type: array
        items:
          type: string
          format: uuid
        description: Replace linked special calculations with this set
  VacationCalculationGroupList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/VacationCalculationGroup'
  VacationEntitlementPreviewRequest:
    type: object
    required:
      - employee_id
      - year
    properties:
      employee_id:
        type: string
        format: uuid
      year:
        type: integer
        example: 2026
      calculation_group_id:
        type: string
        format: uuid
        description: 'Optional override: use this group instead of the employee''s employment type group'
  VacationEntitlementPreview:
    type: object
    required:
      - employee_id
      - year
    properties:
      employee_id:
        type: string
        format: uuid
      employee_name:
        type: string
        description: Employee display name for convenience
      year:
        type: integer
      basis:
        type: string
        enum:
          - calendar_year
          - entry_date
      calculation_group_id:
        type: string
        format: uuid
        x-nullable: true
      calculation_group_name:
        type: string
        x-nullable: true
      base_entitlement:
        type: number
        format: double
        description: Full-year base vacation days from tariff/employee
      pro_rated_entitlement:
        type: number
        format: double
        description: After pro-rating for months employed
      part_time_adjustment:
        type: number
        format: double
        description: After part-time factor adjustment
      age_bonus:
        type: number
        format: double
        description: Bonus days from age special calculations
      tenure_bonus:
        type: number
        format: double
        description: Bonus days from tenure special calculations
      disability_bonus:
        type: number
        format: double
        description: Bonus days from disability special calculations
      total_entitlement:
        type: number
        format: double
        description: Final entitlement (rounded to nearest 0.5)
      months_employed:
        type: integer
        description: Number of months employed in the year
      age_at_reference:
        type: integer
        description: Employee age at reference date
      tenure_years:
        type: integer
        description: Years of service at reference date
      weekly_hours:
        type: number
        format: double
        description: Employee weekly hours
      standard_weekly_hours:
        type: number
        format: double
        description: Standard full-time weekly hours
      part_time_factor:
        type: number
        format: double
        description: Part-time factor (weekly_hours / standard_weekly_hours)
  VacationCappingRule:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
      - rule_type
      - cutoff_month
      - cutoff_day
      - cap_value
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: YEAR_END_10
      name:
        type: string
        example: Year-end cap at 10 days
      description:
        type: string
        x-nullable: true
      rule_type:
        type: string
        enum:
          - year_end
          - mid_year
        description: 'year_end: limits carryover at year boundary; mid_year: forfeits prior-year carryover after cutoff'
        example: year_end
      cutoff_month:
        type: integer
        minimum: 1
        maximum: 12
        description: Month of cutoff date (1-12)
        example: 12
      cutoff_day:
        type: integer
        minimum: 1
        maximum: 31
        description: Day of cutoff date (1-31)
        example: 31
      cap_value:
        type: number
        format: double
        description: Maximum days to carry over. 0 means forfeit all.
        example: 10
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  VacationCappingRuleSummary:
    type: object
    required:
      - id
      - code
      - name
      - rule_type
      - cap_value
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
      rule_type:
        type: string
        enum:
          - year_end
          - mid_year
      cap_value:
        type: number
        format: double
  CreateVacationCappingRuleRequest:
    type: object
    required:
      - code
      - name
      - rule_type
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      rule_type:
        type: string
        enum:
          - year_end
          - mid_year
      cutoff_month:
        type: integer
        minimum: 1
        maximum: 12
        default: 12
      cutoff_day:
        type: integer
        minimum: 1
        maximum: 31
        default: 31
      cap_value:
        type: number
        format: double
        default: 0
  UpdateVacationCappingRuleRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      rule_type:
        type: string
        enum:
          - year_end
          - mid_year
      cutoff_month:
        type: integer
        minimum: 1
        maximum: 12
      cutoff_day:
        type: integer
        minimum: 1
        maximum: 31
      cap_value:
        type: number
        format: double
      is_active:
        type: boolean
  VacationCappingRuleList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/VacationCappingRule'
  VacationCappingRuleGroup:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: STANDARD_CAPPING
      name:
        type: string
        example: Standard Capping Group
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      capping_rules:
        type: array
        items:
          $ref: '#/definitions/VacationCappingRuleSummary'
        description: Capping rules linked to this group
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  VacationCappingRuleGroupSummary:
    type: object
    required:
      - id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      code:
        type: string
      name:
        type: string
  CreateVacationCappingRuleGroupRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      capping_rule_ids:
        type: array
        items:
          type: string
          format: uuid
        description: IDs of capping rules to link to this group
  UpdateVacationCappingRuleGroupRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      is_active:
        type: boolean
      capping_rule_ids:
        type: array
        items:
          type: string
          format: uuid
        description: Replace linked capping rules with this set
  VacationCappingRuleGroupList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/VacationCappingRuleGroup'
  EmployeeCappingException:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - capping_rule_id
      - exemption_type
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      capping_rule_id:
        type: string
        format: uuid
      exemption_type:
        type: string
        enum:
          - full
          - partial
        description: 'full: employee keeps all vacation; partial: up to retain_days'
      retain_days:
        type: number
        format: double
        x-nullable: true
        description: 'For partial exemptions: max days to retain despite capping'
      year:
        type: integer
        x-nullable: true
        description: Year this exception applies to. Null means all years.
      notes:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateEmployeeCappingExceptionRequest:
    type: object
    required:
      - employee_id
      - capping_rule_id
      - exemption_type
    properties:
      employee_id:
        type: string
        format: uuid
      capping_rule_id:
        type: string
        format: uuid
      exemption_type:
        type: string
        enum:
          - full
          - partial
      retain_days:
        type: number
        format: double
      year:
        type: integer
      notes:
        type: string
  UpdateEmployeeCappingExceptionRequest:
    type: object
    properties:
      exemption_type:
        type: string
        enum:
          - full
          - partial
      retain_days:
        type: number
        format: double
      year:
        type: integer
      notes:
        type: string
      is_active:
        type: boolean
  EmployeeCappingExceptionList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EmployeeCappingException'
  VacationCarryoverPreviewRequest:
    type: object
    required:
      - employee_id
      - year
    properties:
      employee_id:
        type: string
        format: uuid
      year:
        type: integer
        description: Year to preview carryover for
  VacationCarryoverPreview:
    type: object
    properties:
      employee_id:
        type: string
        format: uuid
      year:
        type: integer
      available_days:
        type: number
        format: double
        description: Days available for carryover before capping
      capped_carryover:
        type: number
        format: double
        description: Carryover after applying capping rules
      forfeited_days:
        type: number
        format: double
        description: Days lost due to capping
      rules_applied:
        type: array
        items:
          $ref: '#/definitions/CappingRuleApplication'
      has_exception:
        type: boolean
        description: Whether employee has an active capping exception
  CappingRuleApplication:
    type: object
    properties:
      rule_id:
        type: string
        format: uuid
      rule_name:
        type: string
      rule_type:
        type: string
        enum:
          - year_end
          - mid_year
      cap_value:
        type: number
        format: double
      applied:
        type: boolean
        description: Whether this rule actually reduced the carryover
      exception_active:
        type: boolean
        description: Whether an employee exception overrides this rule
  EmployeeTariffAssignment:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - tariff_id
      - effective_from
      - overwrite_behavior
      - is_active
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      tariff_id:
        type: string
        format: uuid
      effective_from:
        type: string
        format: date
        description: Start date (inclusive) when this tariff assignment takes effect
      effective_to:
        type: string
        format: date
        description: End date (inclusive). NULL means open-ended
        x-nullable: true
      overwrite_behavior:
        type: string
        enum:
          - overwrite
          - preserve_manual
        description: Whether to overwrite manual day plan edits when syncing
        example: preserve_manual
      notes:
        type: string
        x-nullable: true
      is_active:
        type: boolean
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      tariff:
        type: object
        required:
          - id
          - code
          - name
        properties:
          id:
            type: string
            format: uuid
          code:
            type: string
          name:
            type: string
      employee:
        $ref: '#/definitions/EmployeeSummary'
  EmployeeTariffAssignmentList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EmployeeTariffAssignment'
  CreateEmployeeTariffAssignmentRequest:
    type: object
    required:
      - tariff_id
      - effective_from
    properties:
      tariff_id:
        type: string
        format: uuid
      effective_from:
        type: string
        format: date
      effective_to:
        type: string
        format: date
      overwrite_behavior:
        type: string
        enum:
          - overwrite
          - preserve_manual
        default: preserve_manual
      notes:
        type: string
  UpdateEmployeeTariffAssignmentRequest:
    type: object
    properties:
      effective_from:
        type: string
        format: date
      effective_to:
        type: string
        format: date
      overwrite_behavior:
        type: string
        enum:
          - overwrite
          - preserve_manual
      notes:
        type: string
      is_active:
        type: boolean
  EffectiveTariffResponse:
    type: object
    required:
      - employee_id
      - date
      - source
    properties:
      employee_id:
        type: string
        format: uuid
      date:
        type: string
        format: date
      source:
        type: string
        enum:
          - assignment
          - default
          - none
        description: '''assignment'' = from employee_tariff_assignments, ''default'' = from employee.tariff_id, ''none'' = no tariff'
      tariff:
        $ref: '#/definitions/Tariff'
      assignment:
        $ref: '#/definitions/EmployeeTariffAssignment'
  Activity:
    type: object
    required:
      - id
      - tenant_id
      - name
      - code
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: DEV
      name:
        type: string
        example: Development
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateActivityRequest:
    type: object
    required:
      - name
      - code
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 50
      description:
        type: string
  UpdateActivityRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 50
      description:
        type: string
      is_active:
        type: boolean
  ActivityList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Activity'
  Order:
    type: object
    required:
      - id
      - tenant_id
      - name
      - code
      - status
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: ORD-001
      name:
        type: string
        example: Website Redesign
      description:
        type: string
        x-nullable: true
      status:
        type: string
        enum:
          - planned
          - active
          - completed
          - cancelled
        example: active
      customer:
        type: string
        x-nullable: true
        example: Acme Corp
      cost_center_id:
        type: string
        format: uuid
        x-nullable: true
      billing_rate_per_hour:
        type: number
        x-nullable: true
        example: 120
      valid_from:
        type: string
        format: date
        x-nullable: true
      valid_to:
        type: string
        format: date
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateOrderRequest:
    type: object
    required:
      - name
      - code
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 50
      description:
        type: string
      status:
        type: string
        enum:
          - planned
          - active
          - completed
          - cancelled
      customer:
        type: string
      cost_center_id:
        type: string
        format: uuid
      billing_rate_per_hour:
        type: number
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
  UpdateOrderRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      code:
        type: string
        minLength: 1
        maxLength: 50
      description:
        type: string
      status:
        type: string
        enum:
          - planned
          - active
          - completed
          - cancelled
      customer:
        type: string
      cost_center_id:
        type: string
        format: uuid
      billing_rate_per_hour:
        type: number
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      is_active:
        type: boolean
  OrderList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Order'
  OrderAssignment:
    type: object
    required:
      - id
      - tenant_id
      - order_id
      - employee_id
      - role
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      order_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      role:
        type: string
        enum:
          - worker
          - leader
          - sales
        example: worker
      valid_from:
        type: string
        format: date
        x-nullable: true
      valid_to:
        type: string
        format: date
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateOrderAssignmentRequest:
    type: object
    required:
      - order_id
      - employee_id
    properties:
      order_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      role:
        type: string
        enum:
          - worker
          - leader
          - sales
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
  UpdateOrderAssignmentRequest:
    type: object
    properties:
      role:
        type: string
        enum:
          - worker
          - leader
          - sales
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      is_active:
        type: boolean
  OrderAssignmentList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/OrderAssignment'
  OrderBooking:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - order_id
      - booking_date
      - time_minutes
      - source
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      order_id:
        type: string
        format: uuid
      activity_id:
        type: string
        format: uuid
        x-nullable: true
      booking_date:
        type: string
        format: date
      time_minutes:
        type: integer
        example: 480
      description:
        type: string
        x-nullable: true
      source:
        type: string
        enum:
          - manual
          - auto
          - import
        example: manual
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      created_by:
        type: string
        format: uuid
        x-nullable: true
      updated_by:
        type: string
        format: uuid
        x-nullable: true
  CreateOrderBookingRequest:
    type: object
    required:
      - employee_id
      - order_id
      - booking_date
      - time_minutes
    properties:
      employee_id:
        type: string
        format: uuid
      order_id:
        type: string
        format: uuid
      activity_id:
        type: string
        format: uuid
      booking_date:
        type: string
        format: date
      time_minutes:
        type: integer
        minimum: 1
      description:
        type: string
  UpdateOrderBookingRequest:
    type: object
    properties:
      order_id:
        type: string
        format: uuid
      activity_id:
        type: string
        format: uuid
      booking_date:
        type: string
        format: date
      time_minutes:
        type: integer
        minimum: 1
      description:
        type: string
  OrderBookingList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/OrderBooking'
  EvaluationDailyValue:
    type: object
    required:
      - employee_id
      - date
    properties:
      id:
        type: string
        format: uuid
        description: DailyValue ID (null for days-without-bookings placeholder rows)
        x-nullable: true
      employee_id:
        type: string
        format: uuid
      date:
        type: string
        format: date
      status:
        type: string
        enum:
          - pending
          - calculated
          - error
          - approved
          - no_data
        description: no_data for days without bookings placeholder rows
      target_minutes:
        type: integer
      gross_minutes:
        type: integer
      net_minutes:
        type: integer
      break_minutes:
        type: integer
      overtime_minutes:
        type: integer
      undertime_minutes:
        type: integer
      balance_minutes:
        type: integer
        description: overtime - undertime
      booking_count:
        type: integer
      has_errors:
        type: boolean
      first_come:
        type: string
        description: 'HH:MM or null'
        x-nullable: true
      last_go:
        type: string
        description: 'HH:MM or null'
        x-nullable: true
      employee:
        $ref: '#/definitions/EmployeeSummary'
  EvaluationDailyValueList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EvaluationDailyValue'
      meta:
        $ref: '#/definitions/PaginationMeta'
  EvaluationBooking:
    type: object
    required:
      - id
      - employee_id
      - booking_date
      - edited_time
    properties:
      id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      booking_date:
        type: string
        format: date
      booking_type_id:
        type: string
        format: uuid
      original_time:
        type: integer
        description: Original booking time in minutes from midnight
      edited_time:
        type: integer
        description: Edited/corrected time in minutes from midnight
      calculated_time:
        type: integer
        x-nullable: true
      time_string:
        type: string
        description: 'Formatted time HH:MM'
      source:
        type: string
        enum:
          - web
          - terminal
          - api
          - import
          - correction
      pair_id:
        type: string
        format: uuid
        x-nullable: true
      terminal_id:
        type: string
        format: uuid
        x-nullable: true
      notes:
        type: string
        x-nullable: true
      created_at:
        type: string
        format: date-time
      employee:
        $ref: '#/definitions/EmployeeSummary'
      booking_type:
        $ref: '#/definitions/BookingTypeSummary'
  EvaluationBookingList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EvaluationBooking'
      meta:
        $ref: '#/definitions/PaginationMeta'
  EvaluationTerminalBooking:
    type: object
    required:
      - id
      - employee_id
      - booking_date
      - original_time
      - edited_time
    properties:
      id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      booking_date:
        type: string
        format: date
      booking_type_id:
        type: string
        format: uuid
      original_time:
        type: integer
        description: Raw terminal time (minutes from midnight)
      original_time_string:
        type: string
        description: 'Raw terminal time HH:MM'
      edited_time:
        type: integer
        description: Corrected time (minutes from midnight)
      edited_time_string:
        type: string
        description: 'Corrected time HH:MM'
      calculated_time:
        type: integer
        x-nullable: true
      was_edited:
        type: boolean
        description: true when original_time != edited_time
      terminal_id:
        type: string
        format: uuid
        x-nullable: true
      source:
        type: string
      created_at:
        type: string
        format: date-time
      employee:
        $ref: '#/definitions/EmployeeSummary'
      booking_type:
        $ref: '#/definitions/BookingTypeSummary'
  EvaluationTerminalBookingList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EvaluationTerminalBooking'
      meta:
        $ref: '#/definitions/PaginationMeta'
  EvaluationLogEntry:
    type: object
    required:
      - id
      - action
      - entity_type
      - entity_id
      - performed_at
    properties:
      id:
        type: string
        format: uuid
      action:
        type: string
        enum:
          - create
          - update
          - delete
          - approve
          - reject
          - close
          - reopen
      entity_type:
        type: string
        description: 'booking, absence, monthly_value, etc.'
      entity_id:
        type: string
        format: uuid
      entity_name:
        type: string
        x-nullable: true
      changes:
        type: object
        x-nullable: true
        description: Before/after values as JSON
      performed_at:
        type: string
        format: date-time
      user_id:
        type: string
        format: uuid
        x-nullable: true
      user:
        $ref: '#/definitions/UserSummary'
  EvaluationLogEntryList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EvaluationLogEntry'
      meta:
        $ref: '#/definitions/PaginationMeta'
  EvaluationWorkflowEntry:
    type: object
    required:
      - id
      - action
      - entity_type
      - entity_id
      - performed_at
    properties:
      id:
        type: string
        format: uuid
      action:
        type: string
        enum:
          - create
          - approve
          - reject
          - close
          - reopen
      entity_type:
        type: string
        description: 'absence, monthly_value'
      entity_id:
        type: string
        format: uuid
      entity_name:
        type: string
        x-nullable: true
      performed_at:
        type: string
        format: date-time
      user_id:
        type: string
        format: uuid
        x-nullable: true
      user:
        $ref: '#/definitions/UserSummary'
      metadata:
        type: object
        x-nullable: true
  EvaluationWorkflowEntryList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EvaluationWorkflowEntry'
      meta:
        $ref: '#/definitions/PaginationMeta'
  SystemSettings:
    type: object
    required:
      - id
      - tenant_id
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      rounding_relative_to_plan:
        type: boolean
        description: 'When true, rounding grid anchors at planned start time instead of midnight'
      error_list_enabled:
        type: boolean
      tracked_error_codes:
        type: array
        items:
          type: string
      auto_fill_order_end_bookings:
        type: boolean
      birthday_window_days_before:
        type: integer
        minimum: 0
        maximum: 90
      birthday_window_days_after:
        type: integer
        minimum: 0
        maximum: 90
      follow_up_entries_enabled:
        type: boolean
      proxy_host:
        type: string
        x-nullable: true
      proxy_port:
        type: integer
        x-nullable: true
      proxy_username:
        type: string
        x-nullable: true
      proxy_enabled:
        type: boolean
      server_alive_enabled:
        type: boolean
      server_alive_expected_completion_time:
        type: integer
        x-nullable: true
        description: 'Minutes from midnight (e.g. 300 = 05:00)'
      server_alive_threshold_minutes:
        type: integer
        x-nullable: true
      server_alive_notify_admins:
        type: boolean
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  UpdateSystemSettingsRequest:
    type: object
    properties:
      rounding_relative_to_plan:
        type: boolean
      error_list_enabled:
        type: boolean
      tracked_error_codes:
        type: array
        items:
          type: string
      auto_fill_order_end_bookings:
        type: boolean
      birthday_window_days_before:
        type: integer
        minimum: 0
        maximum: 90
      birthday_window_days_after:
        type: integer
        minimum: 0
        maximum: 90
      follow_up_entries_enabled:
        type: boolean
      proxy_host:
        type: string
        x-nullable: true
      proxy_port:
        type: integer
        x-nullable: true
      proxy_username:
        type: string
        x-nullable: true
      proxy_password:
        type: string
        x-nullable: true
        description: Write-only. Never returned in responses.
      proxy_enabled:
        type: boolean
      server_alive_enabled:
        type: boolean
      server_alive_expected_completion_time:
        type: integer
        x-nullable: true
      server_alive_threshold_minutes:
        type: integer
        x-nullable: true
      server_alive_notify_admins:
        type: boolean
  CleanupDeleteBookingsRequest:
    type: object
    required:
      - date_from
      - date_to
    properties:
      date_from:
        type: string
        format: date
      date_to:
        type: string
        format: date
      employee_ids:
        type: array
        items:
          type: string
          format: uuid
        description: 'Optional. If empty, applies to all employees.'
      confirm:
        type: boolean
        description: Must be true to execute. False returns preview count.
  CleanupDeleteBookingDataRequest:
    type: object
    required:
      - date_from
      - date_to
    properties:
      date_from:
        type: string
        format: date
      date_to:
        type: string
        format: date
      employee_ids:
        type: array
        items:
          type: string
          format: uuid
      confirm:
        type: boolean
  CleanupReReadBookingsRequest:
    type: object
    required:
      - date_from
      - date_to
    properties:
      date_from:
        type: string
        format: date
      date_to:
        type: string
        format: date
      employee_ids:
        type: array
        items:
          type: string
          format: uuid
      confirm:
        type: boolean
  CleanupMarkDeleteOrdersRequest:
    type: object
    required:
      - order_ids
    properties:
      order_ids:
        type: array
        items:
          type: string
          format: uuid
        minItems: 1
      confirm:
        type: boolean
  CleanupResult:
    type: object
    required:
      - operation
      - affected_count
    properties:
      operation:
        type: string
        enum:
          - delete_bookings
          - delete_booking_data
          - re_read_bookings
          - mark_delete_orders
      affected_count:
        type: integer
      preview:
        type: boolean
        description: True if this is a dry-run preview
      details:
        type: object
        additionalProperties: true
      performed_at:
        type: string
        format: date-time
  Schedule:
    type: object
    required:
      - id
      - tenant_id
      - name
      - timing_type
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      name:
        type: string
        example: Nightly Calculation
      description:
        type: string
        x-nullable: true
      timing_type:
        type: string
        enum:
          - seconds
          - minutes
          - hours
          - daily
          - weekly
          - monthly
          - manual
      timing_config:
        $ref: '#/definitions/TimingConfig'
      is_enabled:
        type: boolean
      last_run_at:
        type: string
        format: date-time
        x-nullable: true
      next_run_at:
        type: string
        format: date-time
        x-nullable: true
      tasks:
        type: array
        items:
          $ref: '#/definitions/ScheduleTask'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  TimingConfig:
    type: object
    properties:
      interval:
        type: integer
        description: Interval value for seconds/minutes/hours timing types
        example: 30
      time:
        type: string
        description: 'Time of day for daily/weekly/monthly (HH:MM format)'
        example: '02:00'
      day_of_week:
        type: integer
        description: 'Day of week for weekly (0=Sunday, 1=Monday, ...6=Saturday)'
        minimum: 0
        maximum: 6
      day_of_month:
        type: integer
        description: Day of month for monthly timing type
        minimum: 1
        maximum: 31
  ScheduleTask:
    type: object
    required:
      - id
      - schedule_id
      - task_type
      - sort_order
    properties:
      id:
        type: string
        format: uuid
      schedule_id:
        type: string
        format: uuid
      task_type:
        type: string
        enum:
          - calculate_days
          - calculate_months
          - backup_database
          - send_notifications
          - export_data
          - alive_check
          - terminal_sync
          - terminal_import
      sort_order:
        type: integer
      parameters:
        type: object
        additionalProperties: true
      is_enabled:
        type: boolean
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  ScheduleExecution:
    type: object
    required:
      - id
      - schedule_id
      - status
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      schedule_id:
        type: string
        format: uuid
      status:
        type: string
        enum:
          - pending
          - running
          - completed
          - failed
          - partial
      trigger_type:
        type: string
        enum:
          - scheduled
          - manual
      triggered_by:
        type: string
        format: uuid
        x-nullable: true
      started_at:
        type: string
        format: date-time
        x-nullable: true
      completed_at:
        type: string
        format: date-time
        x-nullable: true
      error_message:
        type: string
        x-nullable: true
      tasks_total:
        type: integer
      tasks_succeeded:
        type: integer
      tasks_failed:
        type: integer
      task_executions:
        type: array
        items:
          $ref: '#/definitions/ScheduleTaskExecution'
      created_at:
        type: string
        format: date-time
  ScheduleTaskExecution:
    type: object
    properties:
      id:
        type: string
        format: uuid
      execution_id:
        type: string
        format: uuid
      task_type:
        type: string
      sort_order:
        type: integer
      status:
        type: string
        enum:
          - pending
          - running
          - completed
          - failed
          - skipped
      started_at:
        type: string
        format: date-time
        x-nullable: true
      completed_at:
        type: string
        format: date-time
        x-nullable: true
      error_message:
        type: string
        x-nullable: true
      result:
        type: object
        additionalProperties: true
      created_at:
        type: string
        format: date-time
  TaskCatalogEntry:
    type: object
    required:
      - task_type
      - name
      - description
    properties:
      task_type:
        type: string
        enum:
          - calculate_days
          - calculate_months
          - backup_database
          - send_notifications
          - export_data
          - alive_check
          - terminal_sync
          - terminal_import
      name:
        type: string
      description:
        type: string
      parameter_schema:
        type: object
        additionalProperties: true
        description: JSON schema describing the accepted parameters for this task type
  CreateScheduleRequest:
    type: object
    required:
      - name
      - timing_type
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      timing_type:
        type: string
        enum:
          - seconds
          - minutes
          - hours
          - daily
          - weekly
          - monthly
          - manual
      timing_config:
        $ref: '#/definitions/TimingConfig'
      is_enabled:
        type: boolean
      tasks:
        type: array
        items:
          $ref: '#/definitions/CreateScheduleTaskRequest'
  UpdateScheduleRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      timing_type:
        type: string
        enum:
          - seconds
          - minutes
          - hours
          - daily
          - weekly
          - monthly
          - manual
      timing_config:
        $ref: '#/definitions/TimingConfig'
      is_enabled:
        type: boolean
  CreateScheduleTaskRequest:
    type: object
    required:
      - task_type
      - sort_order
    properties:
      task_type:
        type: string
        enum:
          - calculate_days
          - calculate_months
          - backup_database
          - send_notifications
          - export_data
          - alive_check
          - terminal_sync
          - terminal_import
      sort_order:
        type: integer
      parameters:
        type: object
        additionalProperties: true
      is_enabled:
        type: boolean
  UpdateScheduleTaskRequest:
    type: object
    properties:
      task_type:
        type: string
        enum:
          - calculate_days
          - calculate_months
          - backup_database
          - send_notifications
          - export_data
          - alive_check
          - terminal_sync
          - terminal_import
      sort_order:
        type: integer
      parameters:
        type: object
        additionalProperties: true
      is_enabled:
        type: boolean
  TriggerExecutionRequest:
    type: object
    properties:
      triggered_by:
        type: string
        format: uuid
        description: 'User ID of the person triggering the execution (optional, auto-detected from auth)'
  ScheduleList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Schedule'
  ScheduleExecutionList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/ScheduleExecution'
  TaskCatalog:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/TaskCatalogEntry'
  EmployeeMessage:
    type: object
    required:
      - id
      - tenant_id
      - sender_id
      - subject
      - body
      - created_at
      - updated_at
      - recipients
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      sender_id:
        type: string
        format: uuid
      subject:
        type: string
        example: Schedule change notification
      body:
        type: string
        example: Your shift has been updated for next week.
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
      recipients:
        type: array
        items:
          $ref: '#/definitions/EmployeeMessageRecipient'
  EmployeeMessageRecipient:
    type: object
    required:
      - id
      - message_id
      - employee_id
      - status
      - created_at
      - updated_at
    properties:
      id:
        type: string
        format: uuid
      message_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      status:
        type: string
        enum:
          - pending
          - sent
          - failed
      sent_at:
        type: string
        format: date-time
        x-nullable: true
      error_message:
        type: string
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  EmployeeMessageList:
    type: object
    required:
      - data
      - total
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EmployeeMessage'
      total:
        type: integer
        format: int64
  CreateEmployeeMessageRequest:
    type: object
    required:
      - subject
      - body
      - employee_ids
    properties:
      subject:
        type: string
        minLength: 1
        maxLength: 255
      body:
        type: string
        minLength: 1
      employee_ids:
        type: array
        items:
          type: string
          format: uuid
        minItems: 1
  SendEmployeeMessageResponse:
    type: object
    required:
      - message_id
      - sent
      - failed
    properties:
      message_id:
        type: string
        format: uuid
      sent:
        type: integer
        format: int64
        description: Number of recipients successfully sent
      failed:
        type: integer
        format: int64
        description: Number of recipients that failed
  ContactType:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
      - data_type
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: EMAIL
      name:
        type: string
        example: Email Address
      data_type:
        type: string
        enum:
          - text
          - email
          - phone
          - url
        example: email
        description: Validation format for contact values
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateContactTypeRequest:
    type: object
    required:
      - code
      - name
      - data_type
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      data_type:
        type: string
        enum:
          - text
          - email
          - phone
          - url
      description:
        type: string
      sort_order:
        type: integer
  UpdateContactTypeRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      is_active:
        type: boolean
      sort_order:
        type: integer
  ContactTypeList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/ContactType'
  ContactKind:
    type: object
    required:
      - id
      - tenant_id
      - contact_type_id
      - code
      - label
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      contact_type_id:
        type: string
        format: uuid
      code:
        type: string
        example: WORK_EMAIL
      label:
        type: string
        example: Work Email
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateContactKindRequest:
    type: object
    required:
      - contact_type_id
      - code
      - label
    properties:
      contact_type_id:
        type: string
        format: uuid
      code:
        type: string
        minLength: 1
        maxLength: 50
      label:
        type: string
        minLength: 1
        maxLength: 255
      sort_order:
        type: integer
  UpdateContactKindRequest:
    type: object
    properties:
      label:
        type: string
        minLength: 1
        maxLength: 255
      is_active:
        type: boolean
      sort_order:
        type: integer
  ContactKindList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/ContactKind'
  RawTerminalBooking:
    type: object
    required:
      - id
      - tenant_id
      - import_batch_id
      - terminal_id
      - employee_pin
      - raw_timestamp
      - raw_booking_code
      - booking_date
      - status
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      import_batch_id:
        type: string
        format: uuid
      terminal_id:
        type: string
      employee_pin:
        type: string
      employee_id:
        type: string
        format: uuid
        x-nullable: true
      raw_timestamp:
        type: string
        format: date-time
      raw_booking_code:
        type: string
        description: 'Raw booking code from terminal (e.g. A1, A2, P1, P2, D1, D2)'
      booking_date:
        type: string
        format: date
      booking_type_id:
        type: string
        format: uuid
        x-nullable: true
      processed_booking_id:
        type: string
        format: uuid
        x-nullable: true
      status:
        type: string
        enum:
          - pending
          - processed
          - failed
          - skipped
      error_message:
        type: string
        x-nullable: true
      employee:
        $ref: '#/definitions/EmployeeSummary'
      booking_type:
        $ref: '#/definitions/BookingTypeSummary'
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  RawTerminalBookingList:
    type: object
    required:
      - data
      - meta
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/RawTerminalBooking'
      meta:
        $ref: '#/definitions/PaginationMeta'
  ImportBatch:
    type: object
    required:
      - id
      - tenant_id
      - batch_reference
      - source
      - status
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      batch_reference:
        type: string
      source:
        type: string
      terminal_id:
        type: string
        x-nullable: true
      status:
        type: string
        enum:
          - pending
          - processing
          - completed
          - failed
      records_total:
        type: integer
      records_imported:
        type: integer
      records_failed:
        type: integer
      error_message:
        type: string
        x-nullable: true
      started_at:
        type: string
        format: date-time
        x-nullable: true
      completed_at:
        type: string
        format: date-time
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  ImportBatchList:
    type: object
    required:
      - data
      - meta
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/ImportBatch'
      meta:
        $ref: '#/definitions/PaginationMeta'
  TriggerTerminalImportRequest:
    type: object
    required:
      - batch_reference
      - terminal_id
      - bookings
    properties:
      batch_reference:
        type: string
        minLength: 1
        maxLength: 255
        description: Unique batch identifier for idempotent import
      terminal_id:
        type: string
        minLength: 1
        maxLength: 100
      bookings:
        type: array
        items:
          $ref: '#/definitions/RawTerminalBookingInput'
  TriggerTerminalImportResponse:
    type: object
    required:
      - batch
    properties:
      batch:
        $ref: '#/definitions/ImportBatch'
      message:
        type: string
        description: Human-readable result message
      was_duplicate:
        type: boolean
        description: True if this batch_reference was already imported (idempotent)
  RawTerminalBookingInput:
    type: object
    required:
      - employee_pin
      - raw_timestamp
      - raw_booking_code
    properties:
      employee_pin:
        type: string
        minLength: 1
        maxLength: 20
      raw_timestamp:
        type: string
        format: date-time
      raw_booking_code:
        type: string
        minLength: 1
        maxLength: 20
        description: 'Booking code (e.g. A1, A2, P1, P2, D1, D2)'
  AccessZone:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: ZONE_A
      name:
        type: string
        example: Building A Entrance
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateAccessZoneRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      sort_order:
        type: integer
  UpdateAccessZoneRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      is_active:
        type: boolean
      sort_order:
        type: integer
  AccessZoneList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/AccessZone'
  AccessProfile:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: PROFILE_STANDARD
      name:
        type: string
        example: Standard Access
      description:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateAccessProfileRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
  UpdateAccessProfileRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      is_active:
        type: boolean
  AccessProfileList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/AccessProfile'
  EmployeeAccessAssignment:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - access_profile_id
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      access_profile_id:
        type: string
        format: uuid
      valid_from:
        type: string
        format: date
        x-nullable: true
      valid_to:
        type: string
        format: date
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateEmployeeAccessAssignmentRequest:
    type: object
    required:
      - employee_id
      - access_profile_id
    properties:
      employee_id:
        type: string
        format: uuid
      access_profile_id:
        type: string
        format: uuid
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
  UpdateEmployeeAccessAssignmentRequest:
    type: object
    properties:
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      is_active:
        type: boolean
  EmployeeAccessAssignmentList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/EmployeeAccessAssignment'
  Vehicle:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: VH-001
      name:
        type: string
        example: Company Van 1
      description:
        type: string
        x-nullable: true
      license_plate:
        type: string
        example: M-AB 1234
        x-nullable: true
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateVehicleRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      license_plate:
        type: string
        maxLength: 20
      sort_order:
        type: integer
  UpdateVehicleRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      license_plate:
        type: string
        maxLength: 20
      is_active:
        type: boolean
      sort_order:
        type: integer
  VehicleList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Vehicle'
  VehicleRoute:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: RT-001
      name:
        type: string
        example: Office to Warehouse
      description:
        type: string
        x-nullable: true
      distance_km:
        type: number
        format: double
        example: 15.5
        x-nullable: true
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateVehicleRouteRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      distance_km:
        type: number
        format: double
      sort_order:
        type: integer
  UpdateVehicleRouteRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      distance_km:
        type: number
        format: double
      is_active:
        type: boolean
      sort_order:
        type: integer
  VehicleRouteList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/VehicleRoute'
  TripRecord:
    type: object
    required:
      - id
      - tenant_id
      - vehicle_id
      - trip_date
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      vehicle_id:
        type: string
        format: uuid
      route_id:
        type: string
        format: uuid
        x-nullable: true
      trip_date:
        type: string
        format: date
        example: '2026-01-30'
      start_mileage:
        type: number
        format: double
        x-nullable: true
      end_mileage:
        type: number
        format: double
        x-nullable: true
      distance_km:
        type: number
        format: double
        x-nullable: true
      notes:
        type: string
        x-nullable: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateTripRecordRequest:
    type: object
    required:
      - vehicle_id
      - trip_date
    properties:
      vehicle_id:
        type: string
        format: uuid
      route_id:
        type: string
        format: uuid
      trip_date:
        type: string
        format: date
      start_mileage:
        type: number
        format: double
      end_mileage:
        type: number
        format: double
      distance_km:
        type: number
        format: double
      notes:
        type: string
  UpdateTripRecordRequest:
    type: object
    properties:
      route_id:
        type: string
        format: uuid
      trip_date:
        type: string
        format: date
      start_mileage:
        type: number
        format: double
      end_mileage:
        type: number
        format: double
      distance_km:
        type: number
        format: double
      notes:
        type: string
  TripRecordList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/TripRecord'
  TravelAllowanceRuleSet:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: TA-2026
      name:
        type: string
        example: Standard Travel Allowance 2026
      description:
        type: string
        x-nullable: true
      valid_from:
        type: string
        format: date
        x-nullable: true
      valid_to:
        type: string
        format: date
        x-nullable: true
      calculation_basis:
        type: string
        enum:
          - per_day
          - per_booking
        example: per_day
      distance_rule:
        type: string
        enum:
          - longest
          - shortest
          - first
          - last
        example: longest
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateTravelAllowanceRuleSetRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      calculation_basis:
        type: string
        enum:
          - per_day
          - per_booking
      distance_rule:
        type: string
        enum:
          - longest
          - shortest
          - first
          - last
      sort_order:
        type: integer
  UpdateTravelAllowanceRuleSetRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      calculation_basis:
        type: string
        enum:
          - per_day
          - per_booking
      distance_rule:
        type: string
        enum:
          - longest
          - shortest
          - first
          - last
      is_active:
        type: boolean
      sort_order:
        type: integer
  TravelAllowanceRuleSetList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/TravelAllowanceRuleSet'
  LocalTravelRule:
    type: object
    required:
      - id
      - tenant_id
      - rule_set_id
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      rule_set_id:
        type: string
        format: uuid
      min_distance_km:
        type: number
        format: double
        example: 0
      max_distance_km:
        type: number
        format: double
        x-nullable: true
        example: 50
      min_duration_minutes:
        type: integer
        example: 0
      max_duration_minutes:
        type: integer
        x-nullable: true
        example: 480
      tax_free_amount:
        type: number
        format: double
        example: 14
      taxable_amount:
        type: number
        format: double
        example: 6
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateLocalTravelRuleRequest:
    type: object
    required:
      - rule_set_id
    properties:
      rule_set_id:
        type: string
        format: uuid
      min_distance_km:
        type: number
        format: double
      max_distance_km:
        type: number
        format: double
      min_duration_minutes:
        type: integer
      max_duration_minutes:
        type: integer
      tax_free_amount:
        type: number
        format: double
      taxable_amount:
        type: number
        format: double
      sort_order:
        type: integer
  UpdateLocalTravelRuleRequest:
    type: object
    properties:
      min_distance_km:
        type: number
        format: double
      max_distance_km:
        type: number
        format: double
      min_duration_minutes:
        type: integer
      max_duration_minutes:
        type: integer
      tax_free_amount:
        type: number
        format: double
      taxable_amount:
        type: number
        format: double
      is_active:
        type: boolean
      sort_order:
        type: integer
  LocalTravelRuleList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/LocalTravelRule'
  ExtendedTravelRule:
    type: object
    required:
      - id
      - tenant_id
      - rule_set_id
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      rule_set_id:
        type: string
        format: uuid
      arrival_day_tax_free:
        type: number
        format: double
        example: 14
      arrival_day_taxable:
        type: number
        format: double
        example: 6
      departure_day_tax_free:
        type: number
        format: double
        example: 14
      departure_day_taxable:
        type: number
        format: double
        example: 6
      intermediate_day_tax_free:
        type: number
        format: double
        example: 28
      intermediate_day_taxable:
        type: number
        format: double
        example: 12
      three_month_enabled:
        type: boolean
        example: false
      three_month_tax_free:
        type: number
        format: double
        example: 14
      three_month_taxable:
        type: number
        format: double
        example: 6
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateExtendedTravelRuleRequest:
    type: object
    required:
      - rule_set_id
    properties:
      rule_set_id:
        type: string
        format: uuid
      arrival_day_tax_free:
        type: number
        format: double
      arrival_day_taxable:
        type: number
        format: double
      departure_day_tax_free:
        type: number
        format: double
      departure_day_taxable:
        type: number
        format: double
      intermediate_day_tax_free:
        type: number
        format: double
      intermediate_day_taxable:
        type: number
        format: double
      three_month_enabled:
        type: boolean
      three_month_tax_free:
        type: number
        format: double
      three_month_taxable:
        type: number
        format: double
      sort_order:
        type: integer
  UpdateExtendedTravelRuleRequest:
    type: object
    properties:
      arrival_day_tax_free:
        type: number
        format: double
      arrival_day_taxable:
        type: number
        format: double
      departure_day_tax_free:
        type: number
        format: double
      departure_day_taxable:
        type: number
        format: double
      intermediate_day_tax_free:
        type: number
        format: double
      intermediate_day_taxable:
        type: number
        format: double
      three_month_enabled:
        type: boolean
      three_month_tax_free:
        type: number
        format: double
      three_month_taxable:
        type: number
        format: double
      is_active:
        type: boolean
      sort_order:
        type: integer
  ExtendedTravelRuleList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/ExtendedTravelRule'
  TravelAllowancePreviewRequest:
    type: object
    required:
      - rule_set_id
      - trip_type
    properties:
      rule_set_id:
        type: string
        format: uuid
        description: Rule set to apply for the calculation
      trip_type:
        type: string
        enum:
          - local
          - extended
        description: 'Type of trip: local (Nahmontage) or extended (Fernmontage)'
      distance_km:
        type: number
        format: double
        description: Trip distance in kilometers (required for local trips)
      duration_minutes:
        type: integer
        description: Trip duration in minutes (required for local trips)
      start_date:
        type: string
        format: date
        description: Trip start date (required for extended trips)
      end_date:
        type: string
        format: date
        description: Trip end date (required for extended trips)
      three_month_active:
        type: boolean
        description: Whether three-month rule is currently active for extended trips
        default: false
  TravelAllowancePreview:
    type: object
    properties:
      trip_type:
        type: string
        enum:
          - local
          - extended
      rule_set_id:
        type: string
        format: uuid
      rule_set_name:
        type: string
      tax_free_total:
        type: number
        format: double
        description: Total tax-free amount
      taxable_total:
        type: number
        format: double
        description: Total taxable amount
      total_allowance:
        type: number
        format: double
        description: Combined total allowance (tax_free + taxable)
      breakdown:
        type: array
        items:
          $ref: '#/definitions/TravelAllowanceBreakdownItem'
  TravelAllowanceBreakdownItem:
    type: object
    properties:
      description:
        type: string
        description: 'Description of the line item (e.g. ''Arrival day'', ''Intermediate day x3'')'
      days:
        type: integer
        description: Number of days this line applies to
      tax_free_amount:
        type: number
        format: double
      taxable_amount:
        type: number
        format: double
      tax_free_subtotal:
        type: number
        format: double
      taxable_subtotal:
        type: number
        format: double
  Shift:
    type: object
    required:
      - id
      - tenant_id
      - code
      - name
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      code:
        type: string
        example: SHIFT-EARLY
      name:
        type: string
        example: Early Shift
      description:
        type: string
        x-nullable: true
      day_plan_id:
        type: string
        format: uuid
        x-nullable: true
      color:
        type: string
        example: '#2196F3'
        x-nullable: true
      qualification:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      sort_order:
        type: integer
        example: 0
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateShiftRequest:
    type: object
    required:
      - code
      - name
    properties:
      code:
        type: string
        minLength: 1
        maxLength: 50
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      day_plan_id:
        type: string
        format: uuid
      color:
        type: string
        maxLength: 7
      qualification:
        type: string
      sort_order:
        type: integer
  UpdateShiftRequest:
    type: object
    properties:
      name:
        type: string
        minLength: 1
        maxLength: 255
      description:
        type: string
      day_plan_id:
        type: string
        format: uuid
      color:
        type: string
        maxLength: 7
      qualification:
        type: string
      is_active:
        type: boolean
      sort_order:
        type: integer
  ShiftList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/Shift'
  ShiftAssignment:
    type: object
    required:
      - id
      - tenant_id
      - employee_id
      - shift_id
    properties:
      id:
        type: string
        format: uuid
      tenant_id:
        type: string
        format: uuid
      employee_id:
        type: string
        format: uuid
      shift_id:
        type: string
        format: uuid
      valid_from:
        type: string
        format: date
        x-nullable: true
      valid_to:
        type: string
        format: date
        x-nullable: true
      notes:
        type: string
        x-nullable: true
      is_active:
        type: boolean
        example: true
      created_at:
        type: string
        format: date-time
      updated_at:
        type: string
        format: date-time
  CreateShiftAssignmentRequest:
    type: object
    required:
      - employee_id
      - shift_id
    properties:
      employee_id:
        type: string
        format: uuid
      shift_id:
        type: string
        format: uuid
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      notes:
        type: string
  UpdateShiftAssignmentRequest:
    type: object
    properties:
      valid_from:
        type: string
        format: date
      valid_to:
        type: string
        format: date
      notes:
        type: string
      is_active:
        type: boolean
  ShiftAssignmentList:
    type: object
    required:
      - data
    properties:
      data:
        type: array
        items:
          $ref: '#/definitions/ShiftAssignment'
responses:
  BadRequest:
    description: Invalid request
    schema:
      $ref: '#/definitions/ProblemDetails'
  Unauthorized:
    description: Missing or invalid authentication
    schema:
      $ref: '#/definitions/ProblemDetails'
  Forbidden:
    description: Insufficient permissions
    schema:
      $ref: '#/definitions/ProblemDetails'
  NotFound:
    description: Resource not found
    schema:
      $ref: '#/definitions/ProblemDetails'
  InternalError:
    description: Internal server error
    schema:
      $ref: '#/definitions/ProblemDetails'
