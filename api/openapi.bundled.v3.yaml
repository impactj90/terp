openapi: 3.0.0
info:
  title: Terp API
  description: >
    RESTful API for the Terp application - Time & Resource Planning.


    ## Authentication

    All endpoints except `/health` and `/auth/*` require a valid JWT token in the Authorization header:

    ```

    Authorization: Bearer <token>

    ```


    ## Pagination

    List endpoints support cursor-based pagination:

    - `limit`: Number of items to return (default: 20, max: 100)

    - `cursor`: Cursor for next page (returned in response)


    ## Error Responses

    All errors follow RFC 7807 Problem Details format.


    ## File Structure

    This spec is organized into:

    - `paths/` - API endpoint definitions by domain

    - `schemas/` - Data models by domain

    - `responses/` - Reusable response definitions
  version: 1.0.0
  contact:
    name: API Support
  license:
    name: Proprietary
tags:
  - name: Health
    description: Health check endpoints
  - name: Auth
    description: Authentication endpoints
  - name: Users
    description: User management
  - name: Notifications
    description: Notification preferences and history
  - name: Tenants
    description: Tenant management
  - name: Employees
    description: Employee management
  - name: Departments
    description: Department management
  - name: Locations
    description: Location management
  - name: Cost Centers
    description: Cost center management
  - name: Employment Types
    description: Employment type management
  - name: User Groups
    description: User group and permission management
  - name: Day Plans
    description: Day plan configuration
  - name: Week Plans
    description: Week plan configuration
  - name: Tariffs
    description: Tariff configuration
  - name: Booking Types
    description: Booking type management
  - name: Bookings
    description: Time bookings (clock in/out)
  - name: Daily Values
    description: Daily calculated values
  - name: Holidays
    description: Holiday management
  - name: Absence Types
    description: Absence type management
  - name: Absences
    description: Absence management
  - name: Vacation
    description: Vacation balance management
  - name: Monthly Values
    description: Monthly aggregated values
  - name: Corrections
    description: Time corrections
  - name: Accounts
    description: Time account management
  - name: Audit Logs
    description: Audit log viewing
  - name: Reports
    description: Report generation
  - name: Payroll
    description: Payroll export
  - name: Teams
    description: Team management
  - name: Employee Day Plans
    description: Employee day plan assignments
  - name: Monthly Evaluations
    description: Monthly evaluation configuration
security:
  - BearerAuth: []
paths:
  /health:
    get:
      tags:
        - Health
      summary: Health check
      description: |
        Returns service health status and version. Use for load balancer health
        checks and monitoring. No authentication required.
      operationId: getHealth
      security: []
      responses:
        "200":
          description: Service healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: healthy
                  version:
                    type: string
                    example: 1.0.0
  /auth/login:
    post:
      tags:
        - Auth
      summary: Login with credentials
      description: |
        Authenticate with email/password and receive a JWT token.
        In development mode, use dev/login instead for easier testing.
      operationId: authLogin
      security: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
        required: true
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: JWT token
                  user:
                    $ref: "#/components/schemas/User"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "500":
          $ref: "#/components/responses/InternalError"
  /auth/refresh:
    post:
      tags:
        - Auth
      summary: Refresh token
      description: Exchange a valid JWT for a new one
      operationId: authRefresh
      responses:
        "200":
          description: Token refreshed
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: New JWT token
        "401":
          $ref: "#/components/responses/Unauthorized"
  /auth/logout:
    post:
      tags:
        - Auth
      summary: Logout
      description: Clears session/JWT cookie
      operationId: authLogout
      responses:
        "204":
          description: Logged out successfully
        "401":
          $ref: "#/components/responses/Unauthorized"
  /auth/me:
    get:
      tags:
        - Auth
      summary: Get current user
      description: Returns the authenticated user's profile
      operationId: getCurrentUser
      responses:
        "200":
          description: Current user profile
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /auth/permissions:
    get:
      tags:
        - Auth
      summary: Get current user permissions
      description: Returns permission IDs for the authenticated user
      operationId: getCurrentUserPermissions
      responses:
        "200":
          description: Current user permissions
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CurrentUserPermissionsResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /auth/dev/login:
    get:
      tags:
        - Auth
      summary: Dev mode login
      description: |
        Development-only endpoint for testing authentication.
        Returns a JWT token for a test user with the specified role.
        Only available when ENV=development.
      operationId: devLogin
      security: []
      parameters:
        - name: role
          in: query
          required: false
          description: Role of the test user to authenticate as
          schema:
            type: string
            enum:
              - admin
              - user
            default: user
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    description: JWT token
                  user:
                    $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequest"
        "403":
          $ref: "#/components/responses/Forbidden"
  /auth/dev/users:
    get:
      tags:
        - Auth
      summary: List dev users
      description: |
        Development-only endpoint that lists available test users.
        Only available when ENV=development.
      operationId: devUsers
      security: []
      responses:
        "200":
          description: List of dev users
          content:
            application/json:
              schema:
                type: object
                properties:
                  dev_mode:
                    type: boolean
                  users:
                    type: array
                    items:
                      $ref: "#/components/schemas/User"
        "403":
          $ref: "#/components/responses/Forbidden"
  /users:
    get:
      tags:
        - Users
      summary: List users
      description: |
        Returns a paginated list of users in the system. Users are people who
        can log in to the application. Supports search by name or email and
        cursor-based pagination for large datasets.
      operationId: listUsers
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: cursor
          in: query
          schema:
            type: string
        - name: search
          in: query
          description: Search by name or email
          schema:
            type: string
      responses:
        "200":
          description: List of users
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserList"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/users/{id}":
    get:
      tags:
        - Users
      summary: Get user by ID
      description: |
        Retrieves a single user's profile including email, display name, avatar,
        and role. Use this to display user details or populate an edit form.
      operationId: getUser
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: User details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Users
      summary: Update user
      description: >
        Updates a user's profile information. Users can update their own
        profile;

        admins can update any user. Supports partial updates - only include

        fields that should change.
      operationId: updateUser
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserRequest"
        required: true
      responses:
        "200":
          description: Updated user
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
  /notifications:
    get:
      tags:
        - Notifications
      summary: List notifications for the current user
      operationId: listNotifications
      parameters:
        - name: type
          in: query
          description: Filter by notification type
          schema:
            type: string
            enum:
              - approvals
              - errors
              - reminders
              - system
        - name: unread
          in: query
          description: Filter by unread status
          schema:
            type: boolean
        - name: from
          in: query
          description: Start datetime filter
          schema:
            type: string
            format: date-time
        - name: to
          in: query
          description: End datetime filter
          schema:
            type: string
            format: date-time
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
      responses:
        "200":
          description: List of notifications
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationList"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
  "/notifications/{id}/read":
    post:
      tags:
        - Notifications
      summary: Mark notification as read
      operationId: markNotificationRead
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Updated notification
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Notification"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
  /notifications/read-all:
    post:
      tags:
        - Notifications
      summary: Mark all notifications as read
      operationId: markAllNotificationsRead
      responses:
        "200":
          description: Count of notifications marked as read
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MarkNotificationsReadResponse"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
  /notifications/stream:
    get:
      tags:
        - Notifications
      summary: Stream notifications for the current user
      operationId: streamNotifications
      responses:
        "200":
          description: Server-sent events stream
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
  /notification-preferences:
    get:
      tags:
        - Notifications
      summary: Get notification preferences for the current user
      operationId: getNotificationPreferences
      responses:
        "200":
          description: Notification preferences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationPreferences"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
    put:
      tags:
        - Notifications
      summary: Update notification preferences for the current user
      operationId: updateNotificationPreferences
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateNotificationPreferencesRequest"
        required: true
      responses:
        "200":
          description: Updated notification preferences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationPreferences"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
  /tenants:
    get:
      tags:
        - Tenants
      summary: List tenants
      description: >
        Returns all tenants (organizations/companies) in the system. Each tenant

        has isolated data. Use for tenant selection screens or admin dashboards.

        Filter by active status to show only enabled tenants. By default, inactive

        tenants are excluded unless include_inactive is true or an explicit

        active filter is provided.
      operationId: listTenants
      parameters:
        - name: active
          in: query
          description: Filter by active status (true/false)
          schema:
            type: boolean
        - name: include_inactive
          in: query
          description: Include inactive tenants when no active filter is specified
          schema:
            type: boolean
        - name: name
          in: query
          description: Case-insensitive name search filter
          schema:
            type: string
      responses:
        "200":
          description: List of tenants
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Tenant"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Tenants
      summary: Create tenant
      description: >
        Creates a new tenant (organization). Each tenant gets isolated data
        storage.

        The slug must be unique and URL-friendly (used in URLs and API headers).

        Requires admin privileges.
      operationId: createTenant
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTenantRequest"
        required: true
      responses:
        "201":
          description: Created tenant
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/tenants/{id}":
    get:
      tags:
        - Tenants
      summary: Get tenant by ID
      description: |
        Retrieves tenant details including name, slug, settings, and status.
        Use to display tenant info or populate settings forms.
      operationId: getTenant
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Tenant details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Tenants
      summary: Update tenant
      description: |
        Updates tenant properties like name, settings, or active status.
        Deactivating a tenant prevents users from accessing it. Supports
        partial updates - only include fields to change.
      operationId: updateTenant
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTenantRequest"
        required: true
      responses:
        "200":
          description: Updated tenant
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tenant"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Tenants
      summary: Deactivate tenant
      description: |
        Deactivates a tenant by setting is_active=false. Deactivated tenants
        cannot be used in tenant-scoped APIs. Requires admin privileges.
      operationId: deleteTenant
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Tenant deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /employees:
    get:
      tags:
        - Employees
      summary: List employees
      description: |
        Returns a paginated list of employees. Employees are the core entity -
        they clock in/out and have time records. Filter by department, active
        status, or search by name/personnel number/email.
      operationId: listEmployees
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: q
          in: query
          description: Search by name, personnel number, or email
          schema:
            type: string
        - name: department_id
          in: query
          description: Filter by department
          schema:
            type: string
            format: uuid
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
      responses:
        "200":
          description: List of employees
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmployeeList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Employees
      summary: Create employee
      description: |
        Creates a new employee record. Personnel number and PIN must be unique
        within the tenant. Optionally link to a user account for self-service.
      operationId: createEmployee
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEmployeeRequest"
        required: true
      responses:
        "201":
          description: Created employee
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Employee"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Personnel number or PIN already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  /employees/search:
    get:
      tags:
        - Employees
      summary: Quick search employees
      description: |
        Fast typeahead search for employee selection. Returns minimal data
        (ID, name, personnel number) for autocomplete dropdowns.
      operationId: searchEmployees
      parameters:
        - name: q
          in: query
          required: true
          description: Search query
          schema:
            type: string
      responses:
        "200":
          description: Search results
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/EmployeeSummary"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /employees/bulk-tariff:
    patch:
      tags:
        - Employees
      summary: Bulk assign tariff
      description: |
        Assigns or clears a tariff for multiple employees. Provide either a list
        of employee IDs or a filter that targets all matching employees.
      operationId: bulkAssignTariff
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BulkTariffAssignmentRequest"
        required: true
      responses:
        "200":
          description: Bulk tariff assignment result
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BulkTariffAssignmentResponse"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/employees/{id}":
    get:
      tags:
        - Employees
      summary: Get employee by ID
      description: |
        Returns full employee details including personal info, employment data,
        department, cost center, and work schedule assignments.
      operationId: getEmployee
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Employee details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Employee"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Employees
      summary: Update employee
      description: |
        Updates employee information. Some changes (like department or schedule)
        may trigger recalculation of time records.
      operationId: updateEmployee
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateEmployeeRequest"
        required: true
      responses:
        "200":
          description: Updated employee
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Employee"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Employees
      summary: Deactivate employee
      description: Soft deletes (deactivates) the employee
      operationId: deleteEmployee
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Employee deactivated
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{id}/contacts":
    get:
      tags:
        - Employees
      summary: List employee contacts
      description: Returns emergency contacts and other contact persons for an employee.
      operationId: listEmployeeContacts
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of contacts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Employee/properties/contacts/items"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    post:
      tags:
        - Employees
      summary: Add employee contact
      description: Adds an emergency or other contact person for the employee.
      operationId: createEmployeeContact
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEmployeeContactRequest"
        required: true
      responses:
        "201":
          description: Created contact
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Employee/properties/contacts/items"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{id}/contacts/{contactId}":
    delete:
      tags:
        - Employees
      summary: Delete employee contact
      operationId: deleteEmployeeContact
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: contactId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Contact deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{id}/cards":
    get:
      tags:
        - Employees
      summary: List employee cards
      description: |
        Returns access/time cards assigned to the employee. Cards are used
        for terminal clock-in/out.
      operationId: listEmployeeCards
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of cards
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Employee/properties/cards/items"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    post:
      tags:
        - Employees
      summary: Add employee card
      operationId: createEmployeeCard
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEmployeeCardRequest"
        required: true
      responses:
        "201":
          description: Created card
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Employee/properties/cards/items"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{id}/cards/{cardId}":
    delete:
      tags:
        - Employees
      summary: Deactivate employee card
      operationId: deactivateEmployeeCard
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: cardId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Card deactivated
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{id}/day/{date}":
    get:
      tags:
        - Employees
        - Bookings
      summary: Get employee day view
      description: Returns complete day information including bookings, daily value,
        and errors
      operationId: getEmployeeDayView
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: date
          in: path
          required: true
          description: Date in YYYY-MM-DD format
          schema:
            type: string
            format: date
      responses:
        "200":
          description: Day view
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DayView"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{id}/day/{date}/calculate":
    post:
      tags:
        - Employees
        - Bookings
      summary: Recalculate day
      description: Manually trigger recalculation of daily values for the specified day
      operationId: calculateEmployeeDay
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: date
          in: path
          required: true
          schema:
            type: string
            format: date
      responses:
        "200":
          description: Calculated daily value
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DailyValue"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{id}/absences":
    get:
      tags:
        - Employees
        - Absences
      summary: List employee absences
      operationId: listEmployeeAbsences
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: from
          in: query
          description: Start date filter
          schema:
            type: string
            format: date
        - name: to
          in: query
          description: End date filter
          schema:
            type: string
            format: date
      responses:
        "200":
          description: List of absences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AbsenceList"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    post:
      tags:
        - Employees
        - Absences
      summary: Create absence range
      description: Create absences for a date range
      operationId: createEmployeeAbsenceRange
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAbsenceRangeRequest"
        required: true
      responses:
        "201":
          description: Created absences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AbsenceList"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{id}/vacation-balance":
    get:
      tags:
        - Employees
        - Vacation
      summary: Get employee vacation balance
      operationId: getEmployeeVacationBalance
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: year
          in: query
          description: Year (defaults to current year)
          schema:
            type: integer
      responses:
        "200":
          description: Vacation balance
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VacationBalance"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /departments:
    get:
      tags:
        - Departments
      summary: List departments
      description: |
        Returns organizational departments. Departments can be hierarchical
        (parent/child). Use for org charts, filtering employees, or assigning
        department-specific holidays.
      operationId: listDepartments
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
        - name: parent_id
          in: query
          description: Filter by parent department
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of departments
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DepartmentList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Departments
      summary: Create department
      operationId: createDepartment
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDepartmentRequest"
        required: true
      responses:
        "201":
          description: Created department
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Department"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  /departments/tree:
    get:
      tags:
        - Departments
      summary: Get department tree
      description: |
        Returns all departments as a hierarchical tree structure.
        Each node contains the department and its children recursively.
      operationId: getDepartmentTree
      responses:
        "200":
          description: Department tree structure
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/DepartmentNode"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/departments/{id}":
    get:
      tags:
        - Departments
      summary: Get department by ID
      operationId: getDepartment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Department details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Department"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Departments
      summary: Update department
      operationId: updateDepartment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateDepartmentRequest"
        required: true
      responses:
        "200":
          description: Updated department
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Department"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Departments
      summary: Delete department
      operationId: deleteDepartment
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Department deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /locations:
    get:
      tags:
        - Locations
      summary: List locations
      description: |
        Returns work locations (offices, sites, remote). Locations can have
        time zones and are used for employee assignments and terminal placement.
      operationId: listLocations
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
      responses:
        "200":
          description: List of locations
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/LocationList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Locations
      summary: Create location
      operationId: createLocation
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateLocationRequest"
        required: true
      responses:
        "201":
          description: Created location
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Location"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/locations/{id}":
    get:
      tags:
        - Locations
      summary: Get location by ID
      operationId: getLocation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Location details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Location"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Locations
      summary: Update location
      operationId: updateLocation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateLocationRequest"
        required: true
      responses:
        "200":
          description: Updated location
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Location"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Locations
      summary: Delete location
      operationId: deleteLocation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Location deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /cost-centers:
    get:
      tags:
        - Cost Centers
      summary: List cost centers
      description: |
        Returns all cost centers for the tenant. Cost centers are used to
        allocate employee time and costs to different budgets or projects.
        Use for dropdown selections in employee forms or time booking.
      operationId: listCostCenters
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
      responses:
        "200":
          description: List of cost centers
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CostCenterList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Cost Centers
      summary: Create cost center
      description: |
        Creates a new cost center with a unique code. The code is used for
        integration with accounting/ERP systems.
      operationId: createCostCenter
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCostCenterRequest"
        required: true
      responses:
        "201":
          description: Created cost center
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CostCenter"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/cost-centers/{id}":
    get:
      tags:
        - Cost Centers
      summary: Get cost center by ID
      description: Retrieves cost center details for viewing or editing.
      operationId: getCostCenter
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Cost center details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CostCenter"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Cost Centers
      summary: Update cost center
      description: |
        Updates cost center properties. Deactivate instead of deleting to
        preserve historical data while hiding from new assignments.
      operationId: updateCostCenter
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateCostCenterRequest"
        required: true
      responses:
        "200":
          description: Updated cost center
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CostCenter"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Cost Centers
      summary: Delete cost center
      description: |
        Permanently removes a cost center. May fail if employees are still
        assigned. Consider deactivating instead.
      operationId: deleteCostCenter
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Cost center deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /employment-types:
    get:
      tags:
        - Employment Types
      summary: List employment types
      description: |
        Returns employment types (e.g., full-time, part-time, contractor).
        Each type defines default weekly hours and affects time calculations.
        Use for employee setup dropdowns.
      operationId: listEmploymentTypes
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
      responses:
        "200":
          description: List of employment types
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmploymentTypeList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Employment Types
      summary: Create employment type
      description: |
        Creates a new employment type with default weekly hours. The code
        must be unique within the tenant.
      operationId: createEmploymentType
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEmploymentTypeRequest"
        required: true
      responses:
        "201":
          description: Created employment type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmploymentType"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/employment-types/{id}":
    get:
      tags:
        - Employment Types
      summary: Get employment type by ID
      description: Retrieves employment type details for viewing or editing.
      operationId: getEmploymentType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Employment type details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmploymentType"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Employment Types
      summary: Update employment type
      description: |
        Updates employment type properties like name, weekly hours, or active
        status. Changes don't retroactively affect existing employees.
      operationId: updateEmploymentType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateEmploymentTypeRequest"
        required: true
      responses:
        "200":
          description: Updated employment type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmploymentType"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Employment Types
      summary: Delete employment type
      description: |
        Permanently removes an employment type. May fail if employees are
        assigned. Consider deactivating instead.
      operationId: deleteEmploymentType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Employment type deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /user-groups:
    get:
      tags:
        - User Groups
      summary: List user groups
      description: |
        Returns all user groups for the current tenant. User groups define roles
        and permissions for access control. Use this to populate role selection
        dropdowns or display available roles in admin interfaces.
      operationId: listUserGroups
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
      responses:
        "200":
          description: List of user groups
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserGroupList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - User Groups
      summary: Create user group
      description: |
        Creates a new user group (role) for the tenant. Groups are used for
        role-based access control - assign users to groups instead of managing
        permissions individually. Group names must be unique within a tenant.
      operationId: createUserGroup
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateUserGroupRequest"
        required: true
      responses:
        "201":
          description: Created user group
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserGroup"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/user-groups/{id}":
    get:
      tags:
        - User Groups
      summary: Get user group by ID
      description: >
        Retrieves a single user group with its full details including
        permissions.

        Use this to display group details in an edit form or to check a group's

        permissions before assignment.
      operationId: getUserGroup
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: User group details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserGroup"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - User Groups
      summary: Update user group
      description: |
        Updates an existing user group's name, description, or permissions.
        Changes apply immediately to all users in the group. System groups
        (is_system=true) cannot be modified and will return 403 Forbidden.
      operationId: updateUserGroup
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateUserGroupRequest"
        required: true
      responses:
        "200":
          description: Updated user group
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserGroup"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot modify system groups
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - User Groups
      summary: Delete user group
      description: |
        Permanently deletes a user group. Users in this group will lose the
        associated permissions. System groups (is_system=true) cannot be deleted
        and will return 403 Forbidden. Consider deactivating instead of deleting
        if you need to preserve audit history.
      operationId: deleteUserGroup
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: User group deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot delete system groups
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
  /permissions:
    get:
      tags:
        - User Groups
      summary: List all permissions
      description: |
        Returns all available permissions in the system. Use this to populate
        a permission picker when creating or editing user groups. Permissions
        are defined by resource (e.g., "employees") and action (e.g., "read",
        "write", "delete", "manage").
      operationId: listPermissions
      responses:
        "200":
          description: List of permissions
          content:
            application/json:
              schema:
                type: object
                required:
                  - data
                properties:
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Permission"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /day-plans:
    get:
      tags:
        - Day Plans
      summary: List day plans
      description: >
        Returns day plans defining work hours for a single day. Day plans
        specify

        start/end times, breaks, and bonuses. They're combined into week plans for

        employee assignment. Filter by fixed vs flextime type.
      operationId: listDayPlans
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
        - name: plan_type
          in: query
          description: Filter by plan type
          schema:
            type: string
            enum:
              - fixed
              - flextime
      responses:
        "200":
          description: List of day plans
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DayPlanList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Day Plans
      summary: Create day plan
      operationId: createDayPlan
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDayPlanRequest"
        required: true
      responses:
        "201":
          description: Created day plan
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DayPlan"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/day-plans/{id}":
    get:
      tags:
        - Day Plans
      summary: Get day plan by ID
      description: Returns day plan with breaks and bonuses
      operationId: getDayPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Day plan details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DayPlan"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Day Plans
      summary: Update day plan
      operationId: updateDayPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateDayPlanRequest"
        required: true
      responses:
        "200":
          description: Updated day plan
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DayPlan"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Day Plans
      summary: Delete day plan
      operationId: deleteDayPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Day plan deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/day-plans/{id}/copy":
    post:
      tags:
        - Day Plans
      summary: Copy day plan
      description: Creates a copy of the day plan with new code and name
      operationId: copyDayPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CopyDayPlanRequest"
        required: true
      responses:
        "201":
          description: Copied day plan
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DayPlan"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          description: New code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/day-plans/{id}/breaks":
    post:
      tags:
        - Day Plans
      summary: Add break to day plan
      operationId: createDayPlanBreak
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDayPlanBreakRequest"
        required: true
      responses:
        "201":
          description: Created break
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DayPlanBreak"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/day-plans/{id}/breaks/{breakId}":
    delete:
      tags:
        - Day Plans
      summary: Delete break from day plan
      operationId: deleteDayPlanBreak
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: breakId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Break deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/day-plans/{id}/bonuses":
    post:
      tags:
        - Day Plans
      summary: Add bonus to day plan
      operationId: createDayPlanBonus
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateDayPlanBonusRequest"
        required: true
      responses:
        "201":
          description: Created bonus
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DayPlanBonus"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/day-plans/{id}/bonuses/{bonusId}":
    delete:
      tags:
        - Day Plans
      summary: Delete bonus from day plan
      operationId: deleteDayPlanBonus
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: bonusId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Bonus deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /week-plans:
    get:
      tags:
        - Week Plans
      summary: List week plans
      description: >
        Returns week plans that combine day plans for a full week. Week plans
        are

        assigned to employees to define their regular schedule. Each day can have

        a different day plan or be marked as off.
      operationId: listWeekPlans
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
      responses:
        "200":
          description: List of week plans
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WeekPlanList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Week Plans
      summary: Create week plan
      operationId: createWeekPlan
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateWeekPlanRequest"
        required: true
      responses:
        "201":
          description: Created week plan
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WeekPlan"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/week-plans/{id}":
    get:
      tags:
        - Week Plans
      summary: Get week plan by ID
      operationId: getWeekPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Week plan details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WeekPlan"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Week Plans
      summary: Update week plan
      operationId: updateWeekPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateWeekPlanRequest"
        required: true
      responses:
        "200":
          description: Updated week plan
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WeekPlan"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Week Plans
      summary: Delete week plan
      operationId: deleteWeekPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Week plan deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /tariffs:
    get:
      tags:
        - Tariffs
      summary: List tariffs
      description: |
        Returns tariffs (pay rates) for time calculations. Tariffs define hourly
        rates, overtime multipliers, and break deduction rules. Assign tariffs
        to employees or employment types.
      operationId: listTariffs
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
      responses:
        "200":
          description: List of tariffs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TariffList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Tariffs
      summary: Create tariff
      operationId: createTariff
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTariffRequest"
        required: true
      responses:
        "201":
          description: Created tariff
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tariff"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/tariffs/{id}":
    get:
      tags:
        - Tariffs
      summary: Get tariff by ID
      description: Returns tariff with breaks
      operationId: getTariff
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Tariff details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tariff"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Tariffs
      summary: Update tariff
      operationId: updateTariff
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTariffRequest"
        required: true
      responses:
        "200":
          description: Updated tariff
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tariff"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Tariffs
      summary: Delete tariff
      operationId: deleteTariff
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Tariff deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/tariffs/{id}/breaks":
    post:
      tags:
        - Tariffs
      summary: Add break to tariff
      operationId: createTariffBreak
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - break_type
                - duration
              properties:
                break_type:
                  type: string
                  enum:
                    - fixed
                    - variable
                    - minimum
                after_work_minutes:
                  type: integer
                duration:
                  type: integer
                is_paid:
                  type: boolean
                  default: false
        required: true
      responses:
        "201":
          description: Created break
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TariffBreak"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/tariffs/{id}/breaks/{breakId}":
    delete:
      tags:
        - Tariffs
      summary: Delete break from tariff
      operationId: deleteTariffBreak
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: breakId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Break deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /booking-types:
    get:
      tags:
        - Booking Types
      summary: List booking types
      description: |
        Returns booking types defining clock-in/out behavior. Types specify
        direction (in/out), terminal display, and time calculation rules.
        System types include standard clock-in/out and break.
      operationId: listBookingTypes
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
        - name: direction
          in: query
          description: Filter by direction
          schema:
            type: string
            enum:
              - in
              - out
      responses:
        "200":
          description: List of booking types
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookingTypeList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Booking Types
      summary: Create booking type
      operationId: createBookingType
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateBookingTypeRequest"
        required: true
      responses:
        "201":
          description: Created booking type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookingType"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/booking-types/{id}":
    get:
      tags:
        - Booking Types
      summary: Get booking type by ID
      operationId: getBookingType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Booking type details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookingType"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Booking Types
      summary: Update booking type
      operationId: updateBookingType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateBookingTypeRequest"
        required: true
      responses:
        "200":
          description: Updated booking type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookingType"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot modify system booking types
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Booking Types
      summary: Delete booking type
      operationId: deleteBookingType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Booking type deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot delete system booking types
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
  /bookings:
    get:
      tags:
        - Bookings
      summary: List bookings
      description: |
        Returns time bookings (clock-in/out events). Bookings are paired to
        calculate worked hours. Filter by employee and date range for
        timesheet views or payroll processing.
      operationId: listBookings
      parameters:
        - name: employee_id
          in: query
          description: Filter by employee
          schema:
            type: string
            format: uuid
        - name: from
          in: query
          description: Start date filter (YYYY-MM-DD)
          schema:
            type: string
            format: date
        - name: to
          in: query
          description: End date filter (YYYY-MM-DD)
          schema:
            type: string
            format: date
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: page
          in: query
          schema:
            type: integer
            minimum: 1
            default: 1
      responses:
        "200":
          description: List of bookings
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BookingList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Bookings
      summary: Create booking
      operationId: createBooking
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateBookingRequest"
        required: true
      responses:
        "201":
          description: Created booking
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Booking"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Month is closed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/bookings/{id}":
    get:
      tags:
        - Bookings
      summary: Get booking by ID
      operationId: getBooking
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Booking details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Booking"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Bookings
      summary: Update booking
      operationId: updateBooking
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateBookingRequest"
        required: true
      responses:
        "200":
          description: Updated booking
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Booking"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Month is closed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Bookings
      summary: Delete booking
      operationId: deleteBooking
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Booking deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Month is closed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
  /daily-values:
    get:
      tags:
        - Daily Values
      summary: List daily values
      description: >
        Returns calculated daily values (worked hours, overtime, etc.) per
        employee

        per day. Daily values are computed from bookings and absences. Filter by

        employee, date range, or error status for timesheet review.
      operationId: listDailyValues
      parameters:
        - name: employee_id
          in: query
          description: Filter by employee
          schema:
            type: string
            format: uuid
        - name: from
          in: query
          description: Start date filter (YYYY-MM-DD)
          schema:
            type: string
            format: date
        - name: to
          in: query
          description: End date filter (YYYY-MM-DD)
          schema:
            type: string
            format: date
        - name: status
          in: query
          description: Filter by status
          schema:
            type: string
            enum:
              - pending
              - calculated
              - error
              - approved
        - name: has_errors
          in: query
          description: Filter by error status
          schema:
            type: boolean
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: cursor
          in: query
          schema:
            type: string
      responses:
        "200":
          description: List of daily values
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DailyValueList"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/daily-values/{id}":
    get:
      tags:
        - Daily Values
      summary: Get daily value by ID
      operationId: getDailyValue
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Daily value details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DailyValue"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/daily-values/{id}/approve":
    post:
      tags:
        - Daily Values
      summary: Approve daily value
      description: Marks the daily value as approved
      operationId: approveDailyValue
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Approved daily value
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DailyValue"
        "400":
          description: Cannot approve (has errors)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /daily-values/recalculate:
    post:
      tags:
        - Daily Values
      summary: Recalculate daily values
      description: Trigger recalculation for a date range
      operationId: recalculateDailyValues
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - from
                - to
              properties:
                employee_id:
                  type: string
                  format: uuid
                  description: Optional employee ID (all employees if not specified)
                from:
                  type: string
                  format: date
                to:
                  type: string
                  format: date
        required: true
      responses:
        "202":
          description: Recalculation started
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Recalculation started
                  affected_days:
                    type: integer
                    example: 31
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /holidays:
    get:
      tags:
        - Holidays
      summary: List holidays
      description: >
        Returns public holidays for the tenant. Holidays affect time
        calculations -

        employees may have reduced hours or days off. Filter by year or date range

        for calendar views or payroll processing.
      operationId: listHolidays
      parameters:
        - name: year
          in: query
          description: Filter by year (e.g., 2024)
          schema:
            type: integer
        - name: from
          in: query
          description: Start date for range filter (inclusive)
          schema:
            type: string
            format: date
        - name: to
          in: query
          description: End date for range filter (inclusive)
          schema:
            type: string
            format: date
      responses:
        "200":
          description: List of holidays
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Holiday"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Holidays
      summary: Create holiday
      description: |
        Creates a new holiday. Supports full-day and half-day holidays.
        Optionally restrict to specific departments. Duplicate dates for
        the same tenant are not allowed.
      operationId: createHoliday
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateHolidayRequest"
        required: true
      responses:
        "201":
          description: Created holiday
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Holiday"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/holidays/{id}":
    get:
      tags:
        - Holidays
      summary: Get holiday by ID
      description: Retrieves a single holiday's details for viewing or editing.
      operationId: getHoliday
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Holiday details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Holiday"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Holidays
      summary: Update holiday
      description: |
        Updates a holiday's name, date, or half-day status. Changes may trigger
        recalculation of affected employees' time records.
      operationId: updateHoliday
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateHolidayRequest"
        required: true
      responses:
        "200":
          description: Updated holiday
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Holiday"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Holidays
      summary: Delete holiday
      description: |
        Removes a holiday from the calendar. Time records for affected dates
        may need recalculation.
      operationId: deleteHoliday
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Holiday deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /absence-types:
    get:
      tags:
        - Absence Types
      summary: List absence types
      description: >
        Returns absence types (vacation, sick, personal, etc.). Each type
        defines

        how time is deducted, whether approval is required, and which account

        is affected. System types are built-in.
      operationId: listAbsenceTypes
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
        - name: category
          in: query
          description: Filter by category
          schema:
            type: string
            enum:
              - vacation
              - sick
              - personal
              - unpaid
              - holiday
              - other
      responses:
        "200":
          description: List of absence types
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AbsenceTypeList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Absence Types
      summary: Create absence type
      operationId: createAbsenceType
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAbsenceTypeRequest"
        required: true
      responses:
        "201":
          description: Created absence type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AbsenceType"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/absence-types/{id}":
    get:
      tags:
        - Absence Types
      summary: Get absence type by ID
      operationId: getAbsenceType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Absence type details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AbsenceType"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Absence Types
      summary: Update absence type
      operationId: updateAbsenceType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAbsenceTypeRequest"
        required: true
      responses:
        "200":
          description: Updated absence type
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AbsenceType"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot modify system absence types
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Absence Types
      summary: Delete absence type
      operationId: deleteAbsenceType
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Absence type deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot delete system absence types
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
  /absences:
    get:
      tags:
        - Absences
      summary: List absences
      description: |
        Returns employee absences (vacation, sick leave, etc.). Absences go
        through an approval workflow. Filter by employee, type, date range,
        or status for leave management.
      operationId: listAbsences
      parameters:
        - name: employee_id
          in: query
          description: Filter by employee
          schema:
            type: string
            format: uuid
        - name: absence_type_id
          in: query
          description: Filter by absence type
          schema:
            type: string
            format: uuid
        - name: from
          in: query
          description: Start date filter
          schema:
            type: string
            format: date
        - name: to
          in: query
          description: End date filter
          schema:
            type: string
            format: date
        - name: status
          in: query
          description: Filter by status
          schema:
            type: string
            enum:
              - pending
              - approved
              - rejected
              - cancelled
      responses:
        "200":
          description: List of absences
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AbsenceList"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/absences/{id}":
    get:
      tags:
        - Absences
      summary: Get absence by ID
      operationId: getAbsence
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Absence details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Absence"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Absences
      summary: Update absence
      operationId: updateAbsence
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                duration:
                  type: number
                  format: decimal
                notes:
                  type: string
                status:
                  type: string
                  enum:
                    - pending
                    - approved
                    - rejected
                    - cancelled
        required: true
      responses:
        "200":
          description: Updated absence
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Absence"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Absences
      summary: Delete absence
      operationId: deleteAbsence
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Absence deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/absences/{id}/approve":
    post:
      tags:
        - Absences
      summary: Approve absence
      operationId: approveAbsence
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Approved absence
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Absence"
        "400":
          description: Cannot approve (not pending)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/absences/{id}/reject":
    post:
      tags:
        - Absences
      summary: Reject absence
      operationId: rejectAbsence
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: Rejection reason
      responses:
        "200":
          description: Rejected absence
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Absence"
        "400":
          description: Cannot reject (not pending)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /vacation-balances:
    get:
      tags:
        - Vacation
      summary: List vacation balances
      description: |
        Returns vacation entitlements and usage per employee per year. Tracks
        total days, used days, remaining balance, and carryover. Use for leave
        planning and balance reports.
      operationId: listVacationBalances
      parameters:
        - name: employee_id
          in: query
          description: Filter by employee
          schema:
            type: string
            format: uuid
        - name: year
          in: query
          description: Filter by year
          schema:
            type: integer
        - name: department_id
          in: query
          description: Filter by department
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of vacation balances
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VacationBalanceList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Vacation
      summary: Create vacation balance
      operationId: createVacationBalance
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateVacationBalanceRequest"
        required: true
      responses:
        "201":
          description: Created vacation balance
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VacationBalance"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Balance for employee/year already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/vacation-balances/{id}":
    get:
      tags:
        - Vacation
      summary: Get vacation balance by ID
      operationId: getVacationBalance
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Vacation balance details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VacationBalance"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Vacation
      summary: Update vacation balance
      operationId: updateVacationBalance
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateVacationBalanceRequest"
        required: true
      responses:
        "200":
          description: Updated vacation balance
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/VacationBalance"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /vacation-balances/initialize:
    post:
      tags:
        - Vacation
      summary: Initialize vacation balances for year
      description: Creates vacation balances for all active employees for a year
      operationId: initializeVacationBalances
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - year
              properties:
                year:
                  type: integer
                carryover:
                  type: boolean
                  description: Whether to carry over from previous year
                  default: true
        required: true
      responses:
        "201":
          description: Vacation balances initialized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  created_count:
                    type: integer
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /monthly-values:
    get:
      tags:
        - Monthly Values
      summary: List monthly values
      description: |
        Returns monthly aggregates of daily values per employee. Monthly values
        track total hours, overtime, account balances, and payroll data. Use for
        month-end closing and payroll export preparation.
      operationId: listMonthlyValues
      parameters:
        - name: employee_id
          in: query
          description: Filter by employee
          schema:
            type: string
            format: uuid
        - name: year
          in: query
          description: Filter by year
          schema:
            type: integer
        - name: month
          in: query
          description: Filter by month
          schema:
            type: integer
            minimum: 1
            maximum: 12
        - name: status
          in: query
          description: Filter by status
          schema:
            type: string
            enum:
              - open
              - calculated
              - closed
              - exported
        - name: department_id
          in: query
          description: Filter by department
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of monthly values
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyValueList"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/monthly-values/{id}":
    get:
      tags:
        - Monthly Values
      summary: Get monthly value by ID
      operationId: getMonthlyValue
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Monthly value details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyValue"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/monthly-values/{id}/close":
    post:
      tags:
        - Monthly Values
      summary: Close month
      description: Closes the month for the employee, preventing further modifications
      operationId: closeMonth
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                recalculate:
                  type: boolean
                  description: Recalculate all daily values before closing
                  default: true
                notes:
                  type: string
      responses:
        "200":
          description: Month closed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyValue"
        "400":
          description: Cannot close (has errors or already closed)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/monthly-values/{id}/reopen":
    post:
      tags:
        - Monthly Values
      summary: Reopen month
      description: Reopens a closed month for corrections
      operationId: reopenMonth
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - reason
              properties:
                reason:
                  type: string
                  minLength: 10
                  description: Reason for reopening
        required: true
      responses:
        "200":
          description: Month reopened
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyValue"
        "400":
          description: Cannot reopen (not closed or already exported)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /monthly-values/close-batch:
    post:
      tags:
        - Monthly Values
      summary: Close month for multiple employees
      description: Batch close month for specified employees or all employees
      operationId: closeMonthBatch
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - year
                - month
              properties:
                year:
                  type: integer
                month:
                  type: integer
                  minimum: 1
                  maximum: 12
                employee_ids:
                  type: array
                  items:
                    type: string
                    format: uuid
                  description: Optional list of employee IDs (all if not specified)
                department_id:
                  type: string
                  format: uuid
                  description: Close for all employees in department
                recalculate:
                  type: boolean
                  default: true
        required: true
      responses:
        "200":
          description: Batch close result
          content:
            application/json:
              schema:
                type: object
                properties:
                  closed_count:
                    type: integer
                  skipped_count:
                    type: integer
                  error_count:
                    type: integer
                  errors:
                    type: array
                    items:
                      type: object
                      properties:
                        employee_id:
                          type: string
                          format: uuid
                        reason:
                          type: string
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /monthly-values/recalculate:
    post:
      tags:
        - Monthly Values
      summary: Recalculate monthly values
      description: Trigger recalculation for a month
      operationId: recalculateMonthlyValues
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - year
                - month
              properties:
                year:
                  type: integer
                month:
                  type: integer
                  minimum: 1
                  maximum: 12
                employee_id:
                  type: string
                  format: uuid
                  description: Optional employee ID (all employees if not specified)
        required: true
      responses:
        "202":
          description: Recalculation started
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  affected_employees:
                    type: integer
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /corrections:
    get:
      tags:
        - Corrections
      summary: List corrections
      description: >
        Returns manual corrections to time records or account balances.
        Corrections

        go through an approval workflow. Use when automatic calculations need

        adjustment (forgotten clock-in, balance carryover, etc.).
      operationId: listCorrections
      parameters:
        - name: employee_id
          in: query
          description: Filter by employee
          schema:
            type: string
            format: uuid
        - name: from
          in: query
          description: Start date filter
          schema:
            type: string
            format: date
        - name: to
          in: query
          description: End date filter
          schema:
            type: string
            format: date
        - name: correction_type
          in: query
          description: Filter by correction type
          schema:
            type: string
            enum:
              - time_adjustment
              - balance_adjustment
              - vacation_adjustment
              - account_adjustment
        - name: status
          in: query
          description: Filter by status
          schema:
            type: string
            enum:
              - pending
              - approved
              - rejected
      responses:
        "200":
          description: List of corrections
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CorrectionList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Corrections
      summary: Create correction
      operationId: createCorrection
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateCorrectionRequest"
        required: true
      responses:
        "201":
          description: Created correction
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Correction"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Month is closed
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/corrections/{id}":
    get:
      tags:
        - Corrections
      summary: Get correction by ID
      operationId: getCorrection
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Correction details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Correction"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Corrections
      summary: Update correction
      operationId: updateCorrection
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                value_minutes:
                  type: integer
                reason:
                  type: string
                  minLength: 5
                  maxLength: 500
                status:
                  type: string
                  enum:
                    - pending
                    - approved
                    - rejected
        required: true
      responses:
        "200":
          description: Updated correction
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Correction"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Corrections
      summary: Delete correction
      operationId: deleteCorrection
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Correction deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot delete approved corrections
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
  "/corrections/{id}/approve":
    post:
      tags:
        - Corrections
      summary: Approve correction
      operationId: approveCorrection
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Approved correction
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Correction"
        "400":
          description: Cannot approve (not pending)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/corrections/{id}/reject":
    post:
      tags:
        - Corrections
      summary: Reject correction
      operationId: rejectCorrection
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Rejected correction
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Correction"
        "400":
          description: Cannot reject (not pending)
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /accounts:
    get:
      tags:
        - Accounts
      summary: List accounts
      description: |
        Returns time accounts (overtime, vacation, flextime, etc.). Accounts
        track balances that accumulate over time. System accounts are built-in
        and cannot be deleted. Filter by type or payroll relevance.
      operationId: listAccounts
      parameters:
        - name: active
          in: query
          description: Filter by active status
          schema:
            type: boolean
        - name: account_type
          in: query
          description: Filter by account type
          schema:
            type: string
            enum:
              - bonus
              - tracking
              - balance
        - name: include_system
          in: query
          description: Include system accounts in results
          schema:
            type: boolean
        - name: payroll_relevant
          in: query
          description: Filter by payroll relevance
          schema:
            type: boolean
      responses:
        "200":
          description: List of accounts
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Accounts
      summary: Create account
      operationId: createAccount
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateAccountRequest"
        required: true
      responses:
        "201":
          description: Created account
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Account"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Code already exists
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/accounts/{id}":
    get:
      tags:
        - Accounts
      summary: Get account by ID
      operationId: getAccount
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Account details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Account"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    patch:
      tags:
        - Accounts
      summary: Update account
      operationId: updateAccount
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAccountRequest"
        required: true
      responses:
        "200":
          description: Updated account
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Account"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot modify system accounts
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Accounts
      summary: Delete account
      operationId: deleteAccount
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Account deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          description: Cannot delete system accounts
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
        "404":
          $ref: "#/components/responses/NotFound"
  "/accounts/{id}/usage":
    get:
      tags:
        - Accounts
      summary: Get account usage
      operationId: getAccountUsage
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Account usage details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountUsage"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /account-values:
    get:
      tags:
        - Accounts
      summary: List account values
      operationId: listAccountValues
      parameters:
        - name: employee_id
          in: query
          description: Filter by employee
          schema:
            type: string
            format: uuid
        - name: account_id
          in: query
          description: Filter by account
          schema:
            type: string
            format: uuid
        - name: from
          in: query
          description: Start date filter
          schema:
            type: string
            format: date
        - name: to
          in: query
          description: End date filter
          schema:
            type: string
            format: date
      responses:
        "200":
          description: List of account values
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AccountValueList"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /audit-logs:
    get:
      tags:
        - Audit Logs
      summary: List audit logs
      description: |
        Returns audit trail of all changes in the system. Every create, update,
        delete, and approval action is logged with user, timestamp, and details.
        Required for compliance and debugging. Admin access only.
      operationId: listAuditLogs
      parameters:
        - name: user_id
          in: query
          description: Filter by user
          schema:
            type: string
            format: uuid
        - name: entity_type
          in: query
          description: Filter by entity type (e.g., booking, employee)
          schema:
            type: string
        - name: entity_id
          in: query
          description: Filter by entity ID
          schema:
            type: string
            format: uuid
        - name: action
          in: query
          description: Filter by action
          schema:
            type: string
            enum:
              - create
              - update
              - delete
              - approve
              - reject
              - close
              - reopen
              - export
              - import
              - login
              - logout
        - name: from
          in: query
          description: Start datetime filter
          schema:
            type: string
            format: date-time
        - name: to
          in: query
          description: End datetime filter
          schema:
            type: string
            format: date-time
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 50
        - name: cursor
          in: query
          schema:
            type: string
      responses:
        "200":
          description: List of audit logs
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuditLogList"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
  "/audit-logs/{id}":
    get:
      tags:
        - Audit Logs
      summary: Get audit log by ID
      operationId: getAuditLog
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Audit log details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuditLog"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "403":
          $ref: "#/components/responses/Forbidden"
        "404":
          $ref: "#/components/responses/NotFound"
  /reports:
    get:
      tags:
        - Reports
      summary: List reports
      description: |
        Returns generated reports and their status. Reports are generated
        asynchronously and can be downloaded once complete. Filter by type
        or status to find specific reports.
      operationId: listReports
      parameters:
        - name: report_type
          in: query
          description: Filter by report type
          schema:
            type: string
            enum:
              - daily_overview
              - weekly_overview
              - monthly_overview
              - employee_timesheet
              - department_summary
              - absence_report
              - vacation_report
              - overtime_report
              - account_balances
              - custom
        - name: status
          in: query
          description: Filter by status
          schema:
            type: string
            enum:
              - pending
              - generating
              - completed
              - failed
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: cursor
          in: query
          schema:
            type: string
      responses:
        "200":
          description: List of reports
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReportList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Reports
      summary: Generate report
      description: Starts report generation (async)
      operationId: generateReport
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GenerateReportRequest"
        required: true
      responses:
        "202":
          description: Report generation started
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Report"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/reports/{id}":
    get:
      tags:
        - Reports
      summary: Get report by ID
      operationId: getReport
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Report details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Report"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Reports
      summary: Delete report
      operationId: deleteReport
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Report deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/reports/{id}/download":
    get:
      tags:
        - Reports
      summary: Download report file
      operationId: downloadReport
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Report file
          headers:
            Content-Disposition:
              description: Attachment filename
              schema:
                type: string
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
            text/csv:
              schema:
                type: string
                format: binary
            application/pdf:
              schema:
                type: string
                format: binary
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          description: Report not ready (still generating)
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/csv:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/pdf:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  /payroll-exports:
    get:
      tags:
        - Payroll
      summary: List payroll exports
      description: |
        Returns payroll export files for integration with HR/payroll systems.
        Exports are generated asynchronously after month closing. Download in
        various formats (CSV, Excel, XML) for import into external systems.
      operationId: listPayrollExports
      parameters:
        - name: year
          in: query
          description: Filter by year
          schema:
            type: integer
        - name: month
          in: query
          description: Filter by month
          schema:
            type: integer
            minimum: 1
            maximum: 12
        - name: status
          in: query
          description: Filter by status
          schema:
            type: string
            enum:
              - pending
              - generating
              - completed
              - failed
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: cursor
          in: query
          schema:
            type: string
      responses:
        "200":
          description: List of payroll exports
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PayrollExportList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Payroll
      summary: Generate payroll export
      description: Starts payroll export generation (async)
      operationId: generatePayrollExport
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GeneratePayrollExportRequest"
        required: true
      responses:
        "202":
          description: Export generation started
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PayrollExport"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Month not closed for all employees
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/payroll-exports/{id}":
    get:
      tags:
        - Payroll
      summary: Get payroll export by ID
      operationId: getPayrollExport
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Payroll export details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PayrollExport"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Payroll
      summary: Delete payroll export
      operationId: deletePayrollExport
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Payroll export deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/payroll-exports/{id}/download":
    get:
      tags:
        - Payroll
      summary: Download payroll export file
      operationId: downloadPayrollExport
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Payroll export file
          headers:
            Content-Disposition:
              description: Attachment filename
              schema:
                type: string
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                type: string
                format: binary
            text/csv:
              schema:
                type: string
                format: binary
            application/xml:
              schema:
                type: string
                format: binary
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          description: Export not ready (still generating)
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/vnd.openxmlformats-officedocument.spreadsheetml.sheet:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            text/csv:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
            application/xml:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/payroll-exports/{id}/preview":
    get:
      tags:
        - Payroll
      summary: Preview payroll export data
      description: Returns the export data as JSON for preview
      operationId: previewPayrollExport
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Payroll export preview data
          content:
            application/json:
              schema:
                type: object
                properties:
                  lines:
                    type: array
                    items:
                      type: object
                      required:
                        - employee_id
                        - personnel_number
                      properties:
                        employee_id:
                          type: string
                          format: uuid
                        personnel_number:
                          type: string
                        first_name:
                          type: string
                        last_name:
                          type: string
                        department_code:
                          type: string
                        cost_center_code:
                          type: string
                        target_hours:
                          type: number
                          format: decimal
                        worked_hours:
                          type: number
                          format: decimal
                        overtime_hours:
                          type: number
                          format: decimal
                        account_values:
                          type: object
                          description: Account code -> hours
                          additionalProperties:
                            type: number
                            format: decimal
                        vacation_days:
                          type: number
                          format: decimal
                        sick_days:
                          type: number
                          format: decimal
                        other_absence_days:
                          type: number
                          format: decimal
                  summary:
                    type: object
                    properties:
                      employee_count:
                        type: integer
                      total_hours:
                        type: number
                        format: decimal
                      total_overtime:
                        type: number
                        format: decimal
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          description: Export not ready
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  /teams:
    get:
      tags:
        - Teams
      summary: List teams
      description: |
        Returns teams for collaborative work groups. Teams can span departments
        and have leaders/members with different roles. Use for shift planning
        and group reporting.
      operationId: listTeams
      parameters:
        - name: department_id
          in: query
          description: Filter by department
          schema:
            type: string
            format: uuid
        - name: is_active
          in: query
          description: Filter by active status
          schema:
            type: boolean
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: cursor
          in: query
          schema:
            type: string
      responses:
        "200":
          description: List of teams
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TeamList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Teams
      summary: Create team
      operationId: createTeam
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateTeamRequest"
        required: true
      responses:
        "201":
          description: Team created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Team"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/teams/{id}":
    get:
      tags:
        - Teams
      summary: Get team by ID
      operationId: getTeam
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: include_members
          in: query
          description: Include team members in response
          schema:
            type: boolean
      responses:
        "200":
          description: Team details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Team"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Teams
      summary: Update team
      operationId: updateTeam
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTeamRequest"
        required: true
      responses:
        "200":
          description: Team updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Team"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Teams
      summary: Delete team
      operationId: deleteTeam
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Team deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/teams/{id}/members":
    get:
      tags:
        - Teams
      summary: List team members
      operationId: listTeamMembers
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of team members
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: "#/components/schemas/TeamMember"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    post:
      tags:
        - Teams
      summary: Add member to team
      operationId: addTeamMember
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AddTeamMemberRequest"
        required: true
      responses:
        "201":
          description: Member added
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TeamMember"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          description: Member already in team
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/teams/{id}/members/{employee_id}":
    put:
      tags:
        - Teams
      summary: Update team member role
      operationId: updateTeamMember
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: employee_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateTeamMemberRequest"
        required: true
      responses:
        "200":
          description: Member role updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TeamMember"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Teams
      summary: Remove member from team
      operationId: removeTeamMember
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: employee_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Member removed
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{employee_id}/teams":
    get:
      tags:
        - Teams
      summary: Get teams for employee
      operationId: getEmployeeTeams
      parameters:
        - name: employee_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: List of teams the employee belongs to
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TeamList"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  /employee-day-plans:
    get:
      tags:
        - Employee Day Plans
      summary: List employee day plans
      description: |
        Returns daily work schedules assigned to employees. These override the
        default week plan for specific dates. Use for shift changes, temporary
        schedules, or individual adjustments.
      operationId: listEmployeeDayPlans
      parameters:
        - name: employee_id
          in: query
          description: Filter by employee
          schema:
            type: string
            format: uuid
        - name: from
          in: query
          description: Start date filter
          schema:
            type: string
            format: date
        - name: to
          in: query
          description: End date filter
          schema:
            type: string
            format: date
        - name: source
          in: query
          description: Filter by source
          schema:
            type: string
            enum:
              - tariff
              - manual
              - holiday
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: cursor
          in: query
          schema:
            type: string
      responses:
        "200":
          description: List of employee day plans
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmployeeDayPlanList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Employee Day Plans
      summary: Create employee day plan
      operationId: createEmployeeDayPlan
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateEmployeeDayPlanRequest"
        required: true
      responses:
        "201":
          description: Employee day plan created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmployeeDayPlan"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "409":
          description: Day plan already exists for this employee and date
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  /employee-day-plans/bulk:
    post:
      tags:
        - Employee Day Plans
      summary: Bulk create/upsert employee day plans
      operationId: bulkCreateEmployeeDayPlans
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                plans:
                  type: array
                  items:
                    type: object
                    properties:
                      employee_id:
                        type: string
                        format: uuid
                      plan_date:
                        type: string
                        format: date
                      day_plan_id:
                        type: string
                        format: uuid
                      source:
                        $ref: "#/components/schemas/EmployeeDayPlan/properties/source"
                      notes:
                        type: string
                    required:
                      - employee_id
                      - plan_date
              required:
                - plans
        required: true
      responses:
        "200":
          description: Employee day plans created/updated
          content:
            application/json:
              schema:
                type: object
                properties:
                  created:
                    type: integer
                  updated:
                    type: integer
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /employee-day-plans/delete-range:
    post:
      tags:
        - Employee Day Plans
      summary: Delete employee day plans in date range
      operationId: deleteEmployeeDayPlanRange
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                employee_id:
                  type: string
                  format: uuid
                from:
                  type: string
                  format: date
                to:
                  type: string
                  format: date
              required:
                - employee_id
                - from
                - to
        required: true
      responses:
        "200":
          description: Employee day plans deleted
          content:
            application/json:
              schema:
                type: object
                properties:
                  deleted:
                    type: integer
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  "/employee-day-plans/{id}":
    get:
      tags:
        - Employee Day Plans
      summary: Get employee day plan by ID
      operationId: getEmployeeDayPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Employee day plan details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmployeeDayPlan"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Employee Day Plans
      summary: Update employee day plan
      operationId: updateEmployeeDayPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        $ref: "#/components/requestBodies/UpdateEmployeeDayPlanRequest"
      responses:
        "200":
          description: Employee day plan updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmployeeDayPlan"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Employee Day Plans
      summary: Delete employee day plan
      operationId: deleteEmployeeDayPlan
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Employee day plan deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{employee_id}/day-plans":
    get:
      tags:
        - Employee Day Plans
      summary: Get day plans for employee in date range
      operationId: getEmployeeDayPlansForEmployee
      parameters:
        - name: employee_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: from
          in: query
          required: true
          description: Start date
          schema:
            type: string
            format: date
        - name: to
          in: query
          required: true
          description: End date
          schema:
            type: string
            format: date
      responses:
        "200":
          description: Employee day plans for the date range
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmployeeDayPlanList"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
  "/employees/{employee_id}/day-plans/{date}":
    get:
      tags:
        - Employee Day Plans
      summary: Get day plan for employee on specific date
      operationId: getEmployeeDayPlanForDate
      parameters:
        - name: employee_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: date
          in: path
          required: true
          schema:
            type: string
            format: date
      responses:
        "200":
          description: Employee day plan for the date
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmployeeDayPlan"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Employee Day Plans
      summary: Upsert day plan for employee on specific date
      operationId: upsertEmployeeDayPlanForDate
      parameters:
        - name: employee_id
          in: path
          required: true
          schema:
            type: string
            format: uuid
        - name: date
          in: path
          required: true
          schema:
            type: string
            format: date
      requestBody:
        $ref: "#/components/requestBodies/UpdateEmployeeDayPlanRequest"
      responses:
        "200":
          description: Employee day plan created/updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/EmployeeDayPlan"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /monthly-evaluations:
    get:
      tags:
        - Monthly Evaluations
      summary: List monthly evaluations
      description: |
        Returns evaluation templates for monthly time reports. Templates define
        which accounts, columns, and calculations appear in monthly summaries.
        Set a default template for tenant-wide use.
      operationId: listMonthlyEvaluations
      parameters:
        - name: is_active
          in: query
          description: Filter by active status
          schema:
            type: boolean
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: cursor
          in: query
          schema:
            type: string
      responses:
        "200":
          description: List of monthly evaluations
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyEvaluationList"
        "401":
          $ref: "#/components/responses/Unauthorized"
    post:
      tags:
        - Monthly Evaluations
      summary: Create monthly evaluation
      operationId: createMonthlyEvaluation
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateMonthlyEvaluationRequest"
        required: true
      responses:
        "201":
          description: Monthly evaluation created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyEvaluation"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
  /monthly-evaluations/default:
    get:
      tags:
        - Monthly Evaluations
      summary: Get default monthly evaluation
      operationId: getDefaultMonthlyEvaluation
      responses:
        "200":
          description: Default monthly evaluation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyEvaluation"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          description: No default evaluation configured
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/monthly-evaluations/{id}":
    get:
      tags:
        - Monthly Evaluations
      summary: Get monthly evaluation by ID
      operationId: getMonthlyEvaluation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Monthly evaluation details
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyEvaluation"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      tags:
        - Monthly Evaluations
      summary: Update monthly evaluation
      operationId: updateMonthlyEvaluation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateMonthlyEvaluationRequest"
        required: true
      responses:
        "200":
          description: Monthly evaluation updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyEvaluation"
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    delete:
      tags:
        - Monthly Evaluations
      summary: Delete monthly evaluation
      operationId: deleteMonthlyEvaluation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "204":
          description: Monthly evaluation deleted
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
        "409":
          description: Cannot delete default evaluation
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProblemDetails"
  "/monthly-evaluations/{id}/set-default":
    post:
      tags:
        - Monthly Evaluations
      summary: Set monthly evaluation as default
      operationId: setDefaultMonthlyEvaluation
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          description: Monthly evaluation set as default
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MonthlyEvaluation"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
servers:
  - url: http://localhost:8080/api/v1
  - url: https://localhost:8080/api/v1
components:
  responses:
    BadRequest:
      description: Invalid request
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ProblemDetails"
    Unauthorized:
      description: Missing or invalid authentication
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ProblemDetails"
    Forbidden:
      description: Insufficient permissions
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ProblemDetails"
    NotFound:
      description: Resource not found
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ProblemDetails"
    InternalError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ProblemDetails"
  requestBodies:
    UpdateEmployeeDayPlanRequest:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/UpdateEmployeeDayPlanRequest"
      required: true
  securitySchemes:
    BearerAuth:
      type: apiKey
      name: Authorization
      in: header
      description: JWT token. Format "Bearer <token>"
  schemas:
    UUID:
      type: string
      format: uuid
      example: 550e8400-e29b-41d4-a716-446655440000
    Timestamp:
      type: string
      format: date-time
      example: 2024-01-15T10:30:00Z
    ProblemDetails:
      type: object
      required:
        - type
        - title
        - status
      properties:
        type:
          type: string
          format: uri
          description: URI identifying the problem type
          example: https://api.example.com/problems/validation-error
        title:
          type: string
          description: Short human-readable summary
          example: Validation Error
        status:
          type: integer
          description: HTTP status code
          example: 400
        detail:
          type: string
          description: Human-readable explanation
          example: The 'content' field is required
        instance:
          type: string
          format: uri
          description: URI identifying the specific occurrence
        errors:
          type: array
          description: Field-level validation errors
          items:
            type: object
            properties:
              field:
                type: string
                example: content
              message:
                type: string
                example: Field is required
    PaginationMeta:
      type: object
      properties:
        total:
          type: integer
          description: Total number of items
          example: 150
        limit:
          type: integer
          description: Items per page
          example: 20
        has_more:
          type: boolean
          description: Whether more items exist
          example: true
        next_cursor:
          type: string
          description: Cursor for next page
          example: eyJpZCI6IjEyMzQ1Njc4OTAifQ==
    User:
      type: object
      required:
        - id
        - email
        - display_name
        - role
        - created_at
      properties:
        id:
          type: string
          format: uuid
        email:
          type: string
          format: email
          example: user@example.com
        display_name:
          type: string
          example: John Doe
        avatar_url:
          type: string
          format: uri
          example: https://storage.example.com/avatars/abc123.jpg
          nullable: true
        role:
          type: string
          enum:
            - user
            - admin
          example: user
        employee_id:
          type: string
          format: uuid
          description: ID of the linked employee record, if any
          nullable: true
        user_group_id:
          type: string
          format: uuid
          description: ID of the assigned user group, if any
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    UserSummary:
      type: object
      required:
        - id
        - display_name
      properties:
        id:
          type: string
          format: uuid
        display_name:
          type: string
          example: John Doe
        avatar_url:
          type: string
          format: uri
    UpdateUserRequest:
      type: object
      properties:
        display_name:
          type: string
          minLength: 2
          maxLength: 255
        avatar_url:
          type: string
          format: uri
        user_group_id:
          type: string
          format: uuid
          nullable: true
    UserList:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/User"
        meta:
          $ref: "#/components/schemas/PaginationMeta"
    CurrentUserPermissions:
      type: object
      required:
        - permission_ids
        - is_admin
      properties:
        permission_ids:
          type: array
          items:
            type: string
            format: uuid
        is_admin:
          type: boolean
    CurrentUserPermissionsResponse:
      type: object
      required:
        - data
      properties:
        data:
          $ref: "#/components/schemas/CurrentUserPermissions"
    Notification:
      type: object
      required:
        - id
        - tenant_id
        - user_id
        - type
        - title
        - message
        - created_at
        - updated_at
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        type:
          type: string
          enum:
            - approvals
            - errors
            - reminders
            - system
        title:
          type: string
          example: Absence approved
        message:
          type: string
          example: Vacation on 2026-01-20 was approved.
        link:
          type: string
          nullable: true
        read_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    NotificationList:
      type: object
      required:
        - data
        - total
        - unread_count
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Notification"
        total:
          type: integer
          format: int64
          example: 50
        unread_count:
          type: integer
          format: int64
          example: 3
    NotificationPreferences:
      type: object
      required:
        - id
        - tenant_id
        - user_id
        - approvals_enabled
        - errors_enabled
        - reminders_enabled
        - system_enabled
        - created_at
        - updated_at
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
        approvals_enabled:
          type: boolean
        errors_enabled:
          type: boolean
        reminders_enabled:
          type: boolean
        system_enabled:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    UpdateNotificationPreferencesRequest:
      type: object
      required:
        - approvals_enabled
        - errors_enabled
        - reminders_enabled
        - system_enabled
      properties:
        approvals_enabled:
          type: boolean
        errors_enabled:
          type: boolean
        reminders_enabled:
          type: boolean
        system_enabled:
          type: boolean
    MarkNotificationsReadResponse:
      type: object
      required:
        - count
      properties:
        count:
          type: integer
          format: int64
          example: 5
    Tenant:
      type: object
      required:
        - id
        - name
        - slug
        - is_active
        - vacation_basis
        - created_at
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
          example: Acme Corp
        slug:
          type: string
          example: acme-corp
        address_street:
          type: string
          example: Main Street 1
        address_zip:
          type: string
          example: "10115"
        address_city:
          type: string
          example: Berlin
        address_country:
          type: string
          example: DE
        phone:
          type: string
          example: +49 30 123456
        email:
          type: string
          format: email
          example: info@example.com
        payroll_export_base_path:
          type: string
          example: /var/lib/payroll/exports
        notes:
          type: string
          example: Primary HQ tenant
        vacation_basis:
          type: string
          enum:
            - calendar_year
            - entry_date
          example: calendar_year
        settings:
          type: object
          additionalProperties: true
          example: {}
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    CreateTenantRequest:
      type: object
      required:
        - name
        - slug
        - address_street
        - address_zip
        - address_city
        - address_country
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: Acme Corp
        slug:
          type: string
          minLength: 3
          maxLength: 100
          pattern: ^[a-z0-9-]+$
          example: acme-corp
        address_street:
          type: string
          minLength: 1
          maxLength: 255
          example: Main Street 1
        address_zip:
          type: string
          minLength: 1
          maxLength: 20
          example: "10115"
        address_city:
          type: string
          minLength: 1
          maxLength: 100
          example: Berlin
        address_country:
          type: string
          minLength: 1
          maxLength: 100
          example: DE
        phone:
          type: string
          maxLength: 50
          example: +49 30 123456
          nullable: true
        email:
          type: string
          format: email
          maxLength: 255
          example: info@example.com
          nullable: true
        payroll_export_base_path:
          type: string
          example: /var/lib/payroll/exports
          nullable: true
        notes:
          type: string
          example: Primary HQ tenant
          nullable: true
        vacation_basis:
          type: string
          enum:
            - calendar_year
            - entry_date
          example: calendar_year
    UpdateTenantRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
          nullable: true
        address_street:
          type: string
          minLength: 1
          maxLength: 255
          nullable: true
        address_zip:
          type: string
          minLength: 1
          maxLength: 20
          nullable: true
        address_city:
          type: string
          minLength: 1
          maxLength: 100
          nullable: true
        address_country:
          type: string
          minLength: 1
          maxLength: 100
          nullable: true
        phone:
          type: string
          maxLength: 50
          nullable: true
        email:
          type: string
          format: email
          maxLength: 255
          nullable: true
        payroll_export_base_path:
          type: string
          nullable: true
        notes:
          type: string
          nullable: true
        vacation_basis:
          type: string
          enum:
            - calendar_year
            - entry_date
          nullable: true
        is_active:
          type: boolean
          nullable: true
    TenantList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Tenant"
    Holiday:
      type: object
      required:
        - id
        - tenant_id
        - holiday_date
        - name
        - is_half_day
        - applies_to_all
        - created_at
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        holiday_date:
          type: string
          format: date
          example: 2024-01-01
        name:
          type: string
          example: New Year's Day
        is_half_day:
          type: boolean
          example: false
        applies_to_all:
          type: boolean
          example: true
        department_id:
          type: string
          format: uuid
          description: Optional department restriction
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    CreateHolidayRequest:
      type: object
      required:
        - holiday_date
        - name
      properties:
        holiday_date:
          type: string
          format: date
          example: 2024-01-01
        name:
          type: string
          minLength: 1
          maxLength: 255
          example: New Year's Day
        is_half_day:
          type: boolean
          default: false
        applies_to_all:
          type: boolean
          default: true
        department_id:
          type: string
          format: uuid
          description: Optional department restriction
    UpdateHolidayRequest:
      type: object
      properties:
        holiday_date:
          type: string
          format: date
        name:
          type: string
          minLength: 1
          maxLength: 255
        is_half_day:
          type: boolean
        applies_to_all:
          type: boolean
        department_id:
          type: string
          format: uuid
    HolidayList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Holiday"
    Employee:
      type: object
      required:
        - id
        - tenant_id
        - personnel_number
        - first_name
        - last_name
        - entry_date
        - is_active
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        personnel_number:
          type: string
          example: E001
        first_name:
          type: string
          example: John
        last_name:
          type: string
          example: Doe
        email:
          type: string
          format: email
          nullable: true
        phone:
          type: string
          nullable: true
        entry_date:
          type: string
          format: date
          example: 2024-01-15
        exit_date:
          type: string
          format: date
          nullable: true
        department_id:
          type: string
          format: uuid
          nullable: true
        cost_center_id:
          type: string
          format: uuid
          nullable: true
        employment_type_id:
          type: string
          format: uuid
          nullable: true
        tariff_id:
          type: string
          format: uuid
          nullable: true
        weekly_hours:
          type: number
          format: decimal
          example: 40
        vacation_days_per_year:
          type: number
          format: decimal
          example: 30
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        department:
          allOf:
            - $ref: "#/components/schemas/Department"
          nullable: true
        cost_center:
          allOf:
            - $ref: "#/components/schemas/CostCenter"
          nullable: true
        employment_type:
          allOf:
            - $ref: "#/components/schemas/EmploymentType"
          nullable: true
        tariff:
          allOf:
            - type: object
              required:
                - id
                - code
                - name
              properties:
                id:
                  type: string
                  format: uuid
                code:
                  type: string
                name:
                  type: string
          nullable: true
        contacts:
          type: array
          items:
            type: object
            required:
              - id
              - employee_id
              - contact_type
              - value
            properties:
              id:
                type: string
                format: uuid
              employee_id:
                type: string
                format: uuid
              contact_type:
                type: string
                enum:
                  - email
                  - phone
                  - mobile
                  - emergency
                example: email
              value:
                type: string
                example: john.doe@example.com
              label:
                type: string
                example: Work
                nullable: true
              is_primary:
                type: boolean
                example: false
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
        cards:
          type: array
          items:
            type: object
            required:
              - id
              - tenant_id
              - employee_id
              - card_number
              - valid_from
            properties:
              id:
                type: string
                format: uuid
              tenant_id:
                type: string
                format: uuid
              employee_id:
                type: string
                format: uuid
              card_number:
                type: string
                example: CARD001
              card_type:
                type: string
                enum:
                  - rfid
                  - barcode
                  - pin
                default: rfid
              valid_from:
                type: string
                format: date
              valid_to:
                type: string
                format: date
                nullable: true
              is_active:
                type: boolean
                example: true
              deactivated_at:
                type: string
                format: date-time
                nullable: true
              deactivation_reason:
                type: string
                nullable: true
              created_at:
                type: string
                format: date-time
              updated_at:
                type: string
                format: date-time
    EmployeeSummary:
      type: object
      required:
        - id
        - personnel_number
        - first_name
        - last_name
      properties:
        id:
          type: string
          format: uuid
        personnel_number:
          type: string
        first_name:
          type: string
        last_name:
          type: string
        department_id:
          type: string
          format: uuid
          nullable: true
        tariff_id:
          type: string
          format: uuid
          nullable: true
        is_active:
          type: boolean
    CreateEmployeeRequest:
      type: object
      required:
        - personnel_number
        - pin
        - first_name
        - last_name
        - entry_date
      properties:
        personnel_number:
          type: string
          minLength: 1
          maxLength: 50
        pin:
          type: string
          minLength: 4
          maxLength: 20
        first_name:
          type: string
          minLength: 1
          maxLength: 100
        last_name:
          type: string
          minLength: 1
          maxLength: 100
        email:
          type: string
          format: email
        phone:
          type: string
        entry_date:
          type: string
          format: date
        department_id:
          type: string
          format: uuid
        cost_center_id:
          type: string
          format: uuid
        employment_type_id:
          type: string
          format: uuid
        tariff_id:
          type: string
          format: uuid
          nullable: true
        weekly_hours:
          type: number
          format: decimal
        vacation_days_per_year:
          type: number
          format: decimal
    UpdateEmployeeRequest:
      type: object
      properties:
        first_name:
          type: string
          minLength: 1
          maxLength: 100
        last_name:
          type: string
          minLength: 1
          maxLength: 100
        email:
          type: string
          format: email
        phone:
          type: string
        exit_date:
          type: string
          format: date
        department_id:
          type: string
          format: uuid
        cost_center_id:
          type: string
          format: uuid
        employment_type_id:
          type: string
          format: uuid
        tariff_id:
          type: string
          format: uuid
          nullable: true
        weekly_hours:
          type: number
          format: decimal
        vacation_days_per_year:
          type: number
          format: decimal
    CreateEmployeeContactRequest:
      type: object
      required:
        - contact_type
        - value
      properties:
        contact_type:
          type: string
          enum:
            - email
            - phone
            - mobile
            - emergency
        value:
          type: string
          minLength: 1
          maxLength: 255
        label:
          type: string
          maxLength: 100
        is_primary:
          type: boolean
          default: false
    CreateEmployeeCardRequest:
      type: object
      required:
        - card_number
        - valid_from
      properties:
        card_number:
          type: string
          minLength: 1
          maxLength: 100
        card_type:
          type: string
          enum:
            - rfid
            - barcode
            - pin
          default: rfid
        valid_from:
          type: string
          format: date
        valid_to:
          type: string
          format: date
    EmployeeList:
      type: object
      required:
        - data
        - total
        - page
        - limit
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Employee"
        total:
          type: integer
          example: 150
        page:
          type: integer
          example: 1
        limit:
          type: integer
    BulkTariffAssignmentRequest:
      type: object
      properties:
        employee_ids:
          type: array
          items:
            type: string
            format: uuid
        filter:
          type: object
          properties:
            q:
              type: string
            department_id:
              type: string
              format: uuid
            is_active:
              type: boolean
        tariff_id:
          type: string
          format: uuid
          nullable: true
    BulkTariffAssignmentResponse:
      type: object
      required:
        - updated
        - skipped
      properties:
        updated:
          type: integer
        skipped:
          type: integer
          example: 20
    Department:
      type: object
      required:
        - id
        - tenant_id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          example: Engineering
        code:
          type: string
          example: ENG
        description:
          type: string
          nullable: true
        parent_id:
          type: string
          format: uuid
          description: Parent department for hierarchical structure
          nullable: true
        manager_id:
          type: string
          format: uuid
          description: Employee who manages this department
          nullable: true
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        parent:
          allOf:
            - $ref: "#/components/schemas/DepartmentSummary"
          nullable: true
        children:
          type: array
          items:
            $ref: "#/components/schemas/DepartmentSummary"
    DepartmentNode:
      type: object
      description: A node in the department hierarchy tree
      required:
        - department
      properties:
        department:
          $ref: "#/components/schemas/Department"
        children:
          type: array
          items:
            $ref: "#/components/schemas/DepartmentNode"
    CreateDepartmentRequest:
      type: object
      required:
        - name
        - code
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 20
        description:
          type: string
        parent_id:
          type: string
          format: uuid
        manager_id:
          type: string
          format: uuid
    UpdateDepartmentRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 20
        description:
          type: string
        parent_id:
          type: string
          format: uuid
        manager_id:
          type: string
          format: uuid
        is_active:
          type: boolean
    DepartmentList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Department"
    DayPlan:
      type: object
      required:
        - id
        - tenant_id
        - code
        - name
        - plan_type
        - regular_hours
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        code:
          type: string
          example: PLAN-001
        name:
          type: string
          example: Standard Day
        description:
          type: string
          nullable: true
        plan_type:
          type: string
          enum:
            - fixed
            - flextime
          example: fixed
        come_from:
          type: integer
          description: Earliest allowed arrival (minutes from midnight)
          example: 420
          nullable: true
        come_to:
          type: integer
          description: Latest allowed arrival (minutes from midnight)
          example: 540
          nullable: true
        go_from:
          type: integer
          description: Earliest allowed departure (minutes from midnight)
          example: 960
          nullable: true
        go_to:
          type: integer
          description: Latest allowed departure (minutes from midnight)
          example: 1080
          nullable: true
        core_start:
          type: integer
          description: Core time start (minutes from midnight)
          example: 540
          nullable: true
        core_end:
          type: integer
          description: Core time end (minutes from midnight)
          example: 960
          nullable: true
        regular_hours:
          type: integer
          description: Target working hours in minutes
          example: 480
        regular_hours_2:
          type: integer
          description: Alternative target hours for absence days (minutes)
          nullable: true
        from_employee_master:
          type: boolean
          description: Get target hours from employee master data
        tolerance_come_plus:
          type: integer
          description: Tolerance for late arrival (minutes)
          example: 0
        tolerance_come_minus:
          type: integer
          description: Tolerance for early arrival (minutes)
          example: 0
        tolerance_go_plus:
          type: integer
          description: Tolerance for late departure (minutes)
          example: 0
        tolerance_go_minus:
          type: integer
          description: Tolerance for early departure (minutes)
          example: 0
        variable_work_time:
          type: boolean
          description: Enable tolerance_come_minus for fixed working time plans
        rounding_come_type:
          type: string
          enum:
            - none
            - up
            - down
            - nearest
            - add
            - subtract
          nullable: true
        rounding_come_interval:
          type: integer
          description: Rounding interval in minutes
          nullable: true
        rounding_come_add_value:
          type: integer
          description: Value to add/subtract for arrival (minutes)
          nullable: true
        rounding_go_type:
          type: string
          enum:
            - none
            - up
            - down
            - nearest
            - add
            - subtract
          nullable: true
        rounding_go_interval:
          type: integer
          description: Rounding interval in minutes
          nullable: true
        rounding_go_add_value:
          type: integer
          description: Value to add/subtract for departure (minutes)
          nullable: true
        round_all_bookings:
          type: boolean
          description: Round all bookings vs first arrival/last departure only
        min_work_time:
          type: integer
          description: Minimum work time in minutes
          nullable: true
        max_net_work_time:
          type: integer
          description: Maximum net work time in minutes
          nullable: true
        holiday_credit_cat1:
          type: integer
          description: Full holiday time credit (minutes)
          nullable: true
        holiday_credit_cat2:
          type: integer
          description: Half holiday time credit (minutes)
          nullable: true
        holiday_credit_cat3:
          type: integer
          description: Custom category holiday credit (minutes)
          nullable: true
        vacation_deduction:
          type: number
          format: float
          description: Vacation days deducted per day (default 1.0)
        no_booking_behavior:
          type: string
          enum:
            - error
            - deduct_target
            - vocational_school
            - adopt_target
            - target_with_order
          description: Behavior when no bookings recorded
        day_change_behavior:
          type: string
          enum:
            - none
            - at_arrival
            - at_departure
            - auto_complete
          description: How to handle cross-midnight shifts
        shift_detect_arrive_from:
          type: integer
          description: Shift detection arrival window start (minutes)
          nullable: true
        shift_detect_arrive_to:
          type: integer
          description: Shift detection arrival window end (minutes)
          nullable: true
        shift_detect_depart_from:
          type: integer
          description: Shift detection departure window start (minutes)
          nullable: true
        shift_detect_depart_to:
          type: integer
          description: Shift detection departure window end (minutes)
          nullable: true
        shift_alt_plan_1:
          type: string
          format: uuid
          nullable: true
        shift_alt_plan_2:
          type: string
          format: uuid
          nullable: true
        shift_alt_plan_3:
          type: string
          format: uuid
          nullable: true
        shift_alt_plan_4:
          type: string
          format: uuid
          nullable: true
        shift_alt_plan_5:
          type: string
          format: uuid
          nullable: true
        shift_alt_plan_6:
          type: string
          format: uuid
          nullable: true
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        breaks:
          type: array
          items:
            $ref: "#/components/schemas/DayPlanBreak"
        bonuses:
          type: array
          items:
            $ref: "#/components/schemas/DayPlanBonus"
    DayPlanSummary:
      type: object
      required:
        - id
        - code
        - name
        - plan_type
      properties:
        id:
          type: string
          format: uuid
        code:
          type: string
        name:
          type: string
        plan_type:
          type: string
    DayPlanBreak:
      type: object
      required:
        - id
        - day_plan_id
        - break_type
        - duration
      properties:
        id:
          type: string
          format: uuid
        day_plan_id:
          type: string
          format: uuid
        break_type:
          type: string
          enum:
            - fixed
            - variable
            - minimum
          example: fixed
        start_time:
          type: integer
          description: Break start (minutes from midnight)
          nullable: true
        end_time:
          type: integer
          description: Break end (minutes from midnight)
          nullable: true
        duration:
          type: integer
          description: Break duration in minutes
          example: 30
        after_work_minutes:
          type: integer
          description: Auto-deduct break after this much work time
          nullable: true
        auto_deduct:
          type: boolean
          description: Automatically deduct break
          example: true
        is_paid:
          type: boolean
          description: Is this break paid
          example: false
        minutes_difference:
          type: boolean
          description: Proportional deduction when near threshold (for minimum breaks)
        sort_order:
          type: integer
          example: 0
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    DayPlanBonus:
      type: object
      required:
        - id
        - day_plan_id
        - account_id
        - time_from
        - time_to
        - calculation_type
        - value_minutes
      properties:
        id:
          type: string
          format: uuid
        day_plan_id:
          type: string
          format: uuid
        account_id:
          type: string
          format: uuid
        time_from:
          type: integer
          description: Bonus time range start (minutes from midnight)
          example: 1200
        time_to:
          type: integer
          description: Bonus time range end (minutes from midnight)
          example: 1380
        calculation_type:
          type: string
          enum:
            - fixed
            - per_minute
            - percentage
          example: per_minute
        value_minutes:
          type: integer
          description: Bonus value in minutes
          example: 15
        min_work_minutes:
          type: integer
          description: Minimum work required for bonus
          nullable: true
        applies_on_holiday:
          type: boolean
          example: false
        sort_order:
          type: integer
          example: 0
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        account:
          allOf:
            - $ref: "#/components/schemas/Account"
          nullable: true
    CreateDayPlanRequest:
      type: object
      required:
        - code
        - name
        - plan_type
        - regular_hours
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 20
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        plan_type:
          type: string
          enum:
            - fixed
            - flextime
        come_from:
          type: integer
        come_to:
          type: integer
        go_from:
          type: integer
        go_to:
          type: integer
        core_start:
          type: integer
        core_end:
          type: integer
        regular_hours:
          type: integer
        regular_hours_2:
          type: integer
        from_employee_master:
          type: boolean
        tolerance_come_plus:
          type: integer
        tolerance_come_minus:
          type: integer
        tolerance_go_plus:
          type: integer
        tolerance_go_minus:
          type: integer
        variable_work_time:
          type: boolean
        rounding_come_type:
          type: string
          enum:
            - none
            - up
            - down
            - nearest
            - add
            - subtract
        rounding_come_interval:
          type: integer
        rounding_come_add_value:
          type: integer
        rounding_go_type:
          type: string
          enum:
            - none
            - up
            - down
            - nearest
            - add
            - subtract
        rounding_go_interval:
          type: integer
        rounding_go_add_value:
          type: integer
        round_all_bookings:
          type: boolean
        min_work_time:
          type: integer
        max_net_work_time:
          type: integer
        holiday_credit_cat1:
          type: integer
        holiday_credit_cat2:
          type: integer
        holiday_credit_cat3:
          type: integer
        vacation_deduction:
          type: number
          format: float
        no_booking_behavior:
          type: string
          enum:
            - error
            - deduct_target
            - vocational_school
            - adopt_target
            - target_with_order
        day_change_behavior:
          type: string
          enum:
            - none
            - at_arrival
            - at_departure
            - auto_complete
        shift_detect_arrive_from:
          type: integer
        shift_detect_arrive_to:
          type: integer
        shift_detect_depart_from:
          type: integer
        shift_detect_depart_to:
          type: integer
        shift_alt_plan_1:
          type: string
          format: uuid
        shift_alt_plan_2:
          type: string
          format: uuid
        shift_alt_plan_3:
          type: string
          format: uuid
        shift_alt_plan_4:
          type: string
          format: uuid
        shift_alt_plan_5:
          type: string
          format: uuid
        shift_alt_plan_6:
          type: string
          format: uuid
        is_active:
          type: boolean
    UpdateDayPlanRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        plan_type:
          type: string
          enum:
            - fixed
            - flextime
        come_from:
          type: integer
        come_to:
          type: integer
        go_from:
          type: integer
        go_to:
          type: integer
        core_start:
          type: integer
        core_end:
          type: integer
        regular_hours:
          type: integer
        regular_hours_2:
          type: integer
        from_employee_master:
          type: boolean
        tolerance_come_plus:
          type: integer
        tolerance_come_minus:
          type: integer
        tolerance_go_plus:
          type: integer
        tolerance_go_minus:
          type: integer
        variable_work_time:
          type: boolean
        rounding_come_type:
          type: string
          enum:
            - none
            - up
            - down
            - nearest
            - add
            - subtract
        rounding_come_interval:
          type: integer
        rounding_come_add_value:
          type: integer
        rounding_go_type:
          type: string
          enum:
            - none
            - up
            - down
            - nearest
            - add
            - subtract
        rounding_go_interval:
          type: integer
        rounding_go_add_value:
          type: integer
        round_all_bookings:
          type: boolean
        min_work_time:
          type: integer
        max_net_work_time:
          type: integer
        holiday_credit_cat1:
          type: integer
        holiday_credit_cat2:
          type: integer
        holiday_credit_cat3:
          type: integer
        vacation_deduction:
          type: number
          format: float
        no_booking_behavior:
          type: string
          enum:
            - error
            - deduct_target
            - vocational_school
            - adopt_target
            - target_with_order
        day_change_behavior:
          type: string
          enum:
            - none
            - at_arrival
            - at_departure
            - auto_complete
        shift_detect_arrive_from:
          type: integer
        shift_detect_arrive_to:
          type: integer
        shift_detect_depart_from:
          type: integer
        shift_detect_depart_to:
          type: integer
        shift_alt_plan_1:
          type: string
          format: uuid
        shift_alt_plan_2:
          type: string
          format: uuid
        shift_alt_plan_3:
          type: string
          format: uuid
        shift_alt_plan_4:
          type: string
          format: uuid
        shift_alt_plan_5:
          type: string
          format: uuid
        shift_alt_plan_6:
          type: string
          format: uuid
        is_active:
          type: boolean
    CopyDayPlanRequest:
      type: object
      required:
        - new_code
        - new_name
      properties:
        new_code:
          type: string
          minLength: 1
          maxLength: 20
        new_name:
          type: string
          minLength: 1
          maxLength: 255
    CreateDayPlanBreakRequest:
      type: object
      required:
        - break_type
        - duration
      properties:
        break_type:
          type: string
          enum:
            - fixed
            - variable
            - minimum
        start_time:
          type: integer
        end_time:
          type: integer
        duration:
          type: integer
        after_work_minutes:
          type: integer
        auto_deduct:
          type: boolean
          default: true
        is_paid:
          type: boolean
          default: false
        minutes_difference:
          type: boolean
          default: false
    CreateDayPlanBonusRequest:
      type: object
      required:
        - account_id
        - time_from
        - time_to
        - calculation_type
        - value_minutes
      properties:
        account_id:
          type: string
          format: uuid
        time_from:
          type: integer
        time_to:
          type: integer
        calculation_type:
          type: string
          enum:
            - fixed
            - per_minute
            - percentage
        value_minutes:
          type: integer
        min_work_minutes:
          type: integer
        applies_on_holiday:
          type: boolean
          default: false
    DayPlanList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/DayPlan"
    Account:
      type: object
      required:
        - id
        - tenant_id
        - code
        - name
        - account_type
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
          description: Null for system accounts
          nullable: true
        code:
          type: string
          example: OT
        name:
          type: string
          example: Overtime
        description:
          type: string
          nullable: true
        account_type:
          type: string
          enum:
            - bonus
            - tracking
            - balance
          example: bonus
        unit:
          type: string
          enum:
            - minutes
            - hours
            - days
          example: minutes
        is_system:
          type: boolean
          description: System accounts cannot be deleted
          example: false
        year_carryover:
          type: boolean
          description: Carry over balance at year end
          example: true
        is_payroll_relevant:
          type: boolean
          description: Include in payroll export
          example: true
        payroll_code:
          type: string
          description: Code for payroll system export
          nullable: true
        sort_order:
          type: integer
          example: 0
        is_active:
          type: boolean
          example: true
        usage_count:
          type: integer
          description: Number of day plans that reference this account
          example: 0
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    AccountSummary:
      type: object
      required:
        - id
        - code
        - name
        - account_type
      properties:
        id:
          type: string
          format: uuid
        code:
          type: string
        name:
          type: string
        account_type:
          type: string
    AccountValue:
      type: object
      required:
        - id
        - tenant_id
        - employee_id
        - account_id
        - value_date
        - value_minutes
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        account_id:
          type: string
          format: uuid
        value_date:
          type: string
          format: date
        value_minutes:
          type: integer
          example: 60
        source:
          type: string
          enum:
            - calculated
            - manual
            - correction
            - import
          example: calculated
        source_id:
          type: string
          format: uuid
          description: ID of source record (daily_value, correction, etc.)
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        account:
          allOf:
            - $ref: "#/components/schemas/AccountSummary"
          nullable: true
        employee:
          allOf:
            - $ref: "#/components/schemas/EmployeeSummary"
          nullable: true
    AccountUsage:
      type: object
      required:
        - account_id
        - usage_count
        - day_plans
      properties:
        account_id:
          type: string
          format: uuid
        usage_count:
          type: integer
          example: 2
        day_plans:
          type: array
          items:
            type: object
            required:
              - id
              - code
              - name
            properties:
              id:
                type: string
                format: uuid
              code:
                type: string
              name:
                type: string
    CreateAccountRequest:
      type: object
      required:
        - code
        - name
        - account_type
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 20
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        account_type:
          type: string
          enum:
            - bonus
            - tracking
            - balance
        unit:
          type: string
          enum:
            - minutes
            - hours
            - days
        year_carryover:
          type: boolean
        is_payroll_relevant:
          type: boolean
          default: false
        payroll_code:
          type: string
        sort_order:
          type: integer
    UpdateAccountRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        unit:
          type: string
          enum:
            - minutes
            - hours
            - days
        is_payroll_relevant:
          type: boolean
        payroll_code:
          type: string
        sort_order:
          type: integer
        year_carryover:
          type: boolean
        is_active:
          type: boolean
    AccountList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Account"
    AccountValueList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/AccountValue"
    CostCenter:
      type: object
      required:
        - id
        - tenant_id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          example: Development
        code:
          type: string
          example: DEV-001
        description:
          type: string
          nullable: true
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    CostCenterSummary:
      type: object
      required:
        - id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        code:
          type: string
    CreateCostCenterRequest:
      type: object
      required:
        - name
        - code
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 50
        description:
          type: string
    UpdateCostCenterRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 50
        description:
          type: string
        is_active:
          type: boolean
    CostCenterList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/CostCenter"
    EmploymentType:
      type: object
      required:
        - id
        - tenant_id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          example: Full-time
        code:
          type: string
          example: FT
        description:
          type: string
          nullable: true
        default_weekly_hours:
          type: number
          format: decimal
          example: 40
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    EmploymentTypeSummary:
      type: object
      required:
        - id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        code:
          type: string
    CreateEmploymentTypeRequest:
      type: object
      required:
        - name
        - code
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 20
        description:
          type: string
        default_weekly_hours:
          type: number
          format: decimal
    UpdateEmploymentTypeRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 20
        description:
          type: string
        default_weekly_hours:
          type: number
          format: decimal
        is_active:
          type: boolean
    EmploymentTypeList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/EmploymentType"
    WeekPlan:
      type: object
      required:
        - id
        - tenant_id
        - code
        - name
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        code:
          type: string
          example: WEEK-001
        name:
          type: string
          example: Standard Week
        description:
          type: string
          nullable: true
        monday_day_plan_id:
          type: string
          format: uuid
          nullable: true
        tuesday_day_plan_id:
          type: string
          format: uuid
          nullable: true
        wednesday_day_plan_id:
          type: string
          format: uuid
          nullable: true
        thursday_day_plan_id:
          type: string
          format: uuid
          nullable: true
        friday_day_plan_id:
          type: string
          format: uuid
          nullable: true
        saturday_day_plan_id:
          type: string
          format: uuid
          nullable: true
        sunday_day_plan_id:
          type: string
          format: uuid
          nullable: true
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        monday_day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
        tuesday_day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
        wednesday_day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
        thursday_day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
        friday_day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
        saturday_day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
        sunday_day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
    WeekPlanSummary:
      type: object
      required:
        - id
        - code
        - name
      properties:
        id:
          type: string
          format: uuid
        code:
          type: string
        name:
          type: string
    CreateWeekPlanRequest:
      type: object
      required:
        - code
        - name
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 20
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        monday_day_plan_id:
          type: string
          format: uuid
        tuesday_day_plan_id:
          type: string
          format: uuid
        wednesday_day_plan_id:
          type: string
          format: uuid
        thursday_day_plan_id:
          type: string
          format: uuid
        friday_day_plan_id:
          type: string
          format: uuid
        saturday_day_plan_id:
          type: string
          format: uuid
        sunday_day_plan_id:
          type: string
          format: uuid
    UpdateWeekPlanRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        monday_day_plan_id:
          type: string
          format: uuid
        tuesday_day_plan_id:
          type: string
          format: uuid
        wednesday_day_plan_id:
          type: string
          format: uuid
        thursday_day_plan_id:
          type: string
          format: uuid
        friday_day_plan_id:
          type: string
          format: uuid
        saturday_day_plan_id:
          type: string
          format: uuid
        sunday_day_plan_id:
          type: string
          format: uuid
        is_active:
          type: boolean
    WeekPlanList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/WeekPlan"
    Location:
      type: object
      required:
        - id
        - tenant_id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          example: Main Office
        code:
          type: string
          example: HQ
        description:
          type: string
          nullable: true
        address:
          type: string
          nullable: true
        city:
          type: string
          nullable: true
        country:
          type: string
          nullable: true
        timezone:
          type: string
          example: Europe/Berlin
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    LocationSummary:
      type: object
      required:
        - id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        code:
          type: string
    CreateLocationRequest:
      type: object
      required:
        - name
        - code
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 20
        description:
          type: string
        address:
          type: string
        city:
          type: string
        country:
          type: string
        timezone:
          type: string
    UpdateLocationRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 20
        description:
          type: string
        address:
          type: string
        city:
          type: string
        country:
          type: string
        timezone:
          type: string
        is_active:
          type: boolean
    LocationList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Location"
    Tariff:
      type: object
      required:
        - id
        - tenant_id
        - code
        - name
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        code:
          type: string
          example: TARIFF-001
        name:
          type: string
          example: Standard Tariff
        description:
          type: string
          nullable: true
        week_plan_id:
          type: string
          format: uuid
          nullable: true
        valid_from:
          type: string
          format: date
          nullable: true
        valid_to:
          type: string
          format: date
          nullable: true
        is_active:
          type: boolean
          example: true
        annual_vacation_days:
          type: number
          format: double
          description: "ZMI: Jahresurlaub - Base annual vacation days"
          example: 30
          nullable: true
        work_days_per_week:
          type: integer
          minimum: 1
          maximum: 7
          description: "ZMI: AT pro Woche - Work days per week for vacation pro-rating"
          example: 5
          nullable: true
        vacation_basis:
          type: string
          enum:
            - calendar_year
            - entry_date
          description: "ZMI: Urlaubsberechnung Basis - Vacation year calculation basis"
          example: calendar_year
        daily_target_hours:
          type: number
          format: double
          description: "ZMI: Tagessollstunden - Daily target hours"
          example: 8
          nullable: true
        weekly_target_hours:
          type: number
          format: double
          description: "ZMI: Wochensollstunden - Weekly target hours"
          example: 40
          nullable: true
        monthly_target_hours:
          type: number
          format: double
          description: "ZMI: Monatssollstunden - Monthly target hours"
          example: 173.33
          nullable: true
        annual_target_hours:
          type: number
          format: double
          description: "ZMI: Jahressollstunden - Annual target hours"
          example: 2080
          nullable: true
        max_flextime_per_month:
          type: integer
          description: "ZMI: Max Gleitzeit im Monat - Max monthly flextime credit in
            minutes"
          example: 600
          nullable: true
        upper_limit_annual:
          type: integer
          description: "ZMI: Obergrenze Jahreszeitkonto - Annual flextime cap in minutes"
          example: 2400
          nullable: true
        lower_limit_annual:
          type: integer
          description: "ZMI: Untergrenze Jahreszeitkonto - Annual flextime floor in
            minutes (can be negative)"
          example: -600
          nullable: true
        flextime_threshold:
          type: integer
          description: "ZMI: Gleitzeitschwelle - Overtime threshold in minutes"
          example: 60
          nullable: true
        credit_type:
          type: string
          enum:
            - no_evaluation
            - complete
            - after_threshold
            - no_carryover
          description: "ZMI: Art der Gutschrift - How flextime is credited at month end"
          example: no_evaluation
        rhythm_type:
          type: string
          enum:
            - weekly
            - rolling_weekly
            - x_days
          description: "ZMI: Zeitplan-Modell - Time plan rhythm type"
          example: weekly
        cycle_days:
          type: integer
          minimum: 1
          maximum: 365
          description: "ZMI: Tage im Zyklus - For x_days rhythm, number of days in cycle"
          example: 14
          nullable: true
        rhythm_start_date:
          type: string
          format: date
          description: "ZMI: Rhythmus-Startdatum - Start date for rhythm calculation"
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        week_plan:
          allOf:
            - $ref: "#/components/schemas/WeekPlanSummary"
          nullable: true
        breaks:
          type: array
          items:
            $ref: "#/components/schemas/TariffBreak"
        tariff_week_plans:
          type: array
          description: Ordered week plans for rolling_weekly rhythm
          items:
            type: object
            required:
              - id
              - tariff_id
              - week_plan_id
              - sequence_order
            properties:
              id:
                type: string
                format: uuid
              tariff_id:
                type: string
                format: uuid
              week_plan_id:
                type: string
                format: uuid
              sequence_order:
                type: integer
                description: Position in rotation (1-based)
                example: 1
              created_at:
                type: string
                format: date-time
              week_plan:
                allOf:
                  - $ref: "#/components/schemas/WeekPlanSummary"
                nullable: true
        tariff_day_plans:
          type: array
          description: Day plans for x_days rhythm
          items:
            type: object
            required:
              - id
              - tariff_id
              - day_position
            properties:
              id:
                type: string
                format: uuid
              tariff_id:
                type: string
                format: uuid
              day_position:
                type: integer
                description: Position in cycle (1-based)
                example: 1
              day_plan_id:
                type: string
                format: uuid
                description: NULL = off day
                nullable: true
              created_at:
                type: string
                format: date-time
              day_plan:
                allOf:
                  - $ref: "#/components/schemas/DayPlanSummary"
                nullable: true
    TariffBreak:
      type: object
      required:
        - id
        - tariff_id
        - break_type
        - duration
      properties:
        id:
          type: string
          format: uuid
        tariff_id:
          type: string
          format: uuid
        break_type:
          type: string
          enum:
            - fixed
            - variable
            - minimum
          example: minimum
        after_work_minutes:
          type: integer
          description: Deduct break after this much work time
          example: 360
        duration:
          type: integer
          description: Break duration in minutes
          example: 30
        is_paid:
          type: boolean
          example: false
        sort_order:
          type: integer
          example: 0
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    CreateTariffRequest:
      type: object
      required:
        - code
        - name
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 20
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        week_plan_id:
          type: string
          format: uuid
        valid_from:
          type: string
          format: date
        valid_to:
          type: string
          format: date
        rhythm_type:
          type: string
          enum:
            - weekly
            - rolling_weekly
            - x_days
          description: "Time plan rhythm type (default: weekly)"
        cycle_days:
          type: integer
          minimum: 1
          maximum: 365
          description: "For x_days rhythm: number of days in cycle"
        rhythm_start_date:
          type: string
          format: date
          description: Start date for rhythm calculation
        week_plan_ids:
          type: array
          description: "For rolling_weekly: ordered list of week plan IDs"
          items:
            type: string
            format: uuid
        day_plans:
          type: array
          description: "For x_days: day plans per position in cycle"
          items:
            type: object
            required:
              - day_position
            properties:
              day_position:
                type: integer
                minimum: 1
                description: Position in cycle (1-based)
              day_plan_id:
                type: string
                format: uuid
                description: Day plan ID, null for off day
                nullable: true
        annual_vacation_days:
          type: number
          format: double
        work_days_per_week:
          type: integer
          minimum: 1
          maximum: 7
        vacation_basis:
          type: string
          enum:
            - calendar_year
            - entry_date
        daily_target_hours:
          type: number
          format: double
        weekly_target_hours:
          type: number
          format: double
        monthly_target_hours:
          type: number
          format: double
        annual_target_hours:
          type: number
          format: double
        max_flextime_per_month:
          type: integer
        upper_limit_annual:
          type: integer
        lower_limit_annual:
          type: integer
        flextime_threshold:
          type: integer
        credit_type:
          type: string
          enum:
            - no_evaluation
            - complete
            - after_threshold
            - no_carryover
    UpdateTariffRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        week_plan_id:
          type: string
          format: uuid
        valid_from:
          type: string
          format: date
        valid_to:
          type: string
          format: date
        is_active:
          type: boolean
        rhythm_type:
          type: string
          enum:
            - weekly
            - rolling_weekly
            - x_days
          description: Time plan rhythm type
        cycle_days:
          type: integer
          minimum: 1
          maximum: 365
          description: "For x_days rhythm: number of days in cycle"
          nullable: true
        rhythm_start_date:
          type: string
          format: date
          description: Start date for rhythm calculation
          nullable: true
        week_plan_ids:
          type: array
          description: "For rolling_weekly: ordered list of week plan IDs"
          items:
            type: string
            format: uuid
        day_plans:
          type: array
          description: "For x_days: day plans per position in cycle"
          items:
            $ref: "#/components/schemas/CreateTariffRequest/properties/day_plans/items"
        annual_vacation_days:
          type: number
          format: double
          nullable: true
        work_days_per_week:
          type: integer
          minimum: 1
          maximum: 7
          nullable: true
        vacation_basis:
          type: string
          enum:
            - calendar_year
            - entry_date
        daily_target_hours:
          type: number
          format: double
          nullable: true
        weekly_target_hours:
          type: number
          format: double
          nullable: true
        monthly_target_hours:
          type: number
          format: double
          nullable: true
        annual_target_hours:
          type: number
          format: double
          nullable: true
        max_flextime_per_month:
          type: integer
          nullable: true
        upper_limit_annual:
          type: integer
          nullable: true
        lower_limit_annual:
          type: integer
          nullable: true
        flextime_threshold:
          type: integer
          nullable: true
        credit_type:
          type: string
          enum:
            - no_evaluation
            - complete
            - after_threshold
            - no_carryover
    TariffList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Tariff"
    BookingType:
      type: object
      required:
        - id
        - tenant_id
        - code
        - name
        - direction
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
          description: Null for system booking types
          nullable: true
        code:
          type: string
          example: COME
        name:
          type: string
          example: Clock In
        description:
          type: string
          nullable: true
        direction:
          type: string
          enum:
            - in
            - out
          description: Whether this is an arrival (in) or departure (out) booking
          example: in
        is_system:
          type: boolean
          description: System types cannot be deleted
          example: true
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    BookingTypeSummary:
      type: object
      required:
        - id
        - code
        - name
        - direction
      properties:
        id:
          type: string
          format: uuid
        code:
          type: string
        name:
          type: string
        direction:
          type: string
          enum:
            - in
            - out
    CreateBookingTypeRequest:
      type: object
      required:
        - code
        - name
        - direction
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 20
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        direction:
          type: string
          enum:
            - in
            - out
    UpdateBookingTypeRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        is_active:
          type: boolean
    BookingTypeList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/BookingType"
    AbsenceType:
      type: object
      required:
        - id
        - code
        - name
        - category
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
          description: Null for system absence types
          nullable: true
        code:
          type: string
          example: VAC
        name:
          type: string
          example: Vacation
        description:
          type: string
          nullable: true
        category:
          type: string
          enum:
            - vacation
            - sick
            - personal
            - unpaid
            - holiday
            - other
          example: vacation
        is_paid:
          type: boolean
          example: true
        affects_vacation_balance:
          type: boolean
          description: Whether this absence type deducts from vacation balance
          example: true
        requires_approval:
          type: boolean
          example: true
        color:
          type: string
          description: Hex color for UI display
          example: "#4CAF50"
        is_system:
          type: boolean
          description: System types cannot be deleted
          example: false
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    AbsenceTypeSummary:
      type: object
      required:
        - id
        - code
        - name
        - category
      properties:
        id:
          type: string
          format: uuid
        code:
          type: string
        name:
          type: string
        category:
          type: string
        color:
          type: string
    CreateAbsenceTypeRequest:
      type: object
      required:
        - code
        - name
        - category
      properties:
        code:
          type: string
          minLength: 1
          maxLength: 20
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        category:
          type: string
          enum:
            - vacation
            - sick
            - personal
            - unpaid
            - holiday
            - other
        is_paid:
          type: boolean
          default: true
        affects_vacation_balance:
          type: boolean
          default: false
        requires_approval:
          type: boolean
          default: true
        color:
          type: string
    UpdateAbsenceTypeRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        category:
          type: string
          enum:
            - vacation
            - sick
            - personal
            - unpaid
            - holiday
            - other
        is_paid:
          type: boolean
        affects_vacation_balance:
          type: boolean
        requires_approval:
          type: boolean
        color:
          type: string
        is_active:
          type: boolean
    AbsenceTypeList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/AbsenceType"
    VacationBalance:
      type: object
      required:
        - id
        - tenant_id
        - employee_id
        - year
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        year:
          type: integer
          example: 2024
        base_entitlement:
          type: number
          format: decimal
          description: Annual vacation entitlement in days
          example: 30
        additional_entitlement:
          type: number
          format: decimal
          description: Additional entitlement (bonus, seniority)
          example: 0
        carryover_from_previous:
          type: number
          format: decimal
          description: Days carried over from previous year
          example: 5
        manual_adjustment:
          type: number
          format: decimal
          description: Manual adjustments
          example: 0
        used_days:
          type: number
          format: decimal
          description: Days already used
          example: 10
        planned_days:
          type: number
          format: decimal
          description: Days planned/approved but not yet taken
          example: 5
        total_entitlement:
          type: number
          format: decimal
          description: Total available days (calculated)
          example: 35
        remaining_days:
          type: number
          format: decimal
          description: Remaining days (total - used - planned)
          example: 20
        carryover_to_next:
          type: number
          format: decimal
          description: Days that will carry over to next year
          nullable: true
        carryover_expires_at:
          type: string
          format: date
          description: Date when carryover days expire
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        employee:
          allOf:
            - $ref: "#/components/schemas/EmployeeSummary"
          nullable: true
    CreateVacationBalanceRequest:
      type: object
      required:
        - employee_id
        - year
        - base_entitlement
      properties:
        employee_id:
          type: string
          format: uuid
        year:
          type: integer
        base_entitlement:
          type: number
          format: decimal
        additional_entitlement:
          type: number
          format: decimal
        carryover_from_previous:
          type: number
          format: decimal
        manual_adjustment:
          type: number
          format: decimal
        carryover_expires_at:
          type: string
          format: date
    UpdateVacationBalanceRequest:
      type: object
      properties:
        base_entitlement:
          type: number
          format: decimal
        additional_entitlement:
          type: number
          format: decimal
        carryover_from_previous:
          type: number
          format: decimal
        manual_adjustment:
          type: number
          format: decimal
        carryover_to_next:
          type: number
          format: decimal
        carryover_expires_at:
          type: string
          format: date
    VacationBalanceList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/VacationBalance"
    AuditLog:
      type: object
      required:
        - id
        - tenant_id
        - action
        - entity_type
        - entity_id
        - performed_at
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        user_id:
          type: string
          format: uuid
          description: User who performed the action (null for system actions)
          nullable: true
        action:
          type: string
          enum:
            - create
            - update
            - delete
            - approve
            - reject
            - close
            - reopen
            - export
            - import
            - login
            - logout
          example: update
        entity_type:
          type: string
          description: Type of entity affected
          example: booking
        entity_id:
          type: string
          format: uuid
          description: ID of the affected entity
        entity_name:
          type: string
          description: Human-readable name of entity
          example: "Booking #12345"
          nullable: true
        changes:
          type: object
          description: JSON object with changed fields (before/after)
          example:
            edited_time:
              before: 480
              after: 510
          nullable: true
        metadata:
          type: object
          description: Additional context
          nullable: true
        ip_address:
          type: string
          example: 192.168.1.1
          nullable: true
        user_agent:
          type: string
          nullable: true
        performed_at:
          type: string
          format: date-time
        user:
          allOf:
            - $ref: "#/components/schemas/UserSummary"
          nullable: true
    AuditLogList:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/AuditLog"
        meta:
          $ref: "#/components/schemas/PaginationMeta"
    UserGroup:
      type: object
      required:
        - id
        - tenant_id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
          example: Administrators
        code:
          type: string
          example: ADMIN
        description:
          type: string
          nullable: true
        is_system:
          type: boolean
          description: System groups cannot be deleted
          example: false
        is_admin:
          type: boolean
          description: Admin groups bypass permission checks
          example: false
        is_active:
          type: boolean
          example: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        permissions:
          type: array
          items:
            $ref: "#/components/schemas/Permission"
    UserGroupSummary:
      type: object
      required:
        - id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        code:
          type: string
    Permission:
      type: object
      required:
        - id
        - resource
        - action
      properties:
        id:
          type: string
          format: uuid
        resource:
          type: string
          example: employees
        action:
          type: string
          enum:
            - create
            - read
            - update
            - delete
            - manage
            - view_own
            - view_all
            - approve
            - request
          example: read
        description:
          type: string
          nullable: true
    CreateUserGroupRequest:
      type: object
      required:
        - name
        - code
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 50
        description:
          type: string
        permission_ids:
          type: array
          items:
            type: string
            format: uuid
        is_admin:
          type: boolean
    UpdateUserGroupRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 255
        code:
          type: string
          minLength: 1
          maxLength: 50
        description:
          type: string
        permission_ids:
          type: array
          items:
            type: string
            format: uuid
        is_active:
          type: boolean
        is_admin:
          type: boolean
    UserGroupList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/UserGroup"
    DepartmentSummary:
      type: object
      required:
        - id
        - name
        - code
      properties:
        id:
          type: string
          format: uuid
        name:
          type: string
        code:
          type: string
    DailyValueSummary:
      type: object
      required:
        - id
        - value_date
        - status
        - net_minutes
        - balance_minutes
      properties:
        id:
          type: string
          format: uuid
        value_date:
          type: string
          format: date
        status:
          type: string
        net_minutes:
          type: integer
        balance_minutes:
          type: integer
        has_errors:
          type: boolean
    DailyError:
      type: object
      required:
        - id
        - daily_value_id
        - error_type
        - message
      properties:
        id:
          type: string
          format: uuid
        daily_value_id:
          type: string
          format: uuid
        error_type:
          type: string
          enum:
            - missing_booking
            - unpaired_booking
            - overlapping_bookings
            - core_time_violation
            - exceeds_max_hours
            - below_min_hours
            - break_violation
            - invalid_sequence
          example: missing_booking
        message:
          type: string
          example: Missing clock-out booking
        severity:
          type: string
          enum:
            - warning
            - error
          example: error
        booking_id:
          type: string
          format: uuid
          description: Related booking if applicable
          nullable: true
        created_at:
          type: string
          format: date-time
    Booking:
      type: object
      required:
        - id
        - tenant_id
        - employee_id
        - booking_date
        - booking_type_id
        - original_time
        - edited_time
        - source
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        booking_date:
          type: string
          format: date
          example: 2024-01-15
        booking_type_id:
          type: string
          format: uuid
        original_time:
          type: integer
          description: Original booking time (minutes from midnight)
          example: 480
        edited_time:
          type: integer
          description: Edited/corrected time (minutes from midnight)
          example: 480
        calculated_time:
          type: integer
          description: Time after tolerance/rounding (minutes from midnight)
          nullable: true
        time_string:
          type: string
          description: Formatted time as HH:MM (read-only)
          example: 08:00
          readOnly: true
        pair_id:
          type: string
          format: uuid
          description: ID of paired booking (in/out pair)
          nullable: true
        source:
          type: string
          enum:
            - web
            - terminal
            - api
            - import
            - correction
          example: web
        terminal_id:
          type: string
          format: uuid
          nullable: true
        notes:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        created_by:
          type: string
          format: uuid
          nullable: true
        updated_by:
          type: string
          format: uuid
          nullable: true
        employee:
          allOf:
            - $ref: "#/components/schemas/EmployeeSummary"
          nullable: true
        booking_type:
          allOf:
            - $ref: "#/components/schemas/BookingTypeSummary"
          nullable: true
    CreateBookingRequest:
      type: object
      required:
        - employee_id
        - booking_date
        - booking_type_id
        - time
      properties:
        employee_id:
          type: string
          format: uuid
        booking_date:
          type: string
          format: date
          description: Date in YYYY-MM-DD format
        booking_type_id:
          type: string
          format: uuid
        time:
          type: string
          description: Time in HH:MM format
          example: 08:00
        notes:
          type: string
    UpdateBookingRequest:
      type: object
      properties:
        time:
          type: string
          description: Time in HH:MM format
          example: 08:15
        notes:
          type: string
    BookingList:
      type: object
      required:
        - data
        - total
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Booking"
        total:
          type: integer
          example: 50
    DayView:
      type: object
      required:
        - employee_id
        - date
        - bookings
      properties:
        employee_id:
          type: string
          format: uuid
        date:
          type: string
          format: date
        bookings:
          type: array
          items:
            $ref: "#/components/schemas/Booking"
        daily_value:
          allOf:
            - $ref: "#/components/schemas/DailyValue"
          nullable: true
        day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
        is_holiday:
          type: boolean
        holiday:
          allOf:
            - $ref: "#/components/schemas/Holiday"
          nullable: true
        errors:
          type: array
          items:
            $ref: "#/components/schemas/DailyError"
    DailyValue:
      type: object
      required:
        - id
        - tenant_id
        - employee_id
        - value_date
        - status
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        value_date:
          type: string
          format: date
          example: 2024-01-15
        day_plan_id:
          type: string
          format: uuid
          nullable: true
        status:
          type: string
          enum:
            - pending
            - calculated
            - error
            - approved
          example: calculated
        target_minutes:
          type: integer
          description: Target work time in minutes
          example: 480
        gross_minutes:
          type: integer
          description: Gross work time in minutes
          example: 540
        break_minutes:
          type: integer
          description: Break time in minutes
          example: 30
        net_minutes:
          type: integer
          description: Net work time in minutes
          example: 510
        overtime_minutes:
          type: integer
          description: Overtime in minutes
          example: 30
        undertime_minutes:
          type: integer
          description: Undertime in minutes
          example: 0
        balance_minutes:
          type: integer
          description: Balance (overtime - undertime)
          example: 30
        is_holiday:
          type: boolean
          example: false
        is_weekend:
          type: boolean
          example: false
        is_absence:
          type: boolean
          example: false
        absence_type_id:
          type: string
          format: uuid
          nullable: true
        has_errors:
          type: boolean
          example: false
        is_locked:
          type: boolean
          description: Locked after month closing
          example: false
        calculated_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        employee:
          allOf:
            - $ref: "#/components/schemas/EmployeeSummary"
          nullable: true
        day_plan:
          allOf:
            - $ref: "#/components/schemas/DayPlanSummary"
          nullable: true
        absence_type:
          allOf:
            - $ref: "#/components/schemas/AbsenceTypeSummary"
          nullable: true
        errors:
          type: array
          items:
            $ref: "#/components/schemas/DailyError"
    DailyValueList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/DailyValue"
        meta:
          $ref: "#/components/schemas/PaginationMeta"
    Absence:
      type: object
      required:
        - id
        - tenant_id
        - employee_id
        - absence_type_id
        - absence_date
        - duration
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        absence_type_id:
          type: string
          format: uuid
        absence_date:
          type: string
          format: date
          example: 2024-01-15
        duration:
          type: number
          format: decimal
          description: 1.0 for full day, 0.5 for half day
          example: 1
        status:
          type: string
          enum:
            - pending
            - approved
            - rejected
            - cancelled
          example: approved
        notes:
          type: string
          nullable: true
        rejection_reason:
          type: string
          nullable: true
        approved_by:
          type: string
          format: uuid
          nullable: true
        approved_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        created_by:
          type: string
          format: uuid
          nullable: true
        employee:
          allOf:
            - $ref: "#/components/schemas/EmployeeSummary"
          nullable: true
        absence_type:
          allOf:
            - $ref: "#/components/schemas/AbsenceTypeSummary"
          nullable: true
    CreateAbsenceRangeRequest:
      type: object
      required:
        - absence_type_id
        - from
        - to
        - duration
      properties:
        absence_type_id:
          type: string
          format: uuid
        from:
          type: string
          format: date
          description: Start date in YYYY-MM-DD format
        to:
          type: string
          format: date
          description: End date in YYYY-MM-DD format
        duration:
          type: number
          format: decimal
          description: 1.0 for full day, 0.5 for half day (applies to all days in range)
          example: 1
        notes:
          type: string
    AbsenceList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Absence"
    MonthlyValue:
      type: object
      required:
        - id
        - tenant_id
        - employee_id
        - year
        - month
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        year:
          type: integer
          example: 2024
        month:
          type: integer
          minimum: 1
          maximum: 12
          example: 1
        status:
          type: string
          enum:
            - open
            - calculated
            - closed
            - exported
          example: calculated
        target_minutes:
          type: integer
          description: Total target work time for month
          example: 10080
        gross_minutes:
          type: integer
          description: Total gross work time
          example: 10500
        break_minutes:
          type: integer
          description: Total break time
          example: 600
        net_minutes:
          type: integer
          description: Total net work time
          example: 9900
        overtime_minutes:
          type: integer
          description: Total overtime
          example: 420
        undertime_minutes:
          type: integer
          description: Total undertime
          example: 0
        balance_minutes:
          type: integer
          description: Balance (overtime - undertime)
          example: 420
        working_days:
          type: integer
          description: Number of working days in month
          example: 21
        worked_days:
          type: integer
          description: Number of days actually worked
          example: 20
        absence_days:
          type: number
          format: decimal
          description: Number of absence days
          example: 1
        holiday_days:
          type: integer
          description: Number of holidays
          example: 0
        account_balances:
          type: object
          description: Balances per account (account_id -> minutes)
          additionalProperties:
            type: integer
        calculated_at:
          type: string
          format: date-time
          nullable: true
        closed_at:
          type: string
          format: date-time
          nullable: true
        closed_by:
          type: string
          format: uuid
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        employee:
          allOf:
            - $ref: "#/components/schemas/EmployeeSummary"
          nullable: true
    MonthlyValueList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/MonthlyValue"
    Correction:
      type: object
      required:
        - id
        - tenant_id
        - employee_id
        - correction_date
        - correction_type
        - value_minutes
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        correction_date:
          type: string
          format: date
          example: 2024-01-15
        correction_type:
          type: string
          enum:
            - time_adjustment
            - balance_adjustment
            - vacation_adjustment
            - account_adjustment
          example: time_adjustment
        account_id:
          type: string
          format: uuid
          description: Target account for account_adjustment type
          nullable: true
        value_minutes:
          type: integer
          description: Correction value in minutes (positive or negative)
          example: 60
        reason:
          type: string
          description: Reason for correction
          example: Forgot to clock out
        status:
          type: string
          enum:
            - pending
            - approved
            - rejected
          example: approved
        approved_by:
          type: string
          format: uuid
          nullable: true
        approved_at:
          type: string
          format: date-time
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        created_by:
          type: string
          format: uuid
          nullable: true
        employee:
          allOf:
            - $ref: "#/components/schemas/EmployeeSummary"
          nullable: true
        account:
          allOf:
            - $ref: "#/components/schemas/AccountSummary"
          nullable: true
    CreateCorrectionRequest:
      type: object
      required:
        - employee_id
        - correction_date
        - correction_type
        - value_minutes
        - reason
      properties:
        employee_id:
          type: string
          format: uuid
        correction_date:
          type: string
          format: date
        correction_type:
          type: string
          enum:
            - time_adjustment
            - balance_adjustment
            - vacation_adjustment
            - account_adjustment
        account_id:
          type: string
          format: uuid
          description: Required for account_adjustment type
        value_minutes:
          type: integer
        reason:
          type: string
          minLength: 5
          maxLength: 500
    CorrectionList:
      type: object
      required:
        - data
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Correction"
    Report:
      type: object
      required:
        - id
        - tenant_id
        - report_type
        - status
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        report_type:
          type: string
          enum:
            - daily_overview
            - weekly_overview
            - monthly_overview
            - employee_timesheet
            - department_summary
            - absence_report
            - vacation_report
            - overtime_report
            - account_balances
            - custom
          example: monthly_overview
        name:
          type: string
          example: January 2024 Overview
        description:
          type: string
          nullable: true
        status:
          type: string
          enum:
            - pending
            - generating
            - completed
            - failed
          example: completed
        parameters:
          type: object
          description: Report parameters (dates, employees, departments, etc.)
          properties:
            from_date:
              type: string
              format: date
            to_date:
              type: string
              format: date
            employee_ids:
              type: array
              items:
                type: string
                format: uuid
            department_ids:
              type: array
              items:
                type: string
                format: uuid
        format:
          type: string
          enum:
            - json
            - csv
            - xlsx
            - pdf
          example: xlsx
        file_url:
          type: string
          format: uri
          description: URL to download generated report
          nullable: true
        file_size:
          type: integer
          description: File size in bytes
          nullable: true
        row_count:
          type: integer
          description: Number of rows in report
          nullable: true
        requested_at:
          type: string
          format: date-time
        started_at:
          type: string
          format: date-time
          nullable: true
        completed_at:
          type: string
          format: date-time
          nullable: true
        error_message:
          type: string
          nullable: true
        created_by:
          type: string
          format: uuid
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    GenerateReportRequest:
      type: object
      required:
        - report_type
        - format
      properties:
        report_type:
          type: string
          enum:
            - daily_overview
            - weekly_overview
            - monthly_overview
            - employee_timesheet
            - department_summary
            - absence_report
            - vacation_report
            - overtime_report
            - account_balances
            - custom
        name:
          type: string
          maxLength: 255
        format:
          type: string
          enum:
            - json
            - csv
            - xlsx
            - pdf
        parameters:
          type: object
          properties:
            from_date:
              type: string
              format: date
            to_date:
              type: string
              format: date
            employee_ids:
              type: array
              items:
                type: string
                format: uuid
            department_ids:
              type: array
              items:
                type: string
                format: uuid
    ReportList:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/Report"
        meta:
          $ref: "#/components/schemas/PaginationMeta"
    PayrollExport:
      type: object
      required:
        - id
        - tenant_id
        - year
        - month
        - status
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        year:
          type: integer
          example: 2024
        month:
          type: integer
          minimum: 1
          maximum: 12
          example: 1
        status:
          type: string
          enum:
            - pending
            - generating
            - completed
            - failed
          example: completed
        export_type:
          type: string
          enum:
            - standard
            - datev
            - sage
            - custom
          example: standard
        parameters:
          type: object
          description: Export parameters
          properties:
            employee_ids:
              type: array
              items:
                type: string
                format: uuid
            department_ids:
              type: array
              items:
                type: string
                format: uuid
            include_accounts:
              type: array
              items:
                type: string
                format: uuid
        format:
          type: string
          enum:
            - csv
            - xlsx
            - xml
            - json
          example: csv
        file_url:
          type: string
          format: uri
          nullable: true
        file_size:
          type: integer
          nullable: true
        row_count:
          type: integer
          nullable: true
        employee_count:
          type: integer
          example: 50
        total_hours:
          type: number
          format: decimal
          example: 8400.5
        total_overtime:
          type: number
          format: decimal
          example: 250
        requested_at:
          type: string
          format: date-time
        started_at:
          type: string
          format: date-time
          nullable: true
        completed_at:
          type: string
          format: date-time
          nullable: true
        error_message:
          type: string
          nullable: true
        created_by:
          type: string
          format: uuid
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
    GeneratePayrollExportRequest:
      type: object
      required:
        - year
        - month
        - format
      properties:
        year:
          type: integer
        month:
          type: integer
          minimum: 1
          maximum: 12
        export_type:
          type: string
          enum:
            - standard
            - datev
            - sage
            - custom
          default: standard
        format:
          type: string
          enum:
            - csv
            - xlsx
            - xml
            - json
        parameters:
          type: object
          properties:
            employee_ids:
              type: array
              items:
                type: string
                format: uuid
            department_ids:
              type: array
              items:
                type: string
                format: uuid
            include_accounts:
              type: array
              items:
                type: string
                format: uuid
    PayrollExportList:
      type: object
      required:
        - data
        - meta
      properties:
        data:
          type: array
          items:
            $ref: "#/components/schemas/PayrollExport"
        meta:
          $ref: "#/components/schemas/PaginationMeta"
    Team:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        department_id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        leader_employee_id:
          type: string
          format: uuid
        is_active:
          type: boolean
        member_count:
          type: integer
          description: Number of members in the team
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        department:
          $ref: "#/components/schemas/Department"
        leader:
          $ref: "#/components/schemas/Employee"
        members:
          type: array
          items:
            $ref: "#/components/schemas/TeamMember"
      required:
        - id
        - tenant_id
        - name
        - is_active
    TeamMember:
      type: object
      properties:
        team_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        joined_at:
          type: string
          format: date-time
        role:
          $ref: "#/components/schemas/TeamMemberRole"
        employee:
          $ref: "#/components/schemas/Employee"
      required:
        - team_id
        - employee_id
        - joined_at
        - role
    TeamMemberRole:
      type: string
      enum:
        - member
        - lead
        - deputy
    CreateTeamRequest:
      type: object
      properties:
        department_id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        leader_employee_id:
          type: string
          format: uuid
        is_active:
          type: boolean
          default: true
      required:
        - name
    UpdateTeamRequest:
      type: object
      properties:
        department_id:
          type: string
          format: uuid
        name:
          type: string
          minLength: 1
          maxLength: 255
        description:
          type: string
        leader_employee_id:
          type: string
          format: uuid
        is_active:
          type: boolean
    AddTeamMemberRequest:
      type: object
      properties:
        employee_id:
          type: string
          format: uuid
        role:
          $ref: "#/components/schemas/TeamMemberRole"
      required:
        - employee_id
    UpdateTeamMemberRequest:
      type: object
      properties:
        role:
          $ref: "#/components/schemas/TeamMemberRole"
      required:
        - role
    TeamList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Team"
        next_cursor:
          type: string
      required:
        - items
    EmployeeDayPlan:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        employee_id:
          type: string
          format: uuid
        plan_date:
          type: string
          format: date
        day_plan_id:
          type: string
          format: uuid
        source:
          type: string
          enum:
            - tariff
            - manual
            - holiday
        notes:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        day_plan:
          $ref: "#/components/schemas/DayPlan"
      required:
        - id
        - tenant_id
        - employee_id
        - plan_date
        - source
    CreateEmployeeDayPlanRequest:
      type: object
      properties:
        employee_id:
          type: string
          format: uuid
        plan_date:
          type: string
          format: date
        day_plan_id:
          type: string
          format: uuid
          description: If null, marks the day as an off day
        source:
          $ref: "#/components/schemas/EmployeeDayPlan/properties/source"
        notes:
          type: string
      required:
        - employee_id
        - plan_date
    UpdateEmployeeDayPlanRequest:
      type: object
      properties:
        day_plan_id:
          type: string
          format: uuid
          description: If null, marks the day as an off day
        source:
          $ref: "#/components/schemas/EmployeeDayPlan/properties/source"
        notes:
          type: string
    EmployeeDayPlanList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/EmployeeDayPlan"
        next_cursor:
          type: string
      required:
        - items
    MonthlyEvaluation:
      type: object
      properties:
        id:
          type: string
          format: uuid
        tenant_id:
          type: string
          format: uuid
        name:
          type: string
        description:
          type: string
        flextime_cap_positive:
          type: integer
          description: Maximum positive flextime in minutes
        flextime_cap_negative:
          type: integer
          description: Maximum negative flextime in minutes
        overtime_threshold:
          type: integer
          description: Overtime threshold in minutes
        max_carryover_vacation:
          type: number
          format: decimal
          description: Maximum vacation days that can be carried over
        is_default:
          type: boolean
        is_active:
          type: boolean
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - tenant_id
        - name
        - is_default
        - is_active
    CreateMonthlyEvaluationRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
        flextime_cap_positive:
          type: integer
          minimum: 0
          description: Maximum positive flextime in minutes
        flextime_cap_negative:
          type: integer
          minimum: 0
          description: Maximum negative flextime in minutes
        overtime_threshold:
          type: integer
          minimum: 0
          description: Overtime threshold in minutes
        max_carryover_vacation:
          type: number
          format: decimal
          minimum: 0
          description: Maximum vacation days that can be carried over
        is_default:
          type: boolean
          default: false
        is_active:
          type: boolean
          default: true
      required:
        - name
    UpdateMonthlyEvaluationRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
        flextime_cap_positive:
          type: integer
          minimum: 0
        flextime_cap_negative:
          type: integer
          minimum: 0
        overtime_threshold:
          type: integer
          minimum: 0
        max_carryover_vacation:
          type: number
          format: decimal
          minimum: 0
        is_default:
          type: boolean
        is_active:
          type: boolean
    MonthlyEvaluationList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/MonthlyEvaluation"
        next_cursor:
          type: string
      required:
        - items
