# Employee message schemas (ZMI-TICKET-026)

EmployeeMessageRecipient:
  type: object
  required:
    - id
    - message_id
    - employee_id
    - status
    - created_at
    - updated_at
  properties:
    id:
      type: string
      format: uuid
    message_id:
      type: string
      format: uuid
    employee_id:
      type: string
      format: uuid
    status:
      type: string
      enum:
        - pending
        - sent
        - failed
    sent_at:
      type: string
      format: date-time
      x-nullable: true
    error_message:
      type: string
      x-nullable: true
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time

EmployeeMessage:
  type: object
  required:
    - id
    - tenant_id
    - sender_id
    - subject
    - body
    - created_at
    - updated_at
    - recipients
  properties:
    id:
      type: string
      format: uuid
    tenant_id:
      type: string
      format: uuid
    sender_id:
      type: string
      format: uuid
    subject:
      type: string
      example: "Schedule change notification"
    body:
      type: string
      example: "Your shift has been updated for next week."
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time
    recipients:
      type: array
      items:
        $ref: '#/EmployeeMessageRecipient'

EmployeeMessageList:
  type: object
  required:
    - data
    - total
  properties:
    data:
      type: array
      items:
        $ref: '#/EmployeeMessage'
    total:
      type: integer
      format: int64

CreateEmployeeMessageRequest:
  type: object
  required:
    - subject
    - body
    - employee_ids
  properties:
    subject:
      type: string
      minLength: 1
      maxLength: 255
    body:
      type: string
      minLength: 1
    employee_ids:
      type: array
      items:
        type: string
        format: uuid
      minItems: 1

SendEmployeeMessageResponse:
  type: object
  required:
    - message_id
    - sent
    - failed
  properties:
    message_id:
      type: string
      format: uuid
    sent:
      type: integer
      format: int64
      description: Number of recipients successfully sent
    failed:
      type: integer
      format: int64
      description: Number of recipients that failed
