# Tariff-related schemas
Tariff:
  type: object
  required:
    - id
    - tenant_id
    - code
    - name
  properties:
    id:
      type: string
      format: uuid
    tenant_id:
      type: string
      format: uuid
    code:
      type: string
      example: "TARIFF-001"
    name:
      type: string
      example: "Standard Tariff"
    description:
      type: string
      x-nullable: true
    week_plan_id:
      type: string
      format: uuid
      x-nullable: true
    valid_from:
      type: string
      format: date
      x-nullable: true
    valid_to:
      type: string
      format: date
      x-nullable: true
    is_active:
      type: boolean
      example: true
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time
    # Expanded relations
    week_plan:
      allOf:
        - $ref: './week-plans.yaml#/WeekPlanSummary'
      x-nullable: true
    breaks:
      type: array
      items:
        $ref: '#/TariffBreak'

TariffSummary:
  type: object
  required:
    - id
    - code
    - name
  properties:
    id:
      type: string
      format: uuid
    code:
      type: string
    name:
      type: string

TariffBreak:
  type: object
  required:
    - id
    - tariff_id
    - break_type
    - duration
  properties:
    id:
      type: string
      format: uuid
    tariff_id:
      type: string
      format: uuid
    break_type:
      type: string
      enum:
        - fixed
        - variable
        - minimum
      example: "minimum"
    after_work_minutes:
      type: integer
      description: Deduct break after this much work time
      example: 360
    duration:
      type: integer
      description: Break duration in minutes
      example: 30
    is_paid:
      type: boolean
      example: false
    sort_order:
      type: integer
      example: 0
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time

CreateTariffRequest:
  type: object
  required:
    - code
    - name
  properties:
    code:
      type: string
      minLength: 1
      maxLength: 20
    name:
      type: string
      minLength: 1
      maxLength: 255
    description:
      type: string
    week_plan_id:
      type: string
      format: uuid
    valid_from:
      type: string
      format: date
    valid_to:
      type: string
      format: date

UpdateTariffRequest:
  type: object
  properties:
    name:
      type: string
      minLength: 1
      maxLength: 255
    description:
      type: string
    week_plan_id:
      type: string
      format: uuid
    valid_from:
      type: string
      format: date
    valid_to:
      type: string
      format: date
    is_active:
      type: boolean

CreateTariffBreakRequest:
  type: object
  required:
    - break_type
    - duration
  properties:
    break_type:
      type: string
      enum:
        - fixed
        - variable
        - minimum
    after_work_minutes:
      type: integer
    duration:
      type: integer
    is_paid:
      type: boolean
      default: false

TariffList:
  type: object
  required:
    - data
  properties:
    data:
      type: array
      items:
        $ref: '#/Tariff'
