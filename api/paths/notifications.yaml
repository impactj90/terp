# Notification endpoints
/notifications:
  get:
    tags:
      - Notifications
    summary: List notifications for the current user
    operationId: listNotifications
    parameters:
      - name: type
        in: query
        type: string
        enum:
          - approvals
          - errors
          - reminders
          - system
        description: Filter by notification type
      - name: unread
        in: query
        type: boolean
        description: Filter by unread status
      - name: from
        in: query
        type: string
        format: date-time
        description: Start datetime filter
      - name: to
        in: query
        type: string
        format: date-time
        description: End datetime filter
      - name: limit
        in: query
        type: integer
        default: 20
        minimum: 1
        maximum: 100
      - name: offset
        in: query
        type: integer
        minimum: 0
        default: 0
    responses:
      200:
        description: List of notifications
        schema:
          $ref: '../schemas/notifications.yaml#/NotificationList'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      403:
        $ref: '../responses/errors.yaml#/Forbidden'

/notifications/{id}/read:
  post:
    tags:
      - Notifications
    summary: Mark notification as read
    operationId: markNotificationRead
    parameters:
      - name: id
        in: path
        required: true
        type: string
        format: uuid
    responses:
      200:
        description: Updated notification
        schema:
          $ref: '../schemas/notifications.yaml#/Notification'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      403:
        $ref: '../responses/errors.yaml#/Forbidden'
      404:
        $ref: '../responses/errors.yaml#/NotFound'

/notifications/read-all:
  post:
    tags:
      - Notifications
    summary: Mark all notifications as read
    operationId: markAllNotificationsRead
    responses:
      200:
        description: Count of notifications marked as read
        schema:
          $ref: '../schemas/notifications.yaml#/MarkNotificationsReadResponse'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      403:
        $ref: '../responses/errors.yaml#/Forbidden'

/notifications/stream:
  get:
    tags:
      - Notifications
    summary: Stream notifications for the current user
    operationId: streamNotifications
    produces:
      - text/event-stream
    responses:
      200:
        description: Server-sent events stream
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      403:
        $ref: '../responses/errors.yaml#/Forbidden'

/notification-preferences:
  get:
    tags:
      - Notifications
    summary: Get notification preferences for the current user
    operationId: getNotificationPreferences
    responses:
      200:
        description: Notification preferences
        schema:
          $ref: '../schemas/notifications.yaml#/NotificationPreferences'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      403:
        $ref: '../responses/errors.yaml#/Forbidden'
  put:
    tags:
      - Notifications
    summary: Update notification preferences for the current user
    operationId: updateNotificationPreferences
    parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '../schemas/notifications.yaml#/UpdateNotificationPreferencesRequest'
    responses:
      200:
        description: Updated notification preferences
        schema:
          $ref: '../schemas/notifications.yaml#/NotificationPreferences'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      403:
        $ref: '../responses/errors.yaml#/Forbidden'
