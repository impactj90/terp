# Vacation Capping Rule Group endpoints
/vacation-capping-rule-groups:
  get:
    tags:
      - Vacation Capping Rule Groups
    summary: List vacation capping rule groups
    operationId: listVacationCappingRuleGroups
    parameters:
      - name: active_only
        in: query
        type: boolean
        description: Filter to only active groups
    responses:
      200:
        description: List of vacation capping rule groups
        schema:
          $ref: '../schemas/vacation-capping-rule-groups.yaml#/VacationCappingRuleGroupList'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
  post:
    tags:
      - Vacation Capping Rule Groups
    summary: Create vacation capping rule group
    operationId: createVacationCappingRuleGroup
    parameters:
      - name: body
        in: body
        required: true
        schema:
          $ref: '../schemas/vacation-capping-rule-groups.yaml#/CreateVacationCappingRuleGroupRequest'
    responses:
      201:
        description: Created vacation capping rule group
        schema:
          $ref: '../schemas/vacation-capping-rule-groups.yaml#/VacationCappingRuleGroup'
      400:
        $ref: '../responses/errors.yaml#/BadRequest'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      409:
        description: Code already exists for this tenant
        schema:
          $ref: '../schemas/common.yaml#/ProblemDetails'

/vacation-capping-rule-groups/{id}:
  get:
    tags:
      - Vacation Capping Rule Groups
    summary: Get vacation capping rule group by ID
    operationId: getVacationCappingRuleGroup
    parameters:
      - name: id
        in: path
        required: true
        type: string
        format: uuid
    responses:
      200:
        description: Vacation capping rule group details (includes linked capping rules)
        schema:
          $ref: '../schemas/vacation-capping-rule-groups.yaml#/VacationCappingRuleGroup'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      404:
        $ref: '../responses/errors.yaml#/NotFound'
  patch:
    tags:
      - Vacation Capping Rule Groups
    summary: Update vacation capping rule group
    operationId: updateVacationCappingRuleGroup
    parameters:
      - name: id
        in: path
        required: true
        type: string
        format: uuid
      - name: body
        in: body
        required: true
        schema:
          $ref: '../schemas/vacation-capping-rule-groups.yaml#/UpdateVacationCappingRuleGroupRequest'
    responses:
      200:
        description: Updated vacation capping rule group
        schema:
          $ref: '../schemas/vacation-capping-rule-groups.yaml#/VacationCappingRuleGroup'
      400:
        $ref: '../responses/errors.yaml#/BadRequest'
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      404:
        $ref: '../responses/errors.yaml#/NotFound'
  delete:
    tags:
      - Vacation Capping Rule Groups
    summary: Delete vacation capping rule group
    operationId: deleteVacationCappingRuleGroup
    parameters:
      - name: id
        in: path
        required: true
        type: string
        format: uuid
    responses:
      204:
        description: Vacation capping rule group deleted
      401:
        $ref: '../responses/errors.yaml#/Unauthorized'
      404:
        $ref: '../responses/errors.yaml#/NotFound'
      409:
        description: Group is still assigned to tariffs
        schema:
          $ref: '../schemas/common.yaml#/ProblemDetails'
